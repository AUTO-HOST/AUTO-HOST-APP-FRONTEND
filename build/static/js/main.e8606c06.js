/*! For license information please see main.e8606c06.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),s=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,a=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,i={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!l.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:s,type:e,key:c,ref:u,props:i,_owner:a.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var x=b.prototype=new v;x.constructor=b,m(x,y.prototype),x.isPureReactComponent=!0;var w=Array.isArray,E=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var s,i={},o=null,a=null;if(null!=t)for(s in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)E.call(t,s)&&!k.hasOwnProperty(s)&&(i[s]=t[s]);var l=arguments.length-2;if(1===l)i.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps)void 0===i[s]&&(i[s]=l[s]);return{$$typeof:n,type:e,key:o,ref:a,props:i,_owner:N.current}}function _(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function I(e,t,s,i,o){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var l=!1;if(null===e)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return o=o(l=e),e=""===i?"."+C(l,0):i,w(o)?(s="",null!=e&&(s=e.replace(T,"$&/")+"/"),I(o,t,s,"",function(e){return e})):null!=o&&(_(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,s+(!o.key||l&&l.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(l=0,i=""===i?".":i+":",w(e))for(var c=0;c<e.length;c++){var u=i+C(a=e[c],c);l+=I(a,t,s,u,o)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(a=e.next()).done;)l+=I(a=a.value,t,s,u=i+C(a,c++),o);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function j(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},P={transition:null},O={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:P,ReactCurrentOwner:N};function D(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!_(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=o,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=D,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=m({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=N.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)E.call(t,c)&&!k.hasOwnProperty(c)&&(s[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)s.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:n,type:e.type,key:i,ref:o,props:s,_owner:a}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=_,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=P.transition;P.transition={};try{e()}finally{P.transition=t}},t.unstable_act=D,t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.3.1"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,o=s>>>1;r<o;){var a=2*(r+1)-1,l=e[a],c=a+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[a]=n,r=a);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var a=Date,l=a.now();t.unstable_now=function(){return a.now()-l}}var c=[],u=[],d=1,h=null,f=3,p=!1,m=!1,g=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function w(e){if(g=!1,x(e),!m)if(null!==r(c))m=!0,P(E);else{var t=r(u);null!==t&&O(w,t.startTime-e)}}function E(e,n){m=!1,g&&(g=!1,v(_),_=-1),p=!0;var i=f;try{for(x(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!I());){var o=h.callback;if("function"===typeof o){h.callback=null,f=h.priorityLevel;var a=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof a?h.callback=a:h===r(c)&&s(c),x(n)}else s(c);h=r(c)}if(null!==h)var l=!0;else{var d=r(u);null!==d&&O(w,d.startTime-n),l=!1}return l}finally{h=null,f=i,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,S=null,_=-1,T=5,C=-1;function I(){return!(t.unstable_now()-C<T)}function j(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?N():(k=!1,S=null)}}else k=!1}if("function"===typeof b)N=function(){b(j)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=j,N=function(){R.postMessage(null)}}else N=function(){y(j,0)};function P(e){S=e,k||(k=!0,N())}function O(e,n){_=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){m||p||(m=!0,P(E))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var o=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?o+i:o:i=o,e){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:a=i+a,sortIndex:-1},i>o?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(v(_),_=-1):g=!0,O(w,i-o))):(e.sortIndex=a,n(c,e),m||p||(m=!0,P(E))),e},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),s=n(853);function i(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,a={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(a[e]=t,e=0;e<t.length;e++)o.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function m(e,t,n,r,s,i,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new m(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new m(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new m(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new m(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new m(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new m(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new m(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new m(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new m(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var s=g.hasOwnProperty(t)?g[t]:null;(null!==s?0!==s.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,s,r)&&(n=null),r||null===s?function(e){return!!d.call(p,e)||!d.call(f,e)&&(h.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=null===n?3!==s.type&&"":n:(t=s.attributeName,r=s.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(s=s.type)||4===s&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);g[t]=new m(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new m(e,1,!1,e.toLowerCase(),null,!0,!0)});var x=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),E=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),I=Symbol.for("react.suspense"),j=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var P=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function D(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var L,M=Object.assign;function U(e){if(void 0===L)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);L=t&&t[1]||""}return"\n"+L+e}var F=!1;function V(e,t){if(!e||F)return"";F=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(Li){var r=Li}Reflect.construct(e,[],t)}else{try{t.call()}catch(Li){r=Li}e.call(t.prototype)}else{try{throw Error()}catch(Li){r=Li}e()}}catch(Li){if(Li&&r&&"string"===typeof Li.stack){for(var s=Li.stack.split("\n"),i=r.stack.split("\n"),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(1!==o||1!==a)do{if(o--,0>--a||s[o]!==i[a]){var l="\n"+s[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=o&&0<=a);break}}}finally{F=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=V(e.type,!1);case 11:return e=V(e.type.render,!1);case 1:return e=V(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case E:return"Portal";case S:return"Profiler";case k:return"StrictMode";case I:return"Suspense";case j:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case _:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function G(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(Zc){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function J(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function Y(e,t){J(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&G(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(i(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function se(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(i(92));if(te(n)){if(1<n.length)throw Error(i(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function ie(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ae(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ae(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,de=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function me(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),s=me(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(i(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(i(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(i(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(i(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xe=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Ee=null,Ne=null,ke=null;function Se(e){if(e=bs(e)){if("function"!==typeof Ee)throw Error(i(280));var t=e.stateNode;t&&(t=ws(t),Ee(e.stateNode,e.type,t))}}function _e(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Te(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function Ie(){}var je=!1;function Ae(e,t,n){if(je)return e(t,n);je=!0;try{return Ce(e,t,n)}finally{je=!1,(null!==Ne||null!==ke)&&(Ie(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=ws(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(i(231,t,typeof n));return n}var Pe=!1;if(u)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Pe=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(ue){Pe=!1}function De(e,t,n,r,s,i,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Le=!1,Me=null,Ue=!1,Fe=null,Ve={onError:function(e){Le=!0,Me=e}};function ze(e,t,n,r,s,i,o,a,l){Le=!1,Me=null,De.apply(Ve,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function $e(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(i(188))}function He(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(i(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var o=s.alternate;if(null===o){if(null!==(r=s.return)){n=r;continue}break}if(s.child===o.child){for(o=s.child;o;){if(o===n)return qe(s),e;if(o===r)return qe(s),t;o=o.sibling}throw Error(i(188))}if(n.return!==r.return)n=s,r=o;else{for(var a=!1,l=s.child;l;){if(l===n){a=!0,n=s,r=o;break}if(l===r){a=!0,r=s,n=o;break}l=l.sibling}if(!a){for(l=o.child;l;){if(l===n){a=!0,n=o,r=s;break}if(l===r){a=!0,r=o,n=s;break}l=l.sibling}if(!a)throw Error(i(189))}}if(n.alternate!==r)throw Error(i(190))}if(3!==n.tag)throw Error(i(188));return n.stateNode.current===n?e:t}(e),null!==e?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ke=s.unstable_scheduleCallback,Ge=s.unstable_cancelCallback,Qe=s.unstable_shouldYield,Xe=s.unstable_requestPaint,Je=s.unstable_now,Ye=s.unstable_getCurrentPriorityLevel,Ze=s.unstable_ImmediatePriority,et=s.unstable_UserBlockingPriority,tt=s.unstable_NormalPriority,nt=s.unstable_LowPriority,rt=s.unstable_IdlePriority,st=null,it=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(at(e)/lt|0)|0},at=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function dt(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,s=e.suspendedLanes,i=e.pingedLanes,o=268435455&n;if(0!==o){var a=o&~s;0!==a?r=dt(a):0!==(i&=o)&&(r=dt(i))}else 0!==(o=n&~s)?r=dt(o):0!==i&&(r=dt(i));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&s)&&((s=r&-r)>=(i=t&-t)||16===s&&0!==(4194240&i)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)s=1<<(n=31-ot(t)),r|=e[n],t&=~s;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function mt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var bt=0;function xt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,Et,Nt,kt,St,_t=!1,Tt=[],Ct=null,It=null,jt=null,At=new Map,Rt=new Map,Pt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Dt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":It=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Lt(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=bs(t))&&Et(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mt(e){var t=vs(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=$e(n)))return e.blockedOn=t,void St(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bs(n))&&Et(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);xe=r,n.target.dispatchEvent(r),xe=null,t.shift()}return!0}function Ft(e,t,n){Ut(e)&&n.delete(t)}function Vt(){_t=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==It&&Ut(It)&&(It=null),null!==jt&&Ut(jt)&&(jt=null),At.forEach(Ft),Rt.forEach(Ft)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,_t||(_t=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Vt)))}function Bt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==It&&zt(It,e),null!==jt&&zt(jt,e),At.forEach(t),Rt.forEach(t),n=0;n<Pt.length;n++)(r=Pt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Pt.length&&null===(n=Pt[0]).blockedOn;)Mt(n),null===n.blockedOn&&Pt.shift()}var $t=x.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var s=bt,i=$t.transition;$t.transition=null;try{bt=1,Kt(e,t,n,r)}finally{bt=s,$t.transition=i}}function Wt(e,t,n,r){var s=bt,i=$t.transition;$t.transition=null;try{bt=4,Kt(e,t,n,r)}finally{bt=s,$t.transition=i}}function Kt(e,t,n,r){if(qt){var s=Qt(e,t,n,r);if(null===s)qr(e,t,r,Gt,n),Dt(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return Ct=Lt(Ct,e,t,n,r,s),!0;case"dragenter":return It=Lt(It,e,t,n,r,s),!0;case"mouseover":return jt=Lt(jt,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return At.set(i,Lt(At.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Rt.set(i,Lt(Rt.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(Dt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==s;){var i=bs(s);if(null!==i&&wt(i),null===(i=Qt(e,t,n,r))&&qr(e,t,r,Gt,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Gt=null;function Qt(e,t,n,r){if(Gt=null,null!==(e=vs(e=we(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=$e(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ye()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Jt=null,Yt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Yt,r=n.length,s="value"in Jt?Jt.value:Jt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===s[i-t];t++);return Zt=s.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,s,i){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,an,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),dn=M({},cn,{view:0,detail:0}),hn=sn(dn),fn=M({},dn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(on=e.screenX-ln.screenX,an=e.screenY-ln.screenY):an=on=0,ln=e),on)},movementY:function(e){return"movementY"in e?e.movementY:an}}),pn=sn(fn),mn=sn(M({},fn,{dataTransfer:0})),gn=sn(M({},dn,{relatedTarget:0})),yn=sn(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),xn=sn(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},En={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function Sn(){return kn}var _n=M({},dn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?En[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=sn(_n),Cn=sn(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),In=sn(M({},dn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),jn=sn(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=sn(An),Pn=[9,13,27,32],On=u&&"CompositionEvent"in window,Dn=null;u&&"documentMode"in document&&(Dn=document.documentMode);var Ln=u&&"TextEvent"in window&&!Dn,Mn=u&&(!On||Dn&&8<Dn&&11>=Dn),Un=String.fromCharCode(32),Fn=!1;function Vn(e,t){switch(e){case"keyup":return-1!==Pn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var $n={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$n[e.type]:"textarea"===t}function Hn(e,t,n,r){_e(r),0<(t=Wr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Kn=null;function Gn(e){Ur(e,0)}function Qn(e){if(K(xs(e)))return e}function Xn(e,t){if("change"===e)return t}var Jn=!1;if(u){var Yn;if(u){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Yn=Zn}else Yn=!1;Jn=Yn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Kn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Kn)){var t=[];Hn(t,Kn,e,we(e)),Ae(Gn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function sr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Kn)}function ir(e,t){if("click"===e)return Qn(t)}function or(e,t){if("input"===e||"change"===e)return Qn(t)}var ar="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(ar(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!d.call(t,s)||!ar(e[s],t[s]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function dr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?dr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=G();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=G((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&dr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=void 0===r.end?i:Math.min(r.end,s),!e.extend&&i>r&&(s=r,r=i,i=s),s=ur(n,i);var o=ur(n,r);s&&o&&(1!==e.rangeCount||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(s.node,s.offset),e.removeAllRanges(),i>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var mr=u&&"documentMode"in document&&11>=document.documentMode,gr=null,yr=null,vr=null,br=!1;function xr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==gr||gr!==G(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Wr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Er={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},kr={};function Sr(e){if(Nr[e])return Nr[e];if(!Er[e])return e;var t,n=Er[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Nr[e]=n[t];return e}u&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete Er.animationend.animation,delete Er.animationiteration.animation,delete Er.animationstart.animation),"TransitionEvent"in window||delete Er.transitionend.transition);var _r=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Ir=Sr("transitionend"),jr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){jr.set(e,t),l(t,[e])}for(var Pr=0;Pr<Ar.length;Pr++){var Or=Ar[Pr];Rr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Rr(_r,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Ir,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Dr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Dr));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,s,o,a,l,c){if(ze.apply(this,arguments),Le){if(!Le)throw Error(i(198));var u=Me;Le=!1,Me=null,Ue||(Ue=!0,Fe=u)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,a,c),i=l}else for(o=0;o<r.length;o++){if(l=(a=r[o]).instance,c=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;Mr(s,a,c),i=l}}}if(Ue)throw e=Fe,Ue=!1,Fe=null,e}function Fr(e,t){var n=t[ms];void 0===n&&(n=t[ms]=new Set);var r=e+"__bubble";n.has(r)||($r(t,e,2,!1),n.add(r))}function Vr(e,t,n){var r=0;t&&(r|=4),$r(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[zr]){e[zr]=!0,o.forEach(function(t){"selectionchange"!==t&&(Lr.has(t)||Vr(t,!1,e),Vr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Vr("selectionchange",!1,t))}}function $r(e,t,n,r){switch(Xt(t)){case 1:var s=Ht;break;case 4:s=Wt;break;default:s=Kt}n=s.bind(null,t,n,e),s=void 0,!Pe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var a=r.stateNode.containerInfo;if(a===s||8===a.nodeType&&a.parentNode===s)break;if(4===o)for(o=r.return;null!==o;){var l=o.tag;if((3===l||4===l)&&((l=o.stateNode.containerInfo)===s||8===l.nodeType&&l.parentNode===s))return;o=o.return}for(;null!==a;){if(null===(o=vs(a)))return;if(5===(l=o.tag)||6===l){r=i=o;continue e}a=a.parentNode}}r=r.return}Ae(function(){var r=i,s=we(n),o=[];e:{var a=jr.get(e);if(void 0!==a){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=Tn;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=mn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=In;break;case _r:case Tr:case Cr:l=yn;break;case Ir:l=jn;break;case"scroll":l=hn;break;case"wheel":l=Rn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),d=!u&&"scroll"===e,h=u?null!==a?a+"Capture":null:a;u=[];for(var f,p=r;null!==p;){var m=(f=p).stateNode;if(5===f.tag&&null!==m&&(f=m,null!==h&&(null!=(m=Re(p,h))&&u.push(Hr(p,m,f)))),d)break;p=p.return}0<u.length&&(a=new l(a,c,null,n,s),o.push({event:a,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(a="mouseover"===e||"pointerover"===e)||n===xe||!(c=n.relatedTarget||n.fromElement)||!vs(c)&&!c[ps])&&(l||a)&&(a=s.window===s?s:(a=s.ownerDocument)?a.defaultView||a.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vs(c):null)&&(c!==(d=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,m="onMouseLeave",h="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,m="onPointerLeave",h="onPointerEnter",p="pointer"),d=null==l?a:xs(l),f=null==c?a:xs(c),(a=new u(m,p+"leave",l,n,s)).target=d,a.relatedTarget=f,m=null,vs(s)===r&&((u=new u(h,p+"enter",c,n,s)).target=f,u.relatedTarget=d,m=u),d=m,l&&c)e:{for(h=c,p=0,f=u=l;f;f=Kr(f))p++;for(f=0,m=h;m;m=Kr(m))f++;for(;0<p-f;)u=Kr(u),p--;for(;0<f-p;)h=Kr(h),f--;for(;p--;){if(u===h||null!==h&&u===h.alternate)break e;u=Kr(u),h=Kr(h)}u=null}else u=null;null!==l&&Gr(o,a,l,u,!1),null!==c&&null!==d&&Gr(o,d,c,u,!0)}if("select"===(l=(a=r?xs(r):window).nodeName&&a.nodeName.toLowerCase())||"input"===l&&"file"===a.type)var g=Xn;else if(qn(a))if(Jn)g=or;else{g=sr;var y=rr}else(l=a.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===a.type||"radio"===a.type)&&(g=ir);switch(g&&(g=g(e,r))?Hn(o,g,n,s):(y&&y(e,a,r),"focusout"===e&&(y=a._wrapperState)&&y.controlled&&"number"===a.type&&ee(a,"number",a.value)),y=r?xs(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(gr=y,yr=r,vr=null);break;case"focusout":vr=yr=gr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,xr(o,n,s);break;case"selectionchange":if(mr)break;case"keydown":case"keyup":xr(o,n,s)}var v;if(On)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?Vn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Mn&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Yt="value"in(Jt=s)?Jt.value:Jt.textContent,Bn=!0)),0<(y=Wr(r,b)).length&&(b=new xn(b,e,null,n,s),o.push({event:b,listeners:y}),v?b.data=v:null!==(v=zn(n))&&(b.data=v))),(v=Ln?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Fn=!0,Un);case"textInput":return(e=t.data)===Un&&Fn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!On&&Vn(e,t)?(e=en(),Zt=Yt=Jt=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(s=new xn("onBeforeInput","beforeinput",null,n,s),o.push({event:s,listeners:r}),s.data=v))}Ur(o,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;5===s.tag&&null!==i&&(s=i,null!=(i=Re(e,n))&&r.unshift(Hr(e,i,s)),null!=(i=Re(e,t))&&r.push(Hr(e,i,s))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Gr(e,t,n,r,s){for(var i=t._reactName,o=[];null!==n&&n!==r;){var a=n,l=a.alternate,c=a.stateNode;if(null!==l&&l===r)break;5===a.tag&&null!==c&&(a=c,s?null!=(l=Re(n,i))&&o.unshift(Hr(n,l,a)):s||null!=(l=Re(n,i))&&o.push(Hr(n,l,a))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Qr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function Jr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Xr,"")}function Yr(e,t,n){if(t=Jr(t),Jr(e)!==t&&n)throw Error(i(425))}function Zr(){}var es=null,ts=null;function ns(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var rs="function"===typeof setTimeout?setTimeout:void 0,ss="function"===typeof clearTimeout?clearTimeout:void 0,is="function"===typeof Promise?Promise:void 0,os="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof is?function(e){return is.resolve(null).then(e).catch(as)}:rs;function as(e){setTimeout(function(){throw e})}function ls(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&8===s.nodeType)if("/$"===(n=s.data)){if(0===r)return e.removeChild(s),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=s}while(n);Bt(t)}function cs(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function us(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ds=Math.random().toString(36).slice(2),hs="__reactFiber$"+ds,fs="__reactProps$"+ds,ps="__reactContainer$"+ds,ms="__reactEvents$"+ds,gs="__reactListeners$"+ds,ys="__reactHandles$"+ds;function vs(e){var t=e[hs];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ps]||n[hs]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=us(e);null!==e;){if(n=e[hs])return n;e=us(e)}return t}n=(e=n).parentNode}return null}function bs(e){return!(e=e[hs]||e[ps])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function xs(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(i(33))}function ws(e){return e[fs]||null}var Es=[],Ns=-1;function ks(e){return{current:e}}function Ss(e){0>Ns||(e.current=Es[Ns],Es[Ns]=null,Ns--)}function _s(e,t){Ns++,Es[Ns]=e.current,e.current=t}var Ts={},Cs=ks(Ts),Is=ks(!1),js=Ts;function As(e,t){var n=e.type.contextTypes;if(!n)return Ts;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s,i={};for(s in n)i[s]=t[s];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Rs(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ps(){Ss(Is),Ss(Cs)}function Os(e,t,n){if(Cs.current!==Ts)throw Error(i(168));_s(Cs,t),_s(Is,n)}function Ds(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var s in r=r.getChildContext())if(!(s in t))throw Error(i(108,$(e)||"Unknown",s));return M({},n,r)}function Ls(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ts,js=Cs.current,_s(Cs,e),_s(Is,Is.current),!0}function Ms(e,t,n){var r=e.stateNode;if(!r)throw Error(i(169));n?(e=Ds(e,t,js),r.__reactInternalMemoizedMergedChildContext=e,Ss(Is),Ss(Cs),_s(Cs,e)):Ss(Is),_s(Is,n)}var Us=null,Fs=!1,Vs=!1;function zs(e){null===Us?Us=[e]:Us.push(e)}function Bs(){if(!Vs&&null!==Us){Vs=!0;var e=0,t=bt;try{var n=Us;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Us=null,Fs=!1}catch(s){throw null!==Us&&(Us=Us.slice(e+1)),Ke(Ze,Bs),s}finally{bt=t,Vs=!1}}return null}var $s=[],qs=0,Hs=null,Ws=0,Ks=[],Gs=0,Qs=null,Xs=1,Js="";function Ys(e,t){$s[qs++]=Ws,$s[qs++]=Hs,Hs=e,Ws=t}function Zs(e,t,n){Ks[Gs++]=Xs,Ks[Gs++]=Js,Ks[Gs++]=Qs,Qs=e;var r=Xs;e=Js;var s=32-ot(r)-1;r&=~(1<<s),n+=1;var i=32-ot(t)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Xs=1<<32-ot(t)+s|n<<s|r,Js=i+e}else Xs=1<<i|n<<s|r,Js=e}function ei(e){null!==e.return&&(Ys(e,1),Zs(e,1,0))}function ti(e){for(;e===Hs;)Hs=$s[--qs],$s[qs]=null,Ws=$s[--qs],$s[qs]=null;for(;e===Qs;)Qs=Ks[--Gs],Ks[Gs]=null,Js=Ks[--Gs],Ks[Gs]=null,Xs=Ks[--Gs],Ks[Gs]=null}var ni=null,ri=null,si=!1,ii=null;function oi(e,t){var n=Lc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ai(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ni=e,ri=cs(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ni=e,ri=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Qs?{id:Xs,overflow:Js}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Lc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ni=e,ri=null,!0);default:return!1}}function li(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ci(e){if(si){var t=ri;if(t){var n=t;if(!ai(e,t)){if(li(e))throw Error(i(418));t=cs(n.nextSibling);var r=ni;t&&ai(e,t)?oi(r,n):(e.flags=-4097&e.flags|2,si=!1,ni=e)}}else{if(li(e))throw Error(i(418));e.flags=-4097&e.flags|2,si=!1,ni=e}}}function ui(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ni=e}function di(e){if(e!==ni)return!1;if(!si)return ui(e),si=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ns(e.type,e.memoizedProps)),t&&(t=ri)){if(li(e))throw hi(),Error(i(418));for(;t;)oi(e,t),t=cs(t.nextSibling)}if(ui(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(i(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ri=cs(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ri=null}}else ri=ni?cs(e.stateNode.nextSibling):null;return!0}function hi(){for(var e=ri;e;)e=cs(e.nextSibling)}function fi(){ri=ni=null,si=!1}function pi(e){null===ii?ii=[e]:ii.push(e)}var mi=x.ReactCurrentBatchConfig;function gi(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(i(309));var r=n.stateNode}if(!r)throw Error(i(147,e));var s=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=s.refs;null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(i(284));if(!n._owner)throw Error(i(290,e))}return e}function yi(e,t){throw e=Object.prototype.toString.call(t),Error(i(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vi(e){return(0,e._init)(e._payload)}function bi(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function s(e,t){return(e=Uc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Bc(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===N?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===R&&vi(i)===t.type)?((r=s(t,n.props)).ref=gi(e,t,n),r.return=e,r):((r=Fc(n.type,n.key,n.props,null,e.mode,r)).ref=gi(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=$c(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=Vc(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Bc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Fc(t.type,t.key,t.props,null,e.mode,n)).ref=gi(e,null,t),n.return=e,n;case E:return(t=$c(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||D(t))return(t=Vc(t,e.mode,n,null)).return=e,t;yi(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===s?c(e,t,n,r):null;case E:return n.key===s?u(e,t,n,r):null;case R:return f(e,t,(s=n._init)(n._payload),r)}if(te(n)||D(n))return null!==s?null:d(e,t,n,r,null);yi(e,n)}return null}function p(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case E:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case R:return p(e,t,n,(0,r._init)(r._payload),s)}if(te(r)||D(r))return d(t,e=e.get(n)||null,r,s,null);yi(t,r)}return null}function m(s,i,a,l){for(var c=null,u=null,d=i,m=i=0,g=null;null!==d&&m<a.length;m++){d.index>m?(g=d,d=null):g=d.sibling;var y=f(s,d,a[m],l);if(null===y){null===d&&(d=g);break}e&&d&&null===y.alternate&&t(s,d),i=o(y,i,m),null===u?c=y:u.sibling=y,u=y,d=g}if(m===a.length)return n(s,d),si&&Ys(s,m),c;if(null===d){for(;m<a.length;m++)null!==(d=h(s,a[m],l))&&(i=o(d,i,m),null===u?c=d:u.sibling=d,u=d);return si&&Ys(s,m),c}for(d=r(s,d);m<a.length;m++)null!==(g=p(d,s,m,a[m],l))&&(e&&null!==g.alternate&&d.delete(null===g.key?m:g.key),i=o(g,i,m),null===u?c=g:u.sibling=g,u=g);return e&&d.forEach(function(e){return t(s,e)}),si&&Ys(s,m),c}function g(s,a,l,c){var u=D(l);if("function"!==typeof u)throw Error(i(150));if(null==(l=u.call(l)))throw Error(i(151));for(var d=u=null,m=a,g=a=0,y=null,v=l.next();null!==m&&!v.done;g++,v=l.next()){m.index>g?(y=m,m=null):y=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=y);break}e&&m&&null===b.alternate&&t(s,m),a=o(b,a,g),null===d?u=b:d.sibling=b,d=b,m=y}if(v.done)return n(s,m),si&&Ys(s,g),u;if(null===m){for(;!v.done;g++,v=l.next())null!==(v=h(s,v.value,c))&&(a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return si&&Ys(s,g),u}for(m=r(s,m);!v.done;g++,v=l.next())null!==(v=p(m,s,g,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?g:v.key),a=o(v,a,g),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),si&&Ys(s,g),u}return function e(r,i,o,l){if("object"===typeof o&&null!==o&&o.type===N&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,u=i;null!==u;){if(u.key===c){if((c=o.type)===N){if(7===u.tag){n(r,u.sibling),(i=s(u,o.props.children)).return=r,r=i;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&vi(c)===u.type){n(r,u.sibling),(i=s(u,o.props)).ref=gi(r,u,o),i.return=r,r=i;break e}n(r,u);break}t(r,u),u=u.sibling}o.type===N?((i=Vc(o.props.children,r.mode,l,o.key)).return=r,r=i):((l=Fc(o.type,o.key,o.props,null,r.mode,l)).ref=gi(r,i,o),l.return=r,r=l)}return a(r);case E:e:{for(u=o.key;null!==i;){if(i.key===u){if(4===i.tag&&i.stateNode.containerInfo===o.containerInfo&&i.stateNode.implementation===o.implementation){n(r,i.sibling),(i=s(i,o.children||[])).return=r,r=i;break e}n(r,i);break}t(r,i),i=i.sibling}(i=$c(o,r.mode,l)).return=r,r=i}return a(r);case R:return e(r,i,(u=o._init)(o._payload),l)}if(te(o))return m(r,i,o,l);if(D(o))return g(r,i,o,l);yi(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==i&&6===i.tag?(n(r,i.sibling),(i=s(i,o)).return=r,r=i):(n(r,i),(i=Bc(o,r.mode,l)).return=r,r=i),a(r)):n(r,i)}}var xi=bi(!0),wi=bi(!1),Ei=ks(null),Ni=null,ki=null,Si=null;function _i(){Si=ki=Ni=null}function Ti(e){var t=Ei.current;Ss(Ei),e._currentValue=t}function Ci(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ii(e,t){Ni=e,Si=ki=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(ka=!0),e.firstContext=null)}function ji(e){var t=e._currentValue;if(Si!==e)if(e={context:e,memoizedValue:t,next:null},null===ki){if(null===Ni)throw Error(i(308));ki=e,Ni.dependencies={lanes:0,firstContext:e}}else ki=ki.next=e;return t}var Ai=null;function Pi(e){null===Ai?Ai=[e]:Ai.push(e)}function Oi(e,t,n,r){var s=t.interleaved;return null===s?(n.next=n,Pi(t)):(n.next=s.next,s.next=n),t.interleaved=n,Di(e,r)}function Di(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Mi=!1;function Ui(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Fi(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Vi(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function zi(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Pl)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,Di(e,n)}return null===(s=r.interleaved)?(t.next=t,Pi(r)):(t.next=s.next,s.next=t),r.interleaved=t,Di(e,n)}function Bi(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function $i(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===i?s=i=o:i=i.next=o,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function qi(e,t,n,r){var s=e.updateQueue;Mi=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(null!==a){s.shared.pending=null;var l=a,c=l.next;l.next=null,null===o?i=c:o.next=c,o=l;var u=e.alternate;null!==u&&((a=(u=u.updateQueue).lastBaseUpdate)!==o&&(null===a?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(o=0,u=c=l=null,a=i;;){var h=a.lane,f=a.eventTime;if((r&h)===h){null!==u&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(h=t,f=n,m.tag){case 1:if("function"===typeof(p=m.payload)){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(h="function"===typeof(p=m.payload)?p.call(f,d,h):p)||void 0===h)break e;d=M({},d,h);break e;case 2:Mi=!0}}null!==a.callback&&0!==a.lane&&(e.flags|=64,null===(h=s.effects)?s.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},null===u?(c=u=f,l=d):u=u.next=f,o|=h;if(null===(a=a.next)){if(null===(a=s.shared.pending))break;a=(h=a).next,h.next=null,s.lastBaseUpdate=h,s.shared.pending=null}}if(null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null!==(t=s.shared.interleaved)){s=t;do{o|=s.lane,s=s.next}while(s!==t)}else null===i&&(s.shared.lanes=0);zl|=o,e.lanes=o,e.memoizedState=d}}function Wi(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(null!==s){if(r.callback=null,r=n,"function"!==typeof s)throw Error(i(191,s));s.call(r)}}}var Ki={},Gi=ks(Ki),Xi=ks(Ki),Ji=ks(Ki);function Yi(e){if(e===Ki)throw Error(i(174));return e}function Zi(e,t){switch(_s(Ji,t),_s(Xi,e),_s(Gi,Ki),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ss(Gi),_s(Gi,t)}function eo(){Ss(Gi),Ss(Xi),Ss(Ji)}function to(e){Yi(Ji.current);var t=Yi(Gi.current),n=le(t,e.type);t!==n&&(_s(Xi,e),_s(Gi,n))}function no(e){Xi.current===e&&(Ss(Gi),Ss(Xi))}var ro=ks(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var io=[];function oo(){for(var e=0;e<io.length;e++)io[e]._workInProgressVersionPrimary=null;io.length=0}var ao=x.ReactCurrentDispatcher,lo=x.ReactCurrentBatchConfig,co=0,uo=null,ho=null,fo=null,po=!1,mo=!1,go=0,yo=0;function vo(){throw Error(i(321))}function bo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ar(e[n],t[n]))return!1;return!0}function xo(e,t,n,r,s,o){if(co=o,uo=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ao.current=null===e||null===e.memoizedState?ra:sa,e=n(r,s),mo){o=0;do{if(mo=!1,go=0,25<=o)throw Error(i(301));o+=1,fo=ho=null,t.updateQueue=null,ao.current=ia,e=n(r,s)}while(mo)}if(ao.current=na,t=null!==ho&&null!==ho.next,co=0,fo=ho=uo=null,po=!1,t)throw Error(i(300));return e}function wo(){var e=0!==go;return go=0,e}function Eo(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===fo?uo.memoizedState=fo=e:fo=fo.next=e,fo}function No(){if(null===ho){var e=uo.alternate;e=null!==e?e.memoizedState:null}else e=ho.next;var t=null===fo?uo.memoizedState:fo.next;if(null!==t)fo=t,ho=e;else{if(null===e)throw Error(i(310));e={memoizedState:(ho=e).memoizedState,baseState:ho.baseState,baseQueue:ho.baseQueue,queue:ho.queue,next:null},null===fo?uo.memoizedState=fo=e:fo=fo.next=e}return fo}function ko(e,t){return"function"===typeof t?t(e):t}function So(e){var t=No(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=ho,s=r.baseQueue,o=n.pending;if(null!==o){if(null!==s){var a=s.next;s.next=o.next,o.next=a}r.baseQueue=s=o,n.pending=null}if(null!==s){o=s.next,r=r.baseState;var l=a=null,c=null,u=o;do{var d=u.lane;if((co&d)===d)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:d,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=h,a=r):c=c.next=h,uo.lanes|=d,zl|=d}u=u.next}while(null!==u&&u!==o);null===c?a=r:c.next=l,ar(r,t.memoizedState)||(ka=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){s=e;do{o=s.lane,uo.lanes|=o,zl|=o,s=s.next}while(s!==e)}else null===s&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _o(e){var t=No(),n=t.queue;if(null===n)throw Error(i(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,o=t.memoizedState;if(null!==s){n.pending=null;var a=s=s.next;do{o=e(o,a.action),a=a.next}while(a!==s);ar(o,t.memoizedState)||(ka=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function To(){}function Co(e,t){var n=uo,r=No(),s=t(),o=!ar(r.memoizedState,s);if(o&&(r.memoizedState=s,ka=!0),r=r.queue,Vo(Ao.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==fo&&1&fo.memoizedState.tag){if(n.flags|=2048,Do(9,jo.bind(null,n,r,s,t),void 0,null),null===Ol)throw Error(i(349));0!==(30&co)||Io(n,t,s)}return s}function Io(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function jo(e,t,n,r){t.value=n,t.getSnapshot=r,Ro(t)&&Po(e)}function Ao(e,t,n){return n(function(){Ro(t)&&Po(e)})}function Ro(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ar(e,n)}catch(r){return!0}}function Po(e){var t=Di(e,1);null!==t&&ac(t,e,1,-1)}function Oo(e){var t=Eo();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ko,lastRenderedState:e},t.queue=e,e=e.dispatch=Yo.bind(null,uo,e),[t.memoizedState,e]}function Do(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=uo.updateQueue)?(t={lastEffect:null,stores:null},uo.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Lo(){return No().memoizedState}function Mo(e,t,n,r){var s=Eo();uo.flags|=e,s.memoizedState=Do(1|t,n,void 0,void 0===r?null:r)}function Uo(e,t,n,r){var s=No();r=void 0===r?null:r;var i=void 0;if(null!==ho){var o=ho.memoizedState;if(i=o.destroy,null!==r&&bo(r,o.deps))return void(s.memoizedState=Do(t,n,i,r))}uo.flags|=e,s.memoizedState=Do(1|t,n,i,r)}function Fo(e,t){return Mo(8390656,8,e,t)}function Vo(e,t){return Uo(2048,8,e,t)}function zo(e,t){return Uo(4,2,e,t)}function Bo(e,t){return Uo(4,4,e,t)}function $o(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Uo(4,4,$o.bind(null,t,e),n)}function Ho(){}function Wo(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ko(e,t){var n=No();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&bo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Go(e,t,n){return 0===(21&co)?(e.baseState&&(e.baseState=!1,ka=!0),e.memoizedState=n):(ar(n,t)||(n=mt(),uo.lanes|=n,zl|=n,e.baseState=!0),t)}function Qo(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=lo.transition;lo.transition={};try{e(!1),t()}finally{bt=n,lo.transition=r}}function Xo(){return No().memoizedState}function Jo(e,t,n){var r=oc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Zo(e))ea(t,n);else if(null!==(n=Oi(e,t,n,r))){ac(n,e,r,ic()),ta(n,t,r)}}function Yo(e,t,n){var r=oc(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Zo(e))ea(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var o=t.lastRenderedState,a=i(o,n);if(s.hasEagerState=!0,s.eagerState=a,ar(a,o)){var l=t.interleaved;return null===l?(s.next=s,Pi(t)):(s.next=l.next,l.next=s),void(t.interleaved=s)}}catch(Li){}null!==(n=Oi(e,t,s,r))&&(ac(n,e,r,s=ic()),ta(n,t,r))}}function Zo(e){var t=e.alternate;return e===uo||null!==t&&t===uo}function ea(e,t){mo=po=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function ta(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var na={readContext:ji,useCallback:vo,useContext:vo,useEffect:vo,useImperativeHandle:vo,useInsertionEffect:vo,useLayoutEffect:vo,useMemo:vo,useReducer:vo,useRef:vo,useState:vo,useDebugValue:vo,useDeferredValue:vo,useTransition:vo,useMutableSource:vo,useSyncExternalStore:vo,useId:vo,unstable_isNewReconciler:!1},ra={readContext:ji,useCallback:function(e,t){return Eo().memoizedState=[e,void 0===t?null:t],e},useContext:ji,useEffect:Fo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Mo(4194308,4,$o.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mo(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mo(4,2,e,t)},useMemo:function(e,t){var n=Eo();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Eo();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Jo.bind(null,uo,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Eo().memoizedState=e},useState:Oo,useDebugValue:Ho,useDeferredValue:function(e){return Eo().memoizedState=e},useTransition:function(){var e=Oo(!1),t=e[0];return e=Qo.bind(null,e[1]),Eo().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=uo,s=Eo();if(si){if(void 0===n)throw Error(i(407));n=n()}else{if(n=t(),null===Ol)throw Error(i(349));0!==(30&co)||Io(r,t,n)}s.memoizedState=n;var o={value:n,getSnapshot:t};return s.queue=o,Fo(Ao.bind(null,r,o,e),[e]),r.flags|=2048,Do(9,jo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Eo(),t=Ol.identifierPrefix;if(si){var n=Js;t=":"+t+"R"+(n=(Xs&~(1<<32-ot(Xs)-1)).toString(32)+n),0<(n=go++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=yo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},sa={readContext:ji,useCallback:Wo,useContext:ji,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:zo,useLayoutEffect:Bo,useMemo:Ko,useReducer:So,useRef:Lo,useState:function(){return So(ko)},useDebugValue:Ho,useDeferredValue:function(e){return Go(No(),ho.memoizedState,e)},useTransition:function(){return[So(ko)[0],No().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Xo,unstable_isNewReconciler:!1},ia={readContext:ji,useCallback:Wo,useContext:ji,useEffect:Vo,useImperativeHandle:qo,useInsertionEffect:zo,useLayoutEffect:Bo,useMemo:Ko,useReducer:_o,useRef:Lo,useState:function(){return _o(ko)},useDebugValue:Ho,useDeferredValue:function(e){var t=No();return null===ho?t.memoizedState=e:Go(t,ho.memoizedState,e)},useTransition:function(){return[_o(ko)[0],No().memoizedState]},useMutableSource:To,useSyncExternalStore:Co,useId:Xo,unstable_isNewReconciler:!1};function oa(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function aa(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var la={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ic(),s=oc(e),i=Vi(r,s);i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(ac(t,e,s,r),Bi(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ic(),s=oc(e),i=Vi(r,s);i.tag=1,i.payload=t,void 0!==n&&null!==n&&(i.callback=n),null!==(t=zi(e,i,s))&&(ac(t,e,s,r),Bi(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ic(),r=oc(e),s=Vi(n,r);s.tag=2,void 0!==t&&null!==t&&(s.callback=t),null!==(t=zi(e,s,r))&&(ac(t,e,r,n),Bi(t,e,r))}};function ca(e,t,n,r,s,i,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,o):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(s,i))}function ua(e,t,n){var r=!1,s=Ts,i=t.contextType;return"object"===typeof i&&null!==i?i=ji(i):(s=Rs(t)?js:Cs.current,i=(r=null!==(r=t.contextTypes)&&void 0!==r)?As(e,s):Ts),t=new t(n,i),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=la,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=i),t}function da(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&la.enqueueReplaceState(t,t.state,null)}function ha(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},Ui(e);var i=t.contextType;"object"===typeof i&&null!==i?s.context=ji(i):(i=Rs(t)?js:Cs.current,s.context=As(e,i)),s.state=e.memoizedState,"function"===typeof(i=t.getDerivedStateFromProps)&&(aa(e,t,i,n),s.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof s.getSnapshotBeforeUpdate||"function"!==typeof s.UNSAFE_componentWillMount&&"function"!==typeof s.componentWillMount||(t=s.state,"function"===typeof s.componentWillMount&&s.componentWillMount(),"function"===typeof s.UNSAFE_componentWillMount&&s.UNSAFE_componentWillMount(),t!==s.state&&la.enqueueReplaceState(s,s.state,null),qi(e,n,s,r),s.state=e.memoizedState),"function"===typeof s.componentDidMount&&(e.flags|=4194308)}function fa(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var s=n}catch(i){s="\nError generating stack: "+i.message+"\n"+i.stack}return{value:e,source:t,stack:s,digest:null}}function pa(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function ma(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ga="function"===typeof WeakMap?WeakMap:Map;function ya(e,t,n){(n=Vi(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ql||(Ql=!0,Xl=r),ma(0,t)},n}function va(e,t,n){(n=Vi(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){ma(0,t)}}var i=e.stateNode;return null!==i&&"function"===typeof i.componentDidCatch&&(n.callback=function(){ma(0,t),"function"!==typeof r&&(null===Jl?Jl=new Set([this]):Jl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function xa(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ga;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=jc.bind(null,e,t,n),t.then(e,e))}function wa(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function Ea(e,t,n,r,s){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Vi(-1,1)).tag=2,zi(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=s,e)}var Na=x.ReactCurrentOwner,ka=!1;function Sa(e,t,n,r){t.child=null===e?wi(t,null,n,r):xi(t,e.child,n,r)}function _a(e,t,n,r,s){n=n.render;var i=t.ref;return Ii(t,s),r=xo(e,t,n,r,i,s),n=wo(),null===e||ka?(si&&n&&ei(t),t.flags|=1,Sa(e,t,r,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qa(e,t,s))}function Ta(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Mc(i)||void 0!==i.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Fc(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Ca(e,t,i,r,s))}if(i=e.child,0===(e.lanes&s)){var o=i.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(o,r)&&e.ref===t.ref)return Qa(e,t,s)}return t.flags|=1,(e=Uc(i,r)).ref=t.ref,e.return=t,t.child=e}function Ca(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(lr(i,r)&&e.ref===t.ref){if(ka=!1,t.pendingProps=r=i,0===(e.lanes&s))return t.lanes=e.lanes,Qa(e,t,s);0!==(131072&e.flags)&&(ka=!0)}}return Aa(e,t,n,r,s)}function Ia(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},_s(Ul,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==i?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,_s(Ul,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==i?i.baseLanes:n,_s(Ul,Ml),Ml|=r}else null!==i?(r=i.baseLanes|n,t.memoizedState=null):r=n,_s(Ul,Ml),Ml|=r;return Sa(e,t,s,n),t.child}function ja(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Aa(e,t,n,r,s){var i=Rs(n)?js:Cs.current;return i=As(t,i),Ii(t,s),n=xo(e,t,n,r,i,s),r=wo(),null===e||ka?(si&&r&&ei(t),t.flags|=1,Sa(e,t,n,s),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,Qa(e,t,s))}function Ra(e,t,n,r,s){if(Rs(n)){var i=!0;Ls(t)}else i=!1;if(Ii(t,s),null===t.stateNode)Ga(e,t),ua(t,n,r),ha(t,n,r,s),r=!0;else if(null===e){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=ji(c):c=As(t,c=Rs(n)?js:Cs.current);var u=n.getDerivedStateFromProps,d="function"===typeof u||"function"===typeof o.getSnapshotBeforeUpdate;d||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==r||l!==c)&&da(t,o,r,c),Mi=!1;var h=t.memoizedState;o.state=h,qi(t,r,o,s),l=t.memoizedState,a!==r||h!==l||Is.current||Mi?("function"===typeof u&&(aa(t,n,u,r),l=t.memoizedState),(a=Mi||ca(t,n,a,r,h,l,c))?(d||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),o.props=r,o.state=l,o.context=c,r=a):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Fi(e,t),a=t.memoizedProps,c=t.type===t.elementType?a:oa(t.type,a),o.props=c,d=t.pendingProps,h=o.context,"object"===typeof(l=n.contextType)&&null!==l?l=ji(l):l=As(t,l=Rs(n)?js:Cs.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(a!==d||h!==l)&&da(t,o,r,l),Mi=!1,h=t.memoizedState,o.state=h,qi(t,r,o,s);var p=t.memoizedState;a!==d||h!==p||Is.current||Mi?("function"===typeof f&&(aa(t,n,f,r),p=t.memoizedState),(c=Mi||ca(t,n,c,r,h,p,l)||!1)?(u||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,p,l),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=l,r=c):("function"!==typeof o.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Pa(e,t,n,r,i,s)}function Pa(e,t,n,r,s,i){ja(e,t);var o=0!==(128&t.flags);if(!r&&!o)return s&&Ms(t,n,!1),Qa(e,t,i);r=t.stateNode,Na.current=t;var a=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=xi(t,e.child,null,i),t.child=xi(t,null,a,i)):Sa(e,t,a,i),t.memoizedState=r.state,s&&Ms(t,n,!0),t.child}function Oa(e){var t=e.stateNode;t.pendingContext?Os(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Os(0,t.context,!1),Zi(e,t.containerInfo)}function Da(e,t,n,r,s){return fi(),pi(s),t.flags|=256,Sa(e,t,n,r),t.child}var La,Ma,Ua,Fa,Va={dehydrated:null,treeContext:null,retryLane:0};function za(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ba(e,t,n){var r,s=t.pendingProps,o=ro.current,a=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),_s(ro,1&o),null===e)return ci(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=s.children,e=s.fallback,a?(s=t.mode,a=t.child,l={mode:"hidden",children:l},0===(1&s)&&null!==a?(a.childLanes=0,a.pendingProps=l):a=zc(l,s,0,null),e=Vc(e,s,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=za(n),t.memoizedState=Va,e):$a(t,l));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,s,o,a){if(n)return 256&t.flags?(t.flags&=-257,qa(e,t,a,r=pa(Error(i(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,s=t.mode,r=zc({mode:"visible",children:r.children},s,0,null),(o=Vc(o,s,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&xi(t,e.child,null,a),t.child.memoizedState=za(a),t.memoizedState=Va,o);if(0===(1&t.mode))return qa(e,t,a,null);if("$!"===s.data){if(r=s.nextSibling&&s.nextSibling.dataset)var l=r.dgst;return r=l,qa(e,t,a,r=pa(o=Error(i(419)),r,void 0))}if(l=0!==(a&e.childLanes),ka||l){if(null!==(r=Ol)){switch(a&-a){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}0!==(s=0!==(s&(r.suspendedLanes|a))?0:s)&&s!==o.retryLane&&(o.retryLane=s,Di(e,s),ac(r,e,s,-1))}return xc(),qa(e,t,a,r=pa(Error(i(421))))}return"$?"===s.data?(t.flags|=128,t.child=e.child,t=Rc.bind(null,e),s._reactRetry=t,null):(e=o.treeContext,ri=cs(s.nextSibling),ni=t,si=!0,ii=null,null!==e&&(Ks[Gs++]=Xs,Ks[Gs++]=Js,Ks[Gs++]=Qs,Xs=e.id,Js=e.overflow,Qs=t),t=$a(t,r.children),t.flags|=4096,t)}(e,t,l,s,r,o,n);if(a){a=s.fallback,l=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:s.children};return 0===(1&l)&&t.child!==o?((s=t.child).childLanes=0,s.pendingProps=c,t.deletions=null):(s=Uc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?a=Uc(r,a):(a=Vc(a,l,n,null)).flags|=2,a.return=t,s.return=t,s.sibling=a,t.child=s,s=a,a=t.child,l=null===(l=e.child.memoizedState)?za(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=Va,s}return e=(a=e.child).sibling,s=Uc(a,{mode:"visible",children:s.children}),0===(1&t.mode)&&(s.lanes=n),s.return=t,s.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function $a(e,t){return(t=zc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function qa(e,t,n,r){return null!==r&&pi(r),xi(t,e.child,null,n),(e=$a(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ha(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Ci(e.return,t,n)}function Wa(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Ka(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Sa(e,t,r.children,n),0!==(2&(r=ro.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ha(e,n,t);else if(19===e.tag)Ha(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(_s(ro,r),0===(1&t.mode))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Wa(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===so(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Wa(t,!0,n,null,i);break;case"together":Wa(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ga(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Qa(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),zl|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(i(153));if(null!==t.child){for(n=Uc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Uc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Xa(e,t){if(!si)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ja(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=14680064&s.subtreeFlags,r|=14680064&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ya(e,t,n){var r=t.pendingProps;switch(ti(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ja(t),null;case 1:case 17:return Rs(t.type)&&Ps(),Ja(t),null;case 3:return r=t.stateNode,eo(),Ss(Is),Ss(Cs),oo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(di(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ii&&(dc(ii),ii=null))),Ma(e,t),Ja(t),null;case 5:no(t);var s=Yi(Ji.current);if(n=t.type,null!==e&&null!=t.stateNode)Ua(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(i(166));return Ja(t),null}if(e=Yi(Gi.current),di(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hs]=t,r[fs]=o,e=0!==(1&t.mode),n){case"dialog":Fr("cancel",r),Fr("close",r);break;case"iframe":case"object":case"embed":Fr("load",r);break;case"video":case"audio":for(s=0;s<Dr.length;s++)Fr(Dr[s],r);break;case"source":Fr("error",r);break;case"img":case"image":case"link":Fr("error",r),Fr("load",r);break;case"details":Fr("toggle",r);break;case"input":X(r,o),Fr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fr("invalid",r);break;case"textarea":se(r,o),Fr("invalid",r)}for(var l in ve(n,o),s=null,o)if(o.hasOwnProperty(l)){var c=o[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,c,e),s=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Yr(r.textContent,c,e),s=["children",""+c]):a.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Fr("scroll",r)}switch(n){case"input":W(r),Z(r,o,!0);break;case"textarea":W(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=s,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===s.nodeType?s:s.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ae(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hs]=t,e[fs]=r,La(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Fr("cancel",e),Fr("close",e),s=r;break;case"iframe":case"object":case"embed":Fr("load",e),s=r;break;case"video":case"audio":for(s=0;s<Dr.length;s++)Fr(Dr[s],e);s=r;break;case"source":Fr("error",e),s=r;break;case"img":case"image":case"link":Fr("error",e),Fr("load",e),s=r;break;case"details":Fr("toggle",e),s=r;break;case"input":X(e,r),s=Q(e,r),Fr("invalid",e);break;case"option":default:s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=M({},r,{value:void 0}),Fr("invalid",e);break;case"textarea":se(e,r),s=re(e,r),Fr("invalid",e)}for(o in ve(n,s),c=s)if(c.hasOwnProperty(o)){var u=c[o];"style"===o?ge(e,u):"dangerouslySetInnerHTML"===o?null!=(u=u?u.__html:void 0)&&de(e,u):"children"===o?"string"===typeof u?("textarea"!==n||""!==u)&&he(e,u):"number"===typeof u&&he(e,""+u):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=u&&"onScroll"===o&&Fr("scroll",e):null!=u&&b(e,o,u,l))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof s.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ja(t),null;case 6:if(e&&null!=t.stateNode)Fa(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(i(166));if(n=Yi(Ji.current),Yi(Gi.current),di(t)){if(r=t.stateNode,n=t.memoizedProps,r[hs]=t,(o=r.nodeValue!==n)&&null!==(e=ni))switch(e.tag){case 3:Yr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Yr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hs]=t,t.stateNode=r}return Ja(t),null;case 13:if(Ss(ro),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(si&&null!==ri&&0!==(1&t.mode)&&0===(128&t.flags))hi(),fi(),t.flags|=98560,o=!1;else if(o=di(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(i(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(i(317));o[hs]=t}else fi(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ja(t),o=!1}else null!==ii&&(dc(ii),ii=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ro.current)?0===Fl&&(Fl=3):xc())),null!==t.updateQueue&&(t.flags|=4),Ja(t),null);case 4:return eo(),Ma(e,t),null===e&&Br(t.stateNode.containerInfo),Ja(t),null;case 10:return Ti(t.type._context),Ja(t),null;case 19:if(Ss(ro),null===(o=t.memoizedState))return Ja(t),null;if(r=0!==(128&t.flags),null===(l=o.rendering))if(r)Xa(o,!1);else{if(0!==Fl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=so(e))){for(t.flags|=128,Xa(o,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(l=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=l.childLanes,o.lanes=l.lanes,o.child=l.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=l.memoizedProps,o.memoizedState=l.memoizedState,o.updateQueue=l.updateQueue,o.type=l.type,e=l.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return _s(ro,1&ro.current|2),t.child}e=e.sibling}null!==o.tail&&Je()>Kl&&(t.flags|=128,r=!0,Xa(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Xa(o,!0),null===o.tail&&"hidden"===o.tailMode&&!l.alternate&&!si)return Ja(t),null}else 2*Je()-o.renderingStartTime>Kl&&1073741824!==n&&(t.flags|=128,r=!0,Xa(o,!1),t.lanes=4194304);o.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=o.last)?n.sibling=l:t.child=l,o.last=l)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Je(),t.sibling=null,n=ro.current,_s(ro,r?1&n|2:1&n),t):(Ja(t),null);case 22:case 23:return gc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Ja(t),6&t.subtreeFlags&&(t.flags|=8192)):Ja(t),null;case 24:case 25:return null}throw Error(i(156,t.tag))}function Za(e,t){switch(ti(t),t.tag){case 1:return Rs(t.type)&&Ps(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return eo(),Ss(Is),Ss(Cs),oo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return no(t),null;case 13:if(Ss(ro),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(i(340));fi()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ss(ro),null;case 4:return eo(),null;case 10:return Ti(t.type._context),null;case 22:case 23:return gc(),null;default:return null}}La=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ma=function(){},Ua=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,Yi(Gi.current);var i,o=null;switch(n){case"input":s=Q(e,s),r=Q(e,r),o=[];break;case"select":s=M({},s,{value:void 0}),r=M({},r,{value:void 0}),o=[];break;case"textarea":s=re(e,s),r=re(e,r),o=[];break;default:"function"!==typeof s.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(u in ve(n,r),n=null,s)if(!r.hasOwnProperty(u)&&s.hasOwnProperty(u)&&null!=s[u])if("style"===u){var l=s[u];for(i in l)l.hasOwnProperty(i)&&(n||(n={}),n[i]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(a.hasOwnProperty(u)?o||(o=[]):(o=o||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=s?s[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(i in l)!l.hasOwnProperty(i)||c&&c.hasOwnProperty(i)||(n||(n={}),n[i]="");for(i in c)c.hasOwnProperty(i)&&l[i]!==c[i]&&(n||(n={}),n[i]=c[i])}else n||(o||(o=[]),o.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(o=o||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(a.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Fr("scroll",e),o||l===c||(o=[])):(o=o||[]).push(u,c))}n&&(o=o||[]).push("style",n);var u=o;(t.updateQueue=u)&&(t.flags|=4)}},Fa=function(e,t,n,r){n!==r&&(t.flags|=4)};var el=!1,tl=!1,nl="function"===typeof WeakSet?WeakSet:Set,rl=null;function sl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Ic(e,t,r)}else n.current=null}function il(e,t,n){try{n()}catch(r){Ic(e,t,r)}}var ol=!1;function al(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var s=r=r.next;do{if((s.tag&e)===e){var i=s.destroy;s.destroy=void 0,void 0!==i&&il(t,n,i)}s=s.next}while(s!==r)}}function ll(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function cl(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function ul(e){var t=e.alternate;null!==t&&(e.alternate=null,ul(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hs],delete t[fs],delete t[ms],delete t[gs],delete t[ys])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dl(e){return 5===e.tag||3===e.tag||4===e.tag}function hl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||dl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function fl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(fl(e,t,n),e=e.sibling;null!==e;)fl(e,t,n),e=e.sibling}function pl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(pl(e,t,n),e=e.sibling;null!==e;)pl(e,t,n),e=e.sibling}var ml=null,gl=!1;function yl(e,t,n){for(n=n.child;null!==n;)vl(e,t,n),n=n.sibling}function vl(e,t,n){if(it&&"function"===typeof it.onCommitFiberUnmount)try{it.onCommitFiberUnmount(st,n)}catch(a){}switch(n.tag){case 5:tl||sl(n,t);case 6:var r=ml,s=gl;ml=null,yl(e,t,n),gl=s,null!==(ml=r)&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ml.removeChild(n.stateNode));break;case 18:null!==ml&&(gl?(e=ml,n=n.stateNode,8===e.nodeType?ls(e.parentNode,n):1===e.nodeType&&ls(e,n),Bt(e)):ls(ml,n.stateNode));break;case 4:r=ml,s=gl,ml=n.stateNode.containerInfo,gl=!0,yl(e,t,n),ml=r,gl=s;break;case 0:case 11:case 14:case 15:if(!tl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,void 0!==o&&(0!==(2&i)||0!==(4&i))&&il(n,t,o),s=s.next}while(s!==r)}yl(e,t,n);break;case 1:if(!tl&&(sl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Ic(n,t,a)}yl(e,t,n);break;case 21:yl(e,t,n);break;case 22:1&n.mode?(tl=(r=tl)||null!==n.memoizedState,yl(e,t,n),tl=r):yl(e,t,n);break;default:yl(e,t,n)}}function bl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new nl),t.forEach(function(t){var r=Pc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function xl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r];try{var o=e,a=t,l=a;e:for(;null!==l;){switch(l.tag){case 5:ml=l.stateNode,gl=!1;break e;case 3:case 4:ml=l.stateNode.containerInfo,gl=!0;break e}l=l.return}if(null===ml)throw Error(i(160));vl(o,a,s),ml=null,gl=!1;var c=s.alternate;null!==c&&(c.return=null),s.return=null}catch(Li){Ic(s,t,Li)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)wl(t,e),t=t.sibling}function wl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xl(t,e),El(e),4&r){try{al(3,e,e.return),ll(3,e)}catch(g){Ic(e,e.return,g)}try{al(5,e,e.return)}catch(g){Ic(e,e.return,g)}}break;case 1:xl(t,e),El(e),512&r&&null!==n&&sl(n,n.return);break;case 5:if(xl(t,e),El(e),512&r&&null!==n&&sl(n,n.return),32&e.flags){var s=e.stateNode;try{he(s,"")}catch(g){Ic(e,e.return,g)}}if(4&r&&null!=(s=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===o.type&&null!=o.name&&J(s,o),be(l,a);var u=be(l,o);for(a=0;a<c.length;a+=2){var d=c[a],h=c[a+1];"style"===d?ge(s,h):"dangerouslySetInnerHTML"===d?de(s,h):"children"===d?he(s,h):b(s,d,h,u)}switch(l){case"input":Y(s,o);break;case"textarea":ie(s,o);break;case"select":var f=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?ne(s,!!o.multiple,p,!1):f!==!!o.multiple&&(null!=o.defaultValue?ne(s,!!o.multiple,o.defaultValue,!0):ne(s,!!o.multiple,o.multiple?[]:"",!1))}s[fs]=o}catch(g){Ic(e,e.return,g)}}break;case 6:if(xl(t,e),El(e),4&r){if(null===e.stateNode)throw Error(i(162));s=e.stateNode,o=e.memoizedProps;try{s.nodeValue=o}catch(g){Ic(e,e.return,g)}}break;case 3:if(xl(t,e),El(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(g){Ic(e,e.return,g)}break;case 4:default:xl(t,e),El(e);break;case 13:xl(t,e),El(e),8192&(s=e.child).flags&&(o=null!==s.memoizedState,s.stateNode.isHidden=o,!o||null!==s.alternate&&null!==s.alternate.memoizedState||(Wl=Je())),4&r&&bl(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(tl=(u=tl)||d,xl(t,e),tl=u):xl(t,e),El(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!d&&0!==(1&e.mode))for(rl=e,d=e.child;null!==d;){for(h=rl=d;null!==rl;){switch(p=(f=rl).child,f.tag){case 0:case 11:case 14:case 15:al(4,f,f.return);break;case 1:sl(f,f.return);var m=f.stateNode;if("function"===typeof m.componentWillUnmount){r=f,n=f.return;try{t=r,m.props=t.memoizedProps,m.state=t.memoizedState,m.componentWillUnmount()}catch(g){Ic(r,n,g)}}break;case 5:sl(f,f.return);break;case 22:if(null!==f.memoizedState){_l(h);continue}}null!==p?(p.return=f,rl=p):_l(h)}d=d.sibling}e:for(d=null,h=e;;){if(5===h.tag){if(null===d){d=h;try{s=h.stateNode,u?"function"===typeof(o=s.style).setProperty?o.setProperty("display","none","important"):o.display="none":(l=h.stateNode,a=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=me("display",a))}catch(g){Ic(e,e.return,g)}}}else if(6===h.tag){if(null===d)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Ic(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;d===h&&(d=null),h=h.return}d===h&&(d=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:xl(t,e),El(e),4&r&&bl(e);case 21:}}function El(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(dl(n)){var r=n;break e}n=n.return}throw Error(i(160))}switch(r.tag){case 5:var s=r.stateNode;32&r.flags&&(he(s,""),r.flags&=-33),pl(e,hl(e),s);break;case 3:case 4:var o=r.stateNode.containerInfo;fl(e,hl(e),o);break;default:throw Error(i(161))}}catch(Ri){Ic(e,e.return,Ri)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Nl(e,t,n){rl=e,kl(e,t,n)}function kl(e,t,n){for(var r=0!==(1&e.mode);null!==rl;){var s=rl,i=s.child;if(22===s.tag&&r){var o=null!==s.memoizedState||el;if(!o){var a=s.alternate,l=null!==a&&null!==a.memoizedState||tl;a=el;var c=tl;if(el=o,(tl=l)&&!c)for(rl=s;null!==rl;)l=(o=rl).child,22===o.tag&&null!==o.memoizedState?Tl(s):null!==l?(l.return=o,rl=l):Tl(s);for(;null!==i;)rl=i,kl(i,t,n),i=i.sibling;rl=s,el=a,tl=c}Sl(e)}else 0!==(8772&s.subtreeFlags)&&null!==i?(i.return=s,rl=i):Sl(e)}}function Sl(e){for(;null!==rl;){var t=rl;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:tl||ll(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!tl)if(null===n)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:oa(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Wi(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Wi(t,a,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var d=u.memoizedState;if(null!==d){var h=d.dehydrated;null!==h&&Bt(h)}}}break;default:throw Error(i(163))}tl||512&t.flags&&cl(t)}catch(Hi){Ic(t,t.return,Hi)}}if(t===e){rl=null;break}if(null!==(n=t.sibling)){n.return=t.return,rl=n;break}rl=t.return}}function _l(e){for(;null!==rl;){var t=rl;if(t===e){rl=null;break}var n=t.sibling;if(null!==n){n.return=t.return,rl=n;break}rl=t.return}}function Tl(e){for(;null!==rl;){var t=rl;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{ll(4,t)}catch(Ri){Ic(t,n,Ri)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var s=t.return;try{r.componentDidMount()}catch(Ri){Ic(t,s,Ri)}}var i=t.return;try{cl(t)}catch(Ri){Ic(t,i,Ri)}break;case 5:var o=t.return;try{cl(t)}catch(Ri){Ic(t,o,Ri)}}}catch(Ri){Ic(t,t.return,Ri)}if(t===e){rl=null;break}var a=t.sibling;if(null!==a){a.return=t.return,rl=a;break}rl=t.return}}var Cl,Il=Math.ceil,jl=x.ReactCurrentDispatcher,Al=x.ReactCurrentOwner,Rl=x.ReactCurrentBatchConfig,Pl=0,Ol=null,Dl=null,Ll=0,Ml=0,Ul=ks(0),Fl=0,Vl=null,zl=0,Bl=0,$l=0,ql=null,Hl=null,Wl=0,Kl=1/0,Gl=null,Ql=!1,Xl=null,Jl=null,Yl=!1,Zl=null,ec=0,tc=0,nc=null,rc=-1,sc=0;function ic(){return 0!==(6&Pl)?Je():-1!==rc?rc:rc=Je()}function oc(e){return 0===(1&e.mode)?1:0!==(2&Pl)&&0!==Ll?Ll&-Ll:null!==mi.transition?(0===sc&&(sc=mt()),sc):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function ac(e,t,n,r){if(50<tc)throw tc=0,nc=null,Error(i(185));yt(e,n,r),0!==(2&Pl)&&e===Ol||(e===Ol&&(0===(2&Pl)&&(Bl|=n),4===Fl&&hc(e,Ll)),lc(e,r),1===n&&0===Pl&&0===(1&t.mode)&&(Kl=Je()+500,Fs&&Bs()))}function lc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-ot(i),a=1<<o,l=s[o];-1===l?0!==(a&n)&&0===(a&r)||(s[o]=ft(a,t)):l<=t&&(e.expiredLanes|=a),i&=~a}}(e,t);var r=ht(e,e===Ol?Ll:0);if(0===r)null!==n&&Ge(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ge(n),1===t)0===e.tag?function(e){Fs=!0,zs(e)}(fc.bind(null,e)):zs(fc.bind(null,e)),os(function(){0===(6&Pl)&&Bs()}),n=null;else{switch(xt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Oc(n,cc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function cc(e,t){if(rc=-1,sc=0,0!==(6&Pl))throw Error(i(327));var n=e.callbackNode;if(Tc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ol?Ll:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=wc(e,r);else{t=r;var s=Pl;Pl|=2;var o=bc();for(Ol===e&&Ll===t||(Gl=null,Kl=Je()+500,yc(e,t));;)try{Nc();break}catch(l){vc(e,l)}_i(),jl.current=o,Pl=s,null!==Dl?t=0:(Ol=null,Ll=0,t=Fl)}if(0!==t){if(2===t&&(0!==(s=pt(e))&&(r=s,t=uc(e,s))),1===t)throw n=Vl,yc(e,0),hc(e,r),lc(e,Je()),n;if(6===t)hc(e,r);else{if(s=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ar(i(),s))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(s)&&(2===(t=wc(e,r))&&(0!==(o=pt(e))&&(r=o,t=uc(e,o))),1===t))throw n=Vl,yc(e,0),hc(e,r),lc(e,Je()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(i(345));case 2:case 5:_c(e,Hl,Gl);break;case 3:if(hc(e,r),(130023424&r)===r&&10<(t=Wl+500-Je())){if(0!==ht(e,0))break;if(((s=e.suspendedLanes)&r)!==r){ic(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=rs(_c.bind(null,e,Hl,Gl),t);break}_c(e,Hl,Gl);break;case 4:if(hc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,s=-1;0<r;){var a=31-ot(r);o=1<<a,(a=t[a])>s&&(s=a),r&=~o}if(r=s,10<(r=(120>(r=Je()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Il(r/1960))-r)){e.timeoutHandle=rs(_c.bind(null,e,Hl,Gl),r);break}_c(e,Hl,Gl);break;default:throw Error(i(329))}}}return lc(e,Je()),e.callbackNode===n?cc.bind(null,e):null}function uc(e,t){var n=ql;return e.current.memoizedState.isDehydrated&&(yc(e,t).flags|=256),2!==(e=wc(e,t))&&(t=Hl,Hl=n,null!==t&&dc(t)),e}function dc(e){null===Hl?Hl=e:Hl.push.apply(Hl,e)}function hc(e,t){for(t&=~$l,t&=~Bl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function fc(e){if(0!==(6&Pl))throw Error(i(327));Tc();var t=ht(e,0);if(0===(1&t))return lc(e,Je()),null;var n=wc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=uc(e,r))}if(1===n)throw n=Vl,yc(e,0),hc(e,t),lc(e,Je()),n;if(6===n)throw Error(i(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,Hl,Gl),lc(e,Je()),null}function pc(e,t){var n=Pl;Pl|=1;try{return e(t)}finally{0===(Pl=n)&&(Kl=Je()+500,Fs&&Bs())}}function mc(e){null!==Zl&&0===Zl.tag&&0===(6&Pl)&&Tc();var t=Pl;Pl|=1;var n=Rl.transition,r=bt;try{if(Rl.transition=null,bt=1,e)return e()}finally{bt=r,Rl.transition=n,0===(6&(Pl=t))&&Bs()}}function gc(){Ml=Ul.current,Ss(Ul)}function yc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ss(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ti(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ps();break;case 3:eo(),Ss(Is),Ss(Cs),oo();break;case 5:no(r);break;case 4:eo();break;case 13:case 19:Ss(ro);break;case 10:Ti(r.type._context);break;case 22:case 23:gc()}n=n.return}if(Ol=e,Dl=e=Uc(e.current,null),Ll=Ml=t,Fl=0,Vl=null,$l=Bl=zl=0,Hl=ql=null,null!==Ai){for(t=0;t<Ai.length;t++)if(null!==(r=(n=Ai[t]).interleaved)){n.interleaved=null;var s=r.next,i=n.pending;if(null!==i){var o=i.next;i.next=s,r.next=o}n.pending=r}Ai=null}return e}function vc(e,t){for(;;){var n=Dl;try{if(_i(),ao.current=na,po){for(var r=uo.memoizedState;null!==r;){var s=r.queue;null!==s&&(s.pending=null),r=r.next}po=!1}if(co=0,fo=ho=uo=null,mo=!1,go=0,Al.current=null,null===n||null===n.return){Fl=1,Vl=t,Dl=null;break}e:{var o=e,a=n.return,l=n,c=t;if(t=Ll,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,d=l,h=d.tag;if(0===(1&d.mode)&&(0===h||11===h||15===h)){var f=d.alternate;f?(d.updateQueue=f.updateQueue,d.memoizedState=f.memoizedState,d.lanes=f.lanes):(d.updateQueue=null,d.memoizedState=null)}var p=wa(a);if(null!==p){p.flags&=-257,Ea(p,a,l,0,t),1&p.mode&&xa(o,u,t),c=u;var m=(t=p).updateQueue;if(null===m){var g=new Set;g.add(c),t.updateQueue=g}else m.add(c);break e}if(0===(1&t)){xa(o,u,t),xc();break e}c=Error(i(426))}else if(si&&1&l.mode){var y=wa(a);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),Ea(y,a,l,0,t),pi(fa(c,l));break e}}o=c=fa(c,l),4!==Fl&&(Fl=2),null===ql?ql=[o]:ql.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,$i(o,ya(0,c,t));break e;case 1:l=c;var v=o.type,b=o.stateNode;if(0===(128&o.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Jl||!Jl.has(b)))){o.flags|=65536,t&=-t,o.lanes|=t,$i(o,va(o,l,t));break e}}o=o.return}while(null!==o)}Sc(n)}catch(Qi){t=Qi,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function bc(){var e=jl.current;return jl.current=na,null===e?na:e}function xc(){0!==Fl&&3!==Fl&&2!==Fl||(Fl=4),null===Ol||0===(268435455&zl)&&0===(268435455&Bl)||hc(Ol,Ll)}function wc(e,t){var n=Pl;Pl|=2;var r=bc();for(Ol===e&&Ll===t||(Gl=null,yc(e,t));;)try{Ec();break}catch(s){vc(e,s)}if(_i(),Pl=n,jl.current=r,null!==Dl)throw Error(i(261));return Ol=null,Ll=0,Fl}function Ec(){for(;null!==Dl;)kc(Dl)}function Nc(){for(;null!==Dl&&!Qe();)kc(Dl)}function kc(e){var t=Cl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?Sc(e):Dl=t,Al.current=null}function Sc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ya(n,t,Ml)))return void(Dl=n)}else{if(null!==(n=Za(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Fl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Fl&&(Fl=5)}function _c(e,t,n){var r=bt,s=Rl.transition;try{Rl.transition=null,bt=1,function(e,t,n,r){do{Tc()}while(null!==Zl);if(0!==(6&Pl))throw Error(i(327));n=e.finishedWork;var s=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(i(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-ot(n),i=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~i}}(e,o),e===Ol&&(Dl=Ol=null,Ll=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Yl||(Yl=!0,Oc(tt,function(){return Tc(),null})),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Rl.transition,Rl.transition=null;var a=bt;bt=1;var l=Pl;Pl|=4,Al.current=null,function(e,t){if(es=qt,fr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(ba){n=null;break e}var a=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var p;h!==n||0!==s&&3!==h.nodeType||(l=a+s),h!==o||0!==r&&3!==h.nodeType||(c=a+r),3===h.nodeType&&(a+=h.nodeValue.length),null!==(p=h.firstChild);)f=h,h=p;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=a),f===o&&++d===r&&(c=a),null!==(p=h.nextSibling))break;f=(h=f).parentNode}h=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ts={focusedElem:e,selectionRange:n},qt=!1,rl=t;null!==rl;)if(e=(t=rl).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,rl=e;else for(;null!==rl;){t=rl;try{var m=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==m){var g=m.memoizedProps,y=m.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?g:oa(t.type,g),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var x=t.stateNode.containerInfo;1===x.nodeType?x.textContent="":9===x.nodeType&&x.documentElement&&x.removeChild(x.documentElement);break;default:throw Error(i(163))}}catch(ba){Ic(t,t.return,ba)}if(null!==(e=t.sibling)){e.return=t.return,rl=e;break}rl=t.return}m=ol,ol=!1}(e,n),wl(n,e),pr(ts),qt=!!es,ts=es=null,e.current=n,Nl(n,e,s),Xe(),Pl=l,bt=a,Rl.transition=o}else e.current=n;if(Yl&&(Yl=!1,Zl=e,ec=s),o=e.pendingLanes,0===o&&(Jl=null),function(e){if(it&&"function"===typeof it.onCommitFiberRoot)try{it.onCommitFiberRoot(st,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),lc(e,Je()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Ql)throw Ql=!1,e=Xl,Xl=null,e;0!==(1&ec)&&0!==e.tag&&Tc(),o=e.pendingLanes,0!==(1&o)?e===nc?tc++:(tc=0,nc=e):tc=0,Bs()}(e,t,n,r)}finally{Rl.transition=s,bt=r}return null}function Tc(){if(null!==Zl){var e=xt(ec),t=Rl.transition,n=bt;try{if(Rl.transition=null,bt=16>e?16:e,null===Zl)var r=!1;else{if(e=Zl,Zl=null,ec=0,0!==(6&Pl))throw Error(i(331));var s=Pl;for(Pl|=4,rl=e.current;null!==rl;){var o=rl,a=o.child;if(0!==(16&rl.flags)){var l=o.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(rl=u;null!==rl;){var d=rl;switch(d.tag){case 0:case 11:case 15:al(8,d,o)}var h=d.child;if(null!==h)h.return=d,rl=h;else for(;null!==rl;){var f=(d=rl).sibling,p=d.return;if(ul(d),d===u){rl=null;break}if(null!==f){f.return=p,rl=f;break}rl=p}}}var m=o.alternate;if(null!==m){var g=m.child;if(null!==g){m.child=null;do{var y=g.sibling;g.sibling=null,g=y}while(null!==g)}}rl=o}}if(0!==(2064&o.subtreeFlags)&&null!==a)a.return=o,rl=a;else e:for(;null!==rl;){if(0!==(2048&(o=rl).flags))switch(o.tag){case 0:case 11:case 15:al(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,rl=v;break e}rl=o.return}}var b=e.current;for(rl=b;null!==rl;){var x=(a=rl).child;if(0!==(2064&a.subtreeFlags)&&null!==x)x.return=a,rl=x;else e:for(a=b;null!==rl;){if(0!==(2048&(l=rl).flags))try{switch(l.tag){case 0:case 11:case 15:ll(9,l)}}catch(Qi){Ic(l,l.return,Qi)}if(l===a){rl=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,rl=w;break e}rl=l.return}}if(Pl=s,Bs(),it&&"function"===typeof it.onPostCommitFiberRoot)try{it.onPostCommitFiberRoot(st,e)}catch(Qi){}r=!0}return r}finally{bt=n,Rl.transition=t}}return!1}function Cc(e,t,n){e=zi(e,t=ya(0,t=fa(n,t),1),1),t=ic(),null!==e&&(yt(e,1,t),lc(e,t))}function Ic(e,t,n){if(3===e.tag)Cc(e,e,n);else for(;null!==t;){if(3===t.tag){Cc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Jl||!Jl.has(r))){t=zi(t,e=va(t,e=fa(n,e),1),1),e=ic(),null!==t&&(yt(t,1,e),lc(t,e));break}}t=t.return}}function jc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ic(),e.pingedLanes|=e.suspendedLanes&n,Ol===e&&(Ll&n)===n&&(4===Fl||3===Fl&&(130023424&Ll)===Ll&&500>Je()-Wl?yc(e,0):$l|=n),lc(e,t)}function Ac(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ic();null!==(e=Di(e,t))&&(yt(e,t,n),lc(e,n))}function Rc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ac(e,n)}function Pc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(i(314))}null!==r&&r.delete(t),Ac(e,n)}function Oc(e,t){return Ke(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lc(e,t,n,r){return new Dc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Uc(e,t){var n=e.alternate;return null===n?((n=Lc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Fc(e,t,n,r,s,o){var a=2;if(r=e,"function"===typeof e)Mc(e)&&(a=1);else if("string"===typeof e)a=5;else e:switch(e){case N:return Vc(n.children,s,o,t);case k:a=8,s|=8;break;case S:return(e=Lc(12,n,t,2|s)).elementType=S,e.lanes=o,e;case I:return(e=Lc(13,n,t,s)).elementType=I,e.lanes=o,e;case j:return(e=Lc(19,n,t,s)).elementType=j,e.lanes=o,e;case P:return zc(n,s,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case _:a=10;break e;case T:a=9;break e;case C:a=11;break e;case A:a=14;break e;case R:a=16,r=null;break e}throw Error(i(130,null==e?e:typeof e,""))}return(t=Lc(a,n,t,s)).elementType=e,t.type=r,t.lanes=o,t}function Vc(e,t,n,r){return(e=Lc(7,e,r,t)).lanes=n,e}function zc(e,t,n,r){return(e=Lc(22,e,r,t)).elementType=P,e.lanes=n,e.stateNode={isHidden:!1},e}function Bc(e,t,n){return(e=Lc(6,e,null,t)).lanes=n,e}function $c(e,t,n){return(t=Lc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function qc(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Hc(e,t,n,r,s,i,o,a,l){return e=new qc(e,t,n,a,l),1===t?(t=1,!0===i&&(t|=8)):t=0,i=Lc(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ui(i),e}function Wc(e){if(!e)return Ts;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(i(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Rs(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(i(171))}if(1===e.tag){var n=e.type;if(Rs(n))return Ds(e,n,t)}return t}function Kc(e,t,n,r,s,i,o,a,l){return(e=Hc(n,r,!0,e,0,i,0,a,l)).context=Wc(null),n=e.current,(i=Vi(r=ic(),s=oc(n))).callback=void 0!==t&&null!==t?t:null,zi(n,i,s),e.current.lanes=s,yt(e,s,r),lc(e,r),e}function Gc(e,t,n,r){var s=t.current,i=ic(),o=oc(s);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Vi(i,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=zi(s,t,o))&&(ac(e,s,o,i),Bi(e,s,o)),o}function Qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Xc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Jc(e,t){Xc(e,t),(e=e.alternate)&&Xc(e,t)}Cl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Is.current)ka=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return ka=!1,function(e,t,n){switch(t.tag){case 3:Oa(t),fi();break;case 5:to(t);break;case 1:Rs(t.type)&&Ls(t);break;case 4:Zi(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;_s(Ei,r._currentValue),r._currentValue=s;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(_s(ro,1&ro.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ba(e,t,n):(_s(ro,1&ro.current),null!==(e=Qa(e,t,n))?e.sibling:null);_s(ro,1&ro.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Ka(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),_s(ro,ro.current),r)break;return null;case 22:case 23:return t.lanes=0,Ia(e,t,n)}return Qa(e,t,n)}(e,t,n);ka=0!==(131072&e.flags)}else ka=!1,si&&0!==(1048576&t.flags)&&Zs(t,Ws,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ga(e,t),e=t.pendingProps;var s=As(t,Cs.current);Ii(t,n),s=xo(null,t,r,e,s,n);var o=wo();return t.flags|=1,"object"===typeof s&&null!==s&&"function"===typeof s.render&&void 0===s.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Rs(r)?(o=!0,Ls(t)):o=!1,t.memoizedState=null!==s.state&&void 0!==s.state?s.state:null,Ui(t),s.updater=la,t.stateNode=s,s._reactInternals=t,ha(t,r,e,n),t=Pa(null,t,r,!0,o,n)):(t.tag=0,si&&o&&ei(t),Sa(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ga(e,t),e=t.pendingProps,r=(s=r._init)(r._payload),t.type=r,s=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=oa(r,e),s){case 0:t=Aa(null,t,r,e,n);break e;case 1:t=Ra(null,t,r,e,n);break e;case 11:t=_a(null,t,r,e,n);break e;case 14:t=Ta(null,t,r,oa(r.type,e),n);break e}throw Error(i(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,Aa(e,t,r,s=t.elementType===r?s:oa(r,s),n);case 1:return r=t.type,s=t.pendingProps,Ra(e,t,r,s=t.elementType===r?s:oa(r,s),n);case 3:e:{if(Oa(t),null===e)throw Error(i(387));r=t.pendingProps,s=(o=t.memoizedState).element,Fi(e,t),qi(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Da(e,t,r,n,s=fa(Error(i(423)),t));break e}if(r!==s){t=Da(e,t,r,n,s=fa(Error(i(424)),t));break e}for(ri=cs(t.stateNode.containerInfo.firstChild),ni=t,si=!0,ii=null,n=wi(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fi(),r===s){t=Qa(e,t,n);break e}Sa(e,t,r,n)}t=t.child}return t;case 5:return to(t),null===e&&ci(t),r=t.type,s=t.pendingProps,o=null!==e?e.memoizedProps:null,a=s.children,ns(r,s)?a=null:null!==o&&ns(r,o)&&(t.flags|=32),ja(e,t),Sa(e,t,a,n),t.child;case 6:return null===e&&ci(t),null;case 13:return Ba(e,t,n);case 4:return Zi(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=xi(t,null,r,n):Sa(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,_a(e,t,r,s=t.elementType===r?s:oa(r,s),n);case 7:return Sa(e,t,t.pendingProps,n),t.child;case 8:case 12:return Sa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,o=t.memoizedProps,a=s.value,_s(Ei,r._currentValue),r._currentValue=a,null!==o)if(ar(o.value,a)){if(o.children===s.children&&!Is.current){t=Qa(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var l=o.dependencies;if(null!==l){a=o.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Vi(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var d=(u=u.shared).pending;null===d?c.next=c:(c.next=d.next,d.next=c),u.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),Ci(o.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(i(341));a.lanes|=n,null!==(l=a.alternate)&&(l.lanes|=n),Ci(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}Sa(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Ii(t,n),r=r(s=ji(s)),t.flags|=1,Sa(e,t,r,n),t.child;case 14:return s=oa(r=t.type,t.pendingProps),Ta(e,t,r,s=oa(r.type,s),n);case 15:return Ca(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:oa(r,s),Ga(e,t),t.tag=1,Rs(r)?(e=!0,Ls(t)):e=!1,Ii(t,n),ua(t,r,s),ha(t,r,s,n),Pa(null,t,r,!0,e,n);case 19:return Ka(e,t,n);case 22:return Ia(e,t,n)}throw Error(i(156,t.tag))};var Yc="function"===typeof reportError?reportError:function(e){console.error(e)};function eu(e){this._internalRoot=e}function tu(e){this._internalRoot=e}function nu(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function ru(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function su(){}function iu(e,t,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if("function"===typeof s){var a=s;s=function(){var e=Qc(o);a.call(e)}}Gc(t,o,e,s)}else o=function(e,t,n,r,s){if(s){if("function"===typeof r){var i=r;r=function(){var e=Qc(o);i.call(e)}}var o=Kc(t,r,e,0,null,!1,0,"",su);return e._reactRootContainer=o,e[ps]=o.current,Br(8===e.nodeType?e.parentNode:e),mc(),o}for(;s=e.lastChild;)e.removeChild(s);if("function"===typeof r){var a=r;r=function(){var e=Qc(l);a.call(e)}}var l=Hc(e,0,!1,null,0,!1,0,"",su);return e._reactRootContainer=l,e[ps]=l.current,Br(8===e.nodeType?e.parentNode:e),mc(function(){Gc(t,l,n,r)}),l}(n,t,e,s,r);return Qc(o)}tu.prototype.render=eu.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(i(409));Gc(e,t,null,null)},tu.prototype.unmount=eu.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;mc(function(){Gc(null,e,null,null)}),t[ps]=null}},tu.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Pt.length&&0!==t&&t<Pt[n].priority;n++);Pt.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=dt(t.pendingLanes);0!==n&&(vt(t,1|n),lc(t,Je()),0===(6&Pl)&&(Kl=Je()+500,Bs()))}break;case 13:mc(function(){var t=Di(e,1);if(null!==t){var n=ic();ac(t,e,1,n)}}),Jc(e,1)}},Et=function(e){if(13===e.tag){var t=Di(e,134217728);if(null!==t)ac(t,e,134217728,ic());Jc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=oc(e),n=Di(e,t);if(null!==n)ac(n,e,t,ic());Jc(e,t)}},kt=function(){return bt},St=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},Ee=function(e,t,n){switch(t){case"input":if(Y(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=ws(r);if(!s)throw Error(i(90));K(r),Y(r,s)}}}break;case"textarea":ie(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=pc,Ie=mc;var ou={usingClientEntryPoint:!1,Events:[bs,xs,ws,_e,Te,pc]},au={findFiberByHostInstance:vs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lu={bundleType:au.bundleType,version:au.version,rendererPackageName:au.rendererPackageName,rendererConfig:au.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:x.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:au.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var cu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cu.isDisabled&&cu.supportsFiber)try{st=cu.inject(lu),it=cu}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ou,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!nu(t))throw Error(i(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:E,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!nu(e))throw Error(i(299));var n=!1,r="",s=Yc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(s=t.onRecoverableError)),t=Hc(e,1,!1,null,0,n,0,r,s),e[ps]=t.current,Br(8===e.nodeType?e.parentNode:e),new eu(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(i(188));throw e=Object.keys(e).join(","),Error(i(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return mc(e)},t.hydrate=function(e,t,n){if(!ru(t))throw Error(i(200));return iu(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!nu(e))throw Error(i(405));var r=null!=n&&n.hydratedSources||null,s=!1,o="",a=Yc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(s=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=Kc(t,null,e,1,null!=n?n:null,s,0,o,a),e[ps]=t.current,Br(e),r)for(e=0;e<r.length;e++)s=(s=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new tu(t)},t.render=function(e,t,n){if(!ru(t))throw Error(i(200));return iu(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!ru(e))throw Error(i(40));return!!e._reactRootContainer&&(mc(function(){iu(null,null,e,!1,function(){e._reactRootContainer=null,e[ps]=null})}),!0)},t.unstable_batchedUpdates=pc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!ru(n))throw Error(i(200));if(null==e||void 0===e._reactInternals)throw Error(i(38));return iu(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,s){if(1&s&&(r=this(r)),8&s)return r;if("object"===typeof r&&r){if(4&s&&r.__esModule)return r;if(16&s&&"function"===typeof r.then)return r}var i=Object.create(null);n.r(i);var o={};e=e||[null,t({}),t([]),t(t)];for(var a=2&s&&r;("object"==typeof a||"function"==typeof a)&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach(e=>o[e]=()=>r[e]);return o.default=()=>r,n.d(i,o),i}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/AUTO-HOST-APP-FRONTEND/";var r={};n.r(r),n.d(r,{hasBrowserEnv:()=>rx,hasStandardBrowserEnv:()=>ix,hasStandardBrowserWebWorkerEnv:()=>ox,navigator:()=>sx,origin:()=>ax});var s,i=n(43),o=n.t(i,2),a=n(391),l=n(950),c=n.t(l,2);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(s||(s={}));const d="popstate";function h(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function f(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function p(e,t){return{usr:e.state,key:e.key,idx:t}}function m(e,t,n,r){return void 0===n&&(n=null),u({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?y(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function g(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function y(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function v(e,t,n,r){void 0===r&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,a=i.history,l=s.Pop,c=null,f=y();function y(){return(a.state||{idx:null}).idx}function v(){l=s.Pop;let e=y(),t=null==e?null:e-f;f=e,c&&c({action:l,location:x.location,delta:t})}function b(e){let t="null"!==i.location.origin?i.location.origin:i.location.href,n="string"===typeof e?e:g(e);return n=n.replace(/ $/,"%20"),h(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==f&&(f=0,a.replaceState(u({},a.state,{idx:f}),""));let x={get action(){return l},get location(){return e(i,a)},listen(e){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(d,v),c=e,()=>{i.removeEventListener(d,v),c=null}},createHref:e=>t(i,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){l=s.Push;let r=m(x.location,e,t);n&&n(r,e),f=y()+1;let u=p(r,f),d=x.createHref(r);try{a.pushState(u,"",d)}catch(h){if(h instanceof DOMException&&"DataCloneError"===h.name)throw h;i.location.assign(d)}o&&c&&c({action:l,location:x.location,delta:1})},replace:function(e,t){l=s.Replace;let r=m(x.location,e,t);n&&n(r,e),f=y();let i=p(r,f),u=x.createHref(r);a.replaceState(i,"",u),o&&c&&c({action:l,location:x.location,delta:0})},go:e=>a.go(e)};return x}var b;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(b||(b={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function x(e,t,n){return void 0===n&&(n="/"),w(e,t,n,!1)}function w(e,t,n,r){let s=D(("string"===typeof t?y(t):t).pathname||"/",n);if(null==s)return null;let i=E(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(i);let o=null;for(let a=0;null==o&&a<i.length;++a){let e=O(s);o=R(i[a],e,r)}return o}function E(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let s=(e,s,i)=>{let o={relativePath:void 0===i?e.path||"":i,caseSensitive:!0===e.caseSensitive,childrenIndex:s,route:e};o.relativePath.startsWith("/")&&(h(o.relativePath.startsWith(r),'Absolute route path "'+o.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),o.relativePath=o.relativePath.slice(r.length));let a=V([r,o.relativePath]),l=n.concat(o);e.children&&e.children.length>0&&(h(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+a+'".'),E(e.children,t,l,a)),(null!=e.path||e.index)&&t.push({path:a,score:A(a,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of N(e.path))s(e,t,r);else s(e,t)}),t}function N(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(0===r.length)return s?[i,""]:[i];let o=N(r.join("/")),a=[];return a.push(...o.map(e=>""===e?i:[i,e].join("/"))),s&&a.push(...o),a.map(t=>e.startsWith("/")&&""===t?"/":t)}const k=/^:[\w-]+$/,S=3,_=2,T=1,C=10,I=-2,j=e=>"*"===e;function A(e,t){let n=e.split("/"),r=n.length;return n.some(j)&&(r+=I),t&&(r+=_),n.filter(e=>!j(e)).reduce((e,t)=>e+(k.test(t)?S:""===t?T:C),r)}function R(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,s={},i="/",o=[];for(let a=0;a<r.length;++a){let e=r[a],l=a===r.length-1,c="/"===i?t:t.slice(i.length)||"/",u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),d=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(s,u.params),o.push({params:s,pathname:V([i,u.pathname]),pathnameBase:z(V([i,u.pathnameBase])),route:d}),"/"!==u.pathnameBase&&(i=V([i,u.pathnameBase]))}return o}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);f("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),s+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":""!==e&&"/"!==e&&(s+="(?:(?=\\/|$))");let i=new RegExp(s,t?void 0:"i");return[i,r]}(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:r.reduce((e,t,n)=>{let{paramName:r,isOptional:s}=t;if("*"===r){let e=a[n]||"";o=i.slice(0,i.length-e.length).replace(/(.)\/+$/,"$1")}const l=a[n];return e[r]=s&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{}),pathname:i,pathnameBase:o,pattern:e}}function O(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return f(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function L(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function M(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function U(e,t){let n=M(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function F(e,t,n,r){let s;void 0===r&&(r=!1),"string"===typeof e?s=y(e):(s=u({},e),h(!s.pathname||!s.pathname.includes("?"),L("?","pathname","search",s)),h(!s.pathname||!s.pathname.includes("#"),L("#","pathname","hash",s)),h(!s.search||!s.search.includes("#"),L("#","search","hash",s)));let i,o=""===e||""===s.pathname,a=o?"/":s.pathname;if(null==a)i=n;else{let e=t.length-1;if(!r&&a.startsWith("..")){let t=a.split("/");for(;".."===t[0];)t.shift(),e-=1;s.pathname=t.join("/")}i=e>=0?t[e]:"/"}let l=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:s=""}="string"===typeof e?y(e):e,i=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:i,search:B(r),hash:$(s)}}(s,i),c=a&&"/"!==a&&a.endsWith("/"),d=(o||"."===a)&&n.endsWith("/");return l.pathname.endsWith("/")||!c&&!d||(l.pathname+="/"),l}const V=e=>e.join("/").replace(/\/\/+/g,"/"),z=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",$=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function q(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const H=["post","put","patch","delete"],W=(new Set(H),["get",...H]);new Set(W),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function K(){return K=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K.apply(this,arguments)}const G=i.createContext(null);const Q=i.createContext(null);const X=i.createContext(null);const J=i.createContext(null);const Y=i.createContext({outlet:null,matches:[],isDataRoute:!1});const Z=i.createContext(null);function ee(){return null!=i.useContext(J)}function te(){return ee()||h(!1),i.useContext(J).location}function ne(e){i.useContext(X).static||i.useLayoutEffect(e)}function re(){let{isDataRoute:e}=i.useContext(Y);return e?function(){let{router:e}=pe(he.UseNavigateStable),t=ge(fe.UseNavigateStable),n=i.useRef(!1);ne(()=>{n.current=!0});let r=i.useCallback(function(r,s){void 0===s&&(s={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,K({fromRouteId:t},s)))},[e,t]);return r}():function(){ee()||h(!1);let e=i.useContext(G),{basename:t,future:n,navigator:r}=i.useContext(X),{matches:s}=i.useContext(Y),{pathname:o}=te(),a=JSON.stringify(U(s,n.v7_relativeSplatPath)),l=i.useRef(!1);ne(()=>{l.current=!0});let c=i.useCallback(function(n,s){if(void 0===s&&(s={}),!l.current)return;if("number"===typeof n)return void r.go(n);let i=F(n,JSON.parse(a),o,"path"===s.relative);null==e&&"/"!==t&&(i.pathname="/"===i.pathname?t:V([t,i.pathname])),(s.replace?r.replace:r.push)(i,s.state,s)},[t,r,a,o,e]);return c}()}function se(){let{matches:e}=i.useContext(Y),t=e[e.length-1];return t?t.params:{}}function ie(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(X),{matches:s}=i.useContext(Y),{pathname:o}=te(),a=JSON.stringify(U(s,r.v7_relativeSplatPath));return i.useMemo(()=>F(e,JSON.parse(a),o,"path"===n),[e,a,o,n])}function oe(e,t,n,r){ee()||h(!1);let{navigator:o}=i.useContext(X),{matches:a}=i.useContext(Y),l=a[a.length-1],c=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let d,f=te();if(t){var p;let e="string"===typeof t?y(t):t;"/"===u||(null==(p=e.pathname)?void 0:p.startsWith(u))||h(!1),d=e}else d=f;let m=d.pathname||"/",g=m;if("/"!==u){let e=u.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(e.length).join("/")}let v=x(e,{pathname:g});let b=de(v&&v.map(e=>Object.assign({},e,{params:Object.assign({},c,e.params),pathname:V([u,o.encodeLocation?o.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:V([u,o.encodeLocation?o.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),a,n,r);return t&&b?i.createElement(J.Provider,{value:{location:K({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:s.Pop}},b):b}function ae(){let e=function(){var e;let t=i.useContext(Z),n=me(fe.UseRouteError),r=ge(fe.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=q(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const le=i.createElement(ae,null);class ce extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(Y.Provider,{value:this.props.routeContext},i.createElement(Z.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ue(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(G);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(Y.Provider,{value:t},r)}function de(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var o;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(o=r)&&o.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let a=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=a.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||h(!1),a=a.slice(0,Math.min(a.length,e+1))}let c=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<a.length;i++){let e=a[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,s=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||s){c=!0,a=u>=0?a.slice(0,u+1):[a[0]];break}}}return a.reduceRight((e,r,s)=>{let o,d=!1,h=null,f=null;var p;n&&(o=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||le,c&&(u<0&&0===s?(p="route-fallback",!1||ye[p]||(ye[p]=!0),d=!0,f=null):u===s&&(d=!0,f=r.route.hydrateFallbackElement||null)));let m=t.concat(a.slice(0,s+1)),g=()=>{let t;return t=o?h:d?f:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(ue,{match:r,routeContext:{outlet:e,matches:m,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(ce,{location:n.location,revalidation:n.revalidation,component:h,error:o,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var he=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(he||{}),fe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(fe||{});function pe(e){let t=i.useContext(G);return t||h(!1),t}function me(e){let t=i.useContext(Q);return t||h(!1),t}function ge(e){let t=function(){let e=i.useContext(Y);return e||h(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||h(!1),n.route.id}const ye={};function ve(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}o.startTransition;function be(e){h(!1)}function xe(e){let{basename:t="/",children:n=null,location:r,navigationType:o=s.Pop,navigator:a,static:l=!1,future:c}=e;ee()&&h(!1);let u=t.replace(/^\/*/,"/"),d=i.useMemo(()=>({basename:u,navigator:a,static:l,future:K({v7_relativeSplatPath:!1},c)}),[u,c,a,l]);"string"===typeof r&&(r=y(r));let{pathname:f="/",search:p="",hash:m="",state:g=null,key:v="default"}=r,b=i.useMemo(()=>{let e=D(f,u);return null==e?null:{location:{pathname:e,search:p,hash:m,state:g,key:v},navigationType:o}},[u,f,p,m,g,v,o]);return null==b?null:i.createElement(X.Provider,{value:d},i.createElement(J.Provider,{children:n,value:b}))}function we(e){let{children:t,location:n}=e;return oe(Ee(t),n)}new Promise(()=>{});i.Component;function Ee(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,Ee(e.props.children,s));e.type!==be&&h(!1),e.props.index&&e.props.children&&h(!1);let o={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(o.children=Ee(e.props.children,s)),n.push(o)}),n}function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ne.apply(this,arguments)}function ke(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Se=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Uw){}new Map;const _e=o.startTransition;c.flushSync,o.useId;function Te(e){let{basename:t,children:n,future:r,window:s}=e,o=i.useRef();var a;null==o.current&&(o.current=(void 0===(a={window:s,v5Compat:!0})&&(a={}),v(function(e,t){let{pathname:n="/",search:r="",hash:s=""}=y(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),m("",{pathname:n,search:r,hash:s},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:g(t))},function(e,t){f("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},a)));let l=o.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:d}=r||{},h=i.useCallback(e=>{d&&_e?_e(()=>u(e)):u(e)},[u,d]);return i.useLayoutEffect(()=>l.listen(h),[l,h]),i.useEffect(()=>ve(r),[r]),i.createElement(xe,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const Ce="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ie=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,je=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:o,replace:a,state:l,target:c,to:u,preventScrollReset:d,viewTransition:f}=e,p=ke(e,Se),{basename:m}=i.useContext(X),y=!1;if("string"===typeof u&&Ie.test(u)&&(n=u,Ce))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=D(t.pathname,m);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:y=!0}catch(Uw){}let v=function(e,t){let{relative:n}=void 0===t?{}:t;ee()||h(!1);let{basename:r,navigator:s}=i.useContext(X),{hash:o,pathname:a,search:l}=ie(e,{relative:n}),c=a;return"/"!==r&&(c="/"===a?r:V([r,a])),s.createHref({pathname:c,search:l,hash:o})}(u,{relative:s}),b=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:o,relative:a,viewTransition:l}=void 0===t?{}:t,c=re(),u=te(),d=ie(e,{relative:a});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:g(u)===g(d);c(e,{replace:n,state:s,preventScrollReset:o,relative:a,viewTransition:l})}},[u,c,d,r,s,n,e,o,a,l])}(u,{replace:a,state:l,target:c,preventScrollReset:d,relative:s,viewTransition:f});return i.createElement("a",Ne({},p,{href:n||v,onClick:y||o?r:function(e){r&&r(e),e.defaultPrevented||b(e)},ref:t,target:c}))});var Ae,Re;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Ae||(Ae={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Re||(Re={}));const Pe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},Oe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,o=i?e[s+1]:0,a=s+2<e.length,l=a?e[s+2]:0,c=t>>2,u=(3&t)<<4|o>>4;let d=(15&o)<<2|l>>6,h=63&l;a||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Pe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const o=s<e.length?n[e.charAt(s)]:64;++s;const a=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==o||null==a)throw new De;const l=t<<2|i>>4;if(r.push(l),64!==o){const e=i<<4&240|o>>2;if(r.push(e),64!==a){const e=o<<6&192|a;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class De extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Le=function(e){return function(e){const t=Pe(e);return Oe.encodeByteArray(t,!0)}(e).replace(/\./g,"")},Me=function(e){try{return Oe.decodeString(e,!0)}catch(Uw){console.error("base64Decode failed: ",Uw)}return null};const Ue=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,Fe=()=>{try{return Ue()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/AUTO-HOST-APP-FRONTEND",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(Uw){return}const t=e&&Me(e[1]);return t&&JSON.parse(t)})()}catch(Uw){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${Uw}`)}},Ve=e=>{var t,n;return null===(n=null===(t=Fe())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},ze=e=>{const t=Ve(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Be=()=>{var e;return null===(e=Fe())||void 0===e?void 0:e.config},$e=e=>{var t;return null===(t=Fe())||void 0===t?void 0:t[`_${e}`]};class qe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function He(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[Le(JSON.stringify({alg:"none",type:"JWT"})),Le(JSON.stringify(i)),""].join(".")}function We(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function Ke(){try{return"object"===typeof indexedDB}catch(Uw){return!1}}class Ge extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,Ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n=`${this.service}/${e}`,r=this.errors[e],s=r?function(e,t){return e.replace(Xe,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(r,t):"Error",i=`${this.serviceName}: ${s} (${n}).`;return new Ge(n,i,t)}}const Xe=/\{\$([^}]+)}/g;function Je(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(Ye(n)&&Ye(i)){if(!Je(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Ye(e){return null!==e&&"object"===typeof e}function Ze(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function et(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function tt(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class nt{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=rt),void 0===r.error&&(r.error=rt),void 0===r.complete&&(r.complete=rt);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(Uw){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(Uw){"undefined"!==typeof console&&console.error&&console.error(Uw)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function rt(){}function st(e){return e&&e._delegate?e._delegate:e}class it{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const ot="[DEFAULT]";class at{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new qe;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(Uw){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(Uw){if(r)return null;throw Uw}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:ot})}catch(Uw){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(Uw){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===ot?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ot;return this.component?this.component.multipleInstances?e:ot:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class lt{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new at(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const ct=[];var ut;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ut||(ut={}));const dt={debug:ut.DEBUG,verbose:ut.VERBOSE,info:ut.INFO,warn:ut.WARN,error:ut.ERROR,silent:ut.SILENT},ht=ut.INFO,ft={[ut.DEBUG]:"log",[ut.VERBOSE]:"log",[ut.INFO]:"info",[ut.WARN]:"warn",[ut.ERROR]:"error"},pt=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=ft[t];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);for(var s=arguments.length,i=new Array(s>2?s-2:0),o=2;o<s;o++)i[o-2]=arguments[o];console[r](`[${n}]  ${e.name}:`,...i)};class mt{constructor(e){this.name=e,this._logLevel=ht,this._logHandler=pt,this._userLogHandler=null,ct.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ut))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?dt[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.DEBUG,...t),this._logHandler(this,ut.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.VERBOSE,...t),this._logHandler(this,ut.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.INFO,...t),this._logHandler(this,ut.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.WARN,...t),this._logHandler(this,ut.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,ut.ERROR,...t),this._logHandler(this,ut.ERROR,...t)}}let gt,yt;const vt=new WeakMap,bt=new WeakMap,xt=new WeakMap,wt=new WeakMap,Et=new WeakMap;let Nt={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return bt.get(e);if("objectStoreNames"===t)return e.objectStoreNames||xt.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return _t(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function kt(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(yt||(yt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Tt(this),n),_t(vt.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return _t(e.apply(Tt(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(Tt(this),t,...r);return xt.set(i,t.sort?t.sort():[t]),_t(i)}}function St(e){return"function"===typeof e?kt(e):(e instanceof IDBTransaction&&function(e){if(bt.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});bt.set(e,t)}(e),t=e,(gt||(gt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,Nt):e);var t}function _t(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(_t(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&vt.set(t,e)}).catch(()=>{}),Et.set(t,e),t}(e);if(wt.has(e))return wt.get(e);const t=St(e);return t!==e&&(wt.set(e,t),Et.set(t,e)),t}const Tt=e=>Et.get(e);const Ct=["get","getKey","getAll","getAllKeys","count"],It=["put","add","delete","clear"],jt=new Map;function At(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(jt.get(t))return jt.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=It.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!Ct.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var o=arguments.length,a=new Array(o>1?o-1:0),l=1;l<o;l++)a[l-1]=arguments[l];return r&&(i=i.index(a.shift())),(await Promise.all([i[n](...a),s&&t.done]))[0]};return jt.set(t,i),i}Nt=(e=>({...e,get:(t,n,r)=>At(t,n)||e.get(t,n,r),has:(t,n)=>!!At(t,n)||e.has(t,n)}))(Nt);class Rt{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const Pt="@firebase/app",Ot="0.9.13",Dt=new mt("@firebase/app"),Lt="@firebase/app-compat",Mt="@firebase/analytics-compat",Ut="@firebase/analytics",Ft="@firebase/app-check-compat",Vt="@firebase/app-check",zt="@firebase/auth",Bt="@firebase/auth-compat",$t="@firebase/database",qt="@firebase/database-compat",Ht="@firebase/functions",Wt="@firebase/functions-compat",Kt="@firebase/installations",Gt="@firebase/installations-compat",Qt="@firebase/messaging",Xt="@firebase/messaging-compat",Jt="@firebase/performance",Yt="@firebase/performance-compat",Zt="@firebase/remote-config",en="@firebase/remote-config-compat",tn="@firebase/storage",nn="@firebase/storage-compat",rn="@firebase/firestore",sn="@firebase/firestore-compat",on="firebase",an="[DEFAULT]",ln={[Pt]:"fire-core",[Lt]:"fire-core-compat",[Ut]:"fire-analytics",[Mt]:"fire-analytics-compat",[Vt]:"fire-app-check",[Ft]:"fire-app-check-compat",[zt]:"fire-auth",[Bt]:"fire-auth-compat",[$t]:"fire-rtdb",[qt]:"fire-rtdb-compat",[Ht]:"fire-fn",[Wt]:"fire-fn-compat",[Kt]:"fire-iid",[Gt]:"fire-iid-compat",[Qt]:"fire-fcm",[Xt]:"fire-fcm-compat",[Jt]:"fire-perf",[Yt]:"fire-perf-compat",[Zt]:"fire-rc",[en]:"fire-rc-compat",[tn]:"fire-gcs",[nn]:"fire-gcs-compat",[rn]:"fire-fst",[sn]:"fire-fst-compat","fire-js":"fire-js",[on]:"fire-js-all"},cn=new Map,un=new Map;function dn(e,t){try{e.container.addComponent(t)}catch(Uw){Dt.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,Uw)}}function hn(e){const t=e.name;if(un.has(t))return Dt.debug(`There were multiple attempts to register component ${t}.`),!1;un.set(t,e);for(const n of cn.values())dn(n,e);return!0}function fn(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}const pn=new Qe("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class mn{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new it("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pn.create("app-deleted",{appName:this._name})}}const gn="9.23.0";function yn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=Object.assign({name:an,automaticDataCollectionEnabled:!1},t),s=r.name;if("string"!==typeof s||!s)throw pn.create("bad-app-name",{appName:String(s)});if(n||(n=Be()),!n)throw pn.create("no-options");const i=cn.get(s);if(i){if(Je(n,i.options)&&Je(r,i.config))return i;throw pn.create("duplicate-app",{appName:s})}const o=new lt(s);for(const l of un.values())o.addComponent(l);const a=new mn(n,r,o);return cn.set(s,a),a}function vn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:an;const t=cn.get(e);if(!t&&e===an&&Be())return yn();if(!t)throw pn.create("no-app",{appName:e});return t}function bn(e,t,n){var r;let s=null!==(r=ln[e])&&void 0!==r?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=t.match(/\s|\//);if(i||o){const e=[`Unable to register library "${s}" with version "${t}":`];return i&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&e.push("and"),o&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void Dt.warn(e.join(" "))}hn(new it(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}const xn="firebase-heartbeat-store";let wn=null;function En(){return wn||(wn=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),a=_t(o);return r&&o.addEventListener("upgradeneeded",e=>{r(_t(o.result),e.oldVersion,e.newVersion,_t(o.transaction),e)}),n&&o.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),a.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)e.createObjectStore(xn)}}).catch(e=>{throw pn.create("idb-open",{originalErrorMessage:e.message})})),wn}async function Nn(e,t){try{const n=(await En()).transaction(xn,"readwrite"),r=n.objectStore(xn);await r.put(t,kn(e)),await n.done}catch(Uw){if(Uw instanceof Ge)Dt.warn(Uw.message);else{const t=pn.create("idb-set",{originalErrorMessage:null===Uw||void 0===Uw?void 0:Uw.message});Dt.warn(t.message)}}}function kn(e){return`${e.name}!${e.options.appId}`}class Sn{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Tn(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){const e=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),t=_n();if(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate!==t&&!this._heartbeatsCache.heartbeats.some(e=>e.date===t))return this._heartbeatsCache.heartbeats.push({date:t,agent:e}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";const e=_n(),{heartbeatsToSend:t,unsentEntries:n}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),Cn(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Cn(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),r=Le(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,n.length>0?(this._heartbeatsCache.heartbeats=n,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function _n(){return(new Date).toISOString().substring(0,10)}class Tn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!Ke()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=await En();return await t.transaction(xn).objectStore(xn).get(kn(e))}catch(Uw){if(Uw instanceof Ge)Dt.warn(Uw.message);else{const t=pn.create("idb-get",{originalErrorMessage:null===Uw||void 0===Uw?void 0:Uw.message});Dt.warn(t.message)}}}(this.app);return e||{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nn(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Cn(e){return Le(JSON.stringify({version:2,heartbeats:e})).length}var In;In="",hn(new it("platform-logger",e=>new Rt(e),"PRIVATE")),hn(new it("heartbeat",e=>new Sn(e),"PRIVATE")),bn(Pt,Ot,In),bn(Pt,Ot,"esm2017"),bn("fire-js","");bn("firebase","9.23.0","app");function jn(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var s=0;for(r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;function An(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Rn=An,Pn=new Qe("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),On=new mt("@firebase/auth");function Dn(e){if(On.logLevel<=ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];On.error(`Auth (${gn}): ${e}`,...n)}}function Ln(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Fn(e,...n)}function Mn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Fn(e,...n)}function Un(e,t,n){const r=Object.assign(Object.assign({},Rn()),{[t]:n});return new Qe("auth","Firebase",r).create(t,{appName:e.name})}function Fn(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Pn.create(e,...n)}function Vn(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw Fn(t,...r)}}function zn(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Dn(t),new Error(t)}function Bn(e,t){e||zn(t)}function $n(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function qn(){return"http:"===Hn()||"https:"===Hn()}function Hn(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Wn(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(qn()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Kn{constructor(e,t){this.shortDelay=e,this.longDelay=t,Bn(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(We())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Wn()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Gn(e,t){Bn(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class Qn{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:void zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:void zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:void zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Xn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},Jn=new Kn(3e4,6e4);function Yn(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function Zn(e,t,n,r){return er(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const o=Ze(Object.assign({key:e.config.apiKey},i)).slice(1),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/json",e.languageCode&&(a["X-Firebase-Locale"]=e.languageCode),Qn.fetch()(nr(e,e.config.apiHost,n,o),Object.assign({method:t,headers:a,referrerPolicy:"no-referrer"},s))})}async function er(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},Xn),t);try{const t=new rr(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw sr(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw sr(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw sr(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw sr(e,"user-disabled",i);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw Un(e,a,o);Ln(e,a)}}catch(Uw){if(Uw instanceof Ge)throw Uw;Ln(e,"network-request-failed",{message:String(Uw)})}}async function tr(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Zn(e,t,n,r,s);return"mfaPendingCredential"in i&&Ln(e,"multi-factor-auth-required",{_serverResponse:i}),i}function nr(e,t,n,r){const s=`${t}${n}?${r}`;return e.config.emulator?Gn(e.config,s):`${e.config.apiScheme}://${s}`}class rr{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(Mn(this.auth,"network-request-failed")),Jn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sr(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=Mn(e,t,r);return s.customData._tokenResponse=n,s}function ir(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Uw){}}function or(e){return 1e3*Number(e)}function ar(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Dn("JWT malformed, contained fewer than 3 sections"),null;try{const e=Me(n);return e?JSON.parse(e):(Dn("Failed to decode base64 JWT payload"),null)}catch(Uw){return Dn("Caught error parsing JWT payload as JSON",null===Uw||void 0===Uw?void 0:Uw.toString()),null}}async function lr(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Uw){throw Uw instanceof Ge&&function(e){let{code:t}=e;return"auth/user-disabled"===t||"auth/user-token-expired"===t}(Uw)&&e.auth.currentUser===e&&await e.auth.signOut(),Uw}}class cr{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Uw){return void("auth/network-request-failed"===(null===Uw||void 0===Uw?void 0:Uw.code)&&this.schedule(!0))}this.schedule()}}class ur{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ir(this.lastLoginAt),this.creationTime=ir(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function dr(e){var t;const n=e.auth,r=await e.getIdToken(),s=await lr(e,async function(e,t){return Zn(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));Vn(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const o=(null===(t=i.providerUserInfo)||void 0===t?void 0:t.length)?i.providerUserInfo.map(e=>{var{providerId:t}=e,n=jn(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[];const a=(l=e.providerData,c=o,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null===a||void 0===a?void 0:a.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new ur(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}class hr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Vn(e.idToken,"internal-error"),Vn("undefined"!==typeof e.idToken,"internal-error"),Vn("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):function(e){const t=ar(e);return Vn(t,"internal-error"),Vn("undefined"!==typeof t.exp,"internal-error"),Vn("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Vn(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await er(e,{},async()=>{const n=Ze({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=nr(e,r,"/v1/token",`key=${s}`),o=await e._getAdditionalHeaders();return o["Content-Type"]="application/x-www-form-urlencoded",Qn.fetch()(i,{method:"POST",headers:o,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new hr;return n&&(Vn("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(Vn("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(Vn("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hr,this.toJSON())}_performRefresh(){return zn("not implemented")}}function fr(e,t){Vn("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class pr{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,s=jn(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ur(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await lr(this,this.stsTokenManager.getToken(this.auth,e));return Vn(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=st(e),r=await n.getIdToken(t),s=ar(r);Vn(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,o=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ir(or(s.auth_time)),issuedAtTime:ir(or(s.iat)),expirationTime:ir(or(s.exp)),signInProvider:o||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=st(e);await dr(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Vn(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new pr(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Vn(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await dr(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await lr(this,async function(e,t){return Zn(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,o,a,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,f=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(o=t.tenantId)&&void 0!==o?o:void 0,m=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:E}=t;Vn(v&&E,e,"internal-error");const N=hr.fromJSON(this.name,E);Vn("string"===typeof v,e,"internal-error"),fr(u,e.name),fr(d,e.name),Vn("boolean"===typeof b,e,"internal-error"),Vn("boolean"===typeof x,e,"internal-error"),fr(h,e.name),fr(f,e.name),fr(p,e.name),fr(m,e.name),fr(g,e.name),fr(y,e.name);const k=new pr({uid:v,auth:e,email:d,emailVerified:b,displayName:u,isAnonymous:x,photoURL:f,phoneNumber:h,tenantId:p,stsTokenManager:N,createdAt:g,lastLoginAt:y});return w&&Array.isArray(w)&&(k.providerData=w.map(e=>Object.assign({},e))),m&&(k._redirectEventId=m),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hr;r.updateFromServerResponse(t);const s=new pr({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await dr(s),s}}const mr=new Map;function gr(e){Bn(e instanceof Function,"Expected a class definition");let t=mr.get(e);return t?(Bn(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,mr.set(e,t),t)}class yr{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yr.type="NONE";const vr=yr;function br(e,t,n){return`firebase:${e}:${t}:${n}`}class xr{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=br(this.userKey,r.apiKey,s),this.fullPersistenceKey=br("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?pr._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new xr(gr(vr),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||gr(vr);const i=br(n,e.config.apiKey,e.name);let o=null;for(const c of t)try{const t=await c._get(i);if(t){const n=pr._fromJSON(e,t);c!==s&&(o=n),s=c;break}}catch(l){}const a=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&a.length?(s=a[0],o&&await s._set(i,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(l){}})),new xr(s,e,n)):new xr(s,e,n)}}function wr(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Sr(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Er(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Tr(t))return"Blackberry";if(Cr(t))return"Webos";if(Nr(t))return"Safari";if((t.includes("chrome/")||kr(t))&&!t.includes("edge/"))return"Chrome";if(_r(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Er(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/firefox\//i.test(e)}function Nr(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:We()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function kr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/crios\//i.test(e)}function Sr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iemobile/i.test(e)}function _r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/android/i.test(e)}function Tr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/blackberry/i.test(e)}function Cr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/webos/i.test(e)}function Ir(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jr(){return function(){const e=We();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function Ar(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:We();return Ir(e)||_r(e)||Cr(e)||Tr(e)||/windows phone/i.test(e)||Sr(e)}function Rr(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=wr(We());break;case"Worker":t=`${wr(We())}-${e}`;break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return`${t}/JsCore/${gn}/${r}`}async function Pr(e,t){return Zn(e,"GET","/v2/recaptchaConfig",Yn(e,t))}function Or(e){return void 0!==e&&void 0!==e.enterprise}class Dr{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(e=>"EMAIL_PASSWORD_PROVIDER"===e.provider&&"OFF"!==e.enforcementState)}}function Lr(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=Mn("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})}function Mr(e){return`__${e}${Math.floor(1e6*Math.random())}`}class Ur{constructor(e){this.type="recaptcha-enterprise",this.auth=Br(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;Or(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n("NO_RECAPTCHA")})}):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{Pr(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Dr(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&Or(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));Lr("https://www.google.com/recaptcha/enterprise.js?render="+s).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Fr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=new Ur(e);let i;try{i=await s.verify(n)}catch(a){i=await s.verify(n,!0)}const o=Object.assign({},t);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}class Vr{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Uw){r(Uw)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Uw){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Uw||void 0===Uw?void 0:Uw.message})}}}class zr{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $r(this),this.idTokenSubscription=new $r(this),this.beforeStateQueue=new Vr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Pn,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gr(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await xr.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Uw){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null===r||void 0===r?void 0:r._redirectEventId,o=await this.tryRedirectSignIn(e);n&&n!==i||!(null===o||void 0===o?void 0:o.user)||(r=o.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(Uw){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Uw))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Vn(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Uw){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await dr(e)}catch(Uw){if("auth/network-request-failed"!==(null===Uw||void 0===Uw?void 0:Uw.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?st(e):null;return t&&Vn(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Vn(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(gr(e))})}async initializeRecaptchaConfig(){const e=await Pr(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),t=new Dr(e);if(null==this.tenantId?this._agentRecaptchaConfig=t:this._tenantRecaptchaConfigs[this.tenantId]=t,t.emailPasswordEnabled){new Ur(this).verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Qe("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gr(e)||this._popupRedirectResolver;Vn(t,this,"argument-error"),this.redirectPersistenceManager=await xr.create(this,[gr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t),i=this._isInitialized?Promise.resolve():this._initializationPromise;return Vn(i,this,"internal-error"),i.then(()=>s(this.currentUser)),"function"===typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Vn(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Rr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(On.logLevel<=ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];On.warn(`Auth (${gn}): ${e}`,...n)}}(`Error while retrieving App Check token: ${t.error}`),null===t||void 0===t?void 0:t.token}}function Br(e){return st(e)}class $r{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new nt(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return Vn(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function qr(e,t,n){const r=Br(e);Vn(r._canInitEmulator,r,"emulator-config-failed"),Vn(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!!(null===n||void 0===n?void 0:n.disableWarnings),i=Hr(t),{host:o,port:a}=function(e){const t=Hr(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Wr(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Wr(t)}}}(t),l=null===a?"":`:${a}`;r.config.emulator={url:`${i}//${o}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function Hr(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Wr(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class Kr{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return zn("not implemented")}_getIdTokenResponse(e){return zn("not implemented")}_linkToIdToken(e,t){return zn("not implemented")}_getReauthenticationResolver(e){return zn("not implemented")}}async function Gr(e,t){return Zn(e,"POST","/v1/accounts:update",t)}async function Qr(e,t){return tr(e,"POST","/v1/accounts:signInWithPassword",Yn(e,t))}class Xr extends Kr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Xr(e,t,"password")}static _fromEmailAndCode(e,t){return new Xr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){var t;switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(t=e._getRecaptchaConfig())||void 0===t?void 0:t.emailPasswordEnabled){const t=await Fr(e,n,"signInWithPassword");return Qr(e,t)}return Qr(e,n).catch(async t=>{if("auth/missing-recaptcha-token"===t.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const t=await Fr(e,n,"signInWithPassword");return Qr(e,t)}return Promise.reject(t)});case"emailLink":return async function(e,t){return tr(e,"POST","/v1/accounts:signInWithEmailLink",Yn(e,t))}(e,{email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Gr(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return tr(e,"POST","/v1/accounts:signInWithEmailLink",Yn(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:Ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function Jr(e,t){return tr(e,"POST","/v1/accounts:signInWithIdp",Yn(e,t))}class Yr extends Kr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Yr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ln("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=jn(t,["providerId","signInMethod"]);if(!n||!r)return null;const i=new Yr(n,r);return i.idToken=s.idToken||void 0,i.accessToken=s.accessToken||void 0,i.secret=s.secret,i.nonce=s.nonce,i.pendingToken=s.pendingToken||null,i}_getIdTokenResponse(e){return Jr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,Jr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ze(t)}return e}}const Zr={USER_NOT_FOUND:"user-not-found"};class es extends Kr{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new es({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new es({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return tr(e,"POST","/v1/accounts:signInWithPhoneNumber",Yn(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await tr(e,"POST","/v1/accounts:signInWithPhoneNumber",Yn(e,t));if(n.temporaryProof)throw sr(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return tr(e,"POST","/v1/accounts:signInWithPhoneNumber",Yn(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Zr)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new es({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class ts{constructor(e){var t,n,r,s,i,o;const a=et(tt(e)),l=null!==(t=a.apiKey)&&void 0!==t?t:null,c=null!==(n=a.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=a.mode)&&void 0!==r?r:null);Vn(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=a.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=a.languageCode)&&void 0!==i?i:null,this.tenantId=null!==(o=a.tenantId)&&void 0!==o?o:null}static parseLink(e){const t=function(e){const t=et(tt(e)).link,n=t?et(tt(t)).deep_link_id:null,r=et(tt(e)).deep_link_id;return(r?et(tt(r)).link:null)||r||n||t||e}(e);try{return new ts(t)}catch(n){return null}}}class ns{constructor(){this.providerId=ns.PROVIDER_ID}static credential(e,t){return Xr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=ts.parseLink(t);return Vn(n,"argument-error"),Xr._fromEmailAndCode(e,n.code,n.tenantId)}}ns.PROVIDER_ID="password",ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class rs{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class ss extends rs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class is extends ss{constructor(){super("facebook.com")}static credential(e){return Yr._fromParams({providerId:is.PROVIDER_ID,signInMethod:is.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return is.credentialFromTaggedObject(e)}static credentialFromError(e){return is.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return is.credential(t.oauthAccessToken)}catch(n){return null}}}is.FACEBOOK_SIGN_IN_METHOD="facebook.com",is.PROVIDER_ID="facebook.com";class os extends ss{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Yr._fromParams({providerId:os.PROVIDER_ID,signInMethod:os.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return os.credentialFromTaggedObject(e)}static credentialFromError(e){return os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return os.credential(n,r)}catch(s){return null}}}os.GOOGLE_SIGN_IN_METHOD="google.com",os.PROVIDER_ID="google.com";class as extends ss{constructor(){super("github.com")}static credential(e){return Yr._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return as.credential(t.oauthAccessToken)}catch(n){return null}}}as.GITHUB_SIGN_IN_METHOD="github.com",as.PROVIDER_ID="github.com";class ls extends ss{constructor(){super("twitter.com")}static credential(e,t){return Yr._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return ls.credential(n,r)}catch(s){return null}}}async function cs(e,t){return tr(e,"POST","/v1/accounts:signUp",Yn(e,t))}ls.TWITTER_SIGN_IN_METHOD="twitter.com",ls.PROVIDER_ID="twitter.com";class us{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await pr._fromIdTokenResponse(e,n,r),i=ds(n);return new us({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=ds(n);return new us({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function ds(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class hs extends Ge{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,hs.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new hs(e,t,n,r)}}function fs(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw hs._fromErrorAndOperation(e,n,t,r);throw n})}async function ps(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await lr(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return us._forOperation(e,"link",r)}async function ms(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e,s="reauthenticate";try{const i=await lr(e,fs(r,s,t,e),n);Vn(i.idToken,r,"internal-error");const o=ar(i.idToken);Vn(o,r,"internal-error");const{sub:a}=o;return Vn(e.uid===a,r,"user-mismatch"),us._forOperation(e,s,i)}catch(Uw){throw"auth/user-not-found"===(null===Uw||void 0===Uw?void 0:Uw.code)&&Ln(r,"user-mismatch"),Uw}}async function gs(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r="signIn",s=await fs(e,r,t),i=await us._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function ys(e,t){return gs(Br(e),t)}new WeakMap;const vs="__sak";class bs{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(vs,"1"),this.storage.removeItem(vs),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class xs extends bs{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=We();return Nr(e)||Ir(e)}()&&function(){try{return!(!window||window===window.top)}catch(Uw){return!1}}(),this.fallbackToPolling=Ar(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);jr()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}xs.type="LOCAL";const ws=xs;class Es extends bs{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Es.type="SESSION";const Ns=Es;class ks{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new ks(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(!(null===i||void 0===i?void 0:i.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(i).map(async e=>e(t.origin,s)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Ss(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}ks.receivers=[];class _s{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((o,a)=>{const l=Ss("",20);r.port1.start();const c=setTimeout(()=>{a(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),o(t.data.response);break;default:clearTimeout(c),clearTimeout(s),a(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function Ts(){return window}function Cs(){return"undefined"!==typeof Ts().WorkerGlobalScope&&"function"===typeof Ts().importScripts}const Is="firebaseLocalStorageDb",js="firebaseLocalStorage",As="fbase_key";class Rs{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Ps(e,t){return e.transaction([js],t?"readwrite":"readonly").objectStore(js)}function Os(){const e=indexedDB.open(Is,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(js,{keyPath:As})}catch(Uw){n(Uw)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(js)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Is);return new Rs(e).toPromise()}(),t(await Os()))})})}async function Ds(e,t,n){const r=Ps(e,!0).put({[As]:t,value:n});return new Rs(r).toPromise()}function Ls(e,t){const n=Ps(e,!0).delete(t);return new Rs(n).toPromise()}class Ms{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Os()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Uw){if(t++>3)throw Uw;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Cs()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=ks._getInstance(Cs()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new _s(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Os();return await Ds(e,vs,"1"),await Ls(e,vs),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Ds(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Ps(e,!1).get(t),r=await new Rs(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ls(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Ps(e,!1).getAll();return new Rs(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}Ms.type="LOCAL";const Us=Ms;Mr("rcb"),new Kn(3e4,6e4);const Fs="recaptcha";async function Vs(e,t,n){var r;const s=await n.verify();try{let i;if(Vn("string"===typeof s,e,"argument-error"),Vn(n.type===Fs,e,"argument-error"),i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Vn("enroll"===t.type,e,"internal-error");const n=await function(e,t){return Zn(e,"POST","/v2/accounts/mfaEnrollment:start",Yn(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,recaptchaToken:s}});return n.phoneSessionInfo.sessionInfo}{Vn("signin"===t.type,e,"internal-error");const n=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Vn(n,e,"missing-multi-factor-info");const o=await function(e,t){return Zn(e,"POST","/v2/accounts/mfaSignIn:start",Yn(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:s}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return Zn(e,"POST","/v1/accounts:sendVerificationCode",Yn(e,t))}(e,{phoneNumber:i.phoneNumber,recaptchaToken:s});return t}}finally{n._reset()}}class zs{constructor(e){this.providerId=zs.PROVIDER_ID,this.auth=Br(e)}verifyPhoneNumber(e,t){return Vs(this.auth,e,st(t))}static credential(e,t){return es._fromVerification(e,t)}static credentialFromResult(e){const t=e;return zs.credentialFromTaggedObject(t)}static credentialFromError(e){return zs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?es._fromTokenResponse(n,r):null}}function Bs(e,t){return t?gr(t):(Vn(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}zs.PROVIDER_ID="phone",zs.PHONE_SIGN_IN_METHOD="phone";class $s extends Kr{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function qs(e){return gs(e.auth,new $s(e),e.bypassAuthState)}function Hs(e){const{auth:t,user:n}=e;return Vn(n,t,"internal-error"),ms(n,new $s(e),e.bypassAuthState)}async function Ws(e){const{auth:t,user:n}=e;return Vn(n,t,"internal-error"),ps(n,new $s(e),e.bypassAuthState)}class Ks{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Uw){this.reject(Uw)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:o}=e;if(i)return void this.reject(i);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(Uw){this.reject(Uw)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qs;case"linkViaPopup":case"linkViaRedirect":return Ws;case"reauthViaPopup":case"reauthViaRedirect":return Hs;default:Ln(this.auth,"internal-error")}}resolve(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Bn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Gs=new Kn(2e3,1e4);class Qs extends Ks{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,Qs.currentPopupAction&&Qs.currentPopupAction.cancel(),Qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Vn(e,this.auth,"internal-error"),e}async onExecution(){Bn(1===this.filter.length,"Popup operations only handle one event");const e=Ss();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,Gs.get())};e()}}Qs.currentPopupAction=null;const Xs=new Map;class Js extends Ks{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=Xs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ei(t),r=Zs(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(Uw){e=()=>Promise.reject(Uw)}Xs.set(this.auth._key(),e)}return this.bypassAuthState||Xs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ys(e,t){Xs.set(e._key(),t)}function Zs(e){return gr(e._redirectPersistence)}function ei(e){return br("pendingRedirect",e.config.apiKey,e.name)}async function ti(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=Br(e),s=Bs(r,t),i=new Js(r,s,n),o=await i.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}class ni{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return si(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!si(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(Mn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ri(e))}saveEventToCache(e){this.cachedEventUids.add(ri(e)),this.lastProcessedEventTime=Date.now()}}function ri(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function si(e){let{type:t,error:n}=e;return"unknown"===t&&"auth/no-auth-event"===(null===n||void 0===n?void 0:n.code)}const ii=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oi=/^https?/;async function ai(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Zn(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(li(r))return}catch(n){}Ln(e,"unauthorized-domain")}function li(e){const t=$n(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!oi.test(n))return!1;if(ii.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const ci=new Kn(3e4,6e4);function ui(){const e=Ts().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let di=null;function hi(e){return di=di||function(e){return new Promise((t,n)=>{var r,s,i;function o(){ui(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{ui(),n(Mn(e,"network-request-failed"))},timeout:ci.get()})}if(null===(s=null===(r=Ts().gapi)||void 0===r?void 0:r.iframes)||void 0===s?void 0:s.Iframe)t(gapi.iframes.getContext());else{if(!(null===(i=Ts().gapi)||void 0===i?void 0:i.load)){const t=Mr("iframefcb");return Ts()[t]=()=>{gapi.load?o():n(Mn(e,"network-request-failed"))},Lr(`https://apis.google.com/js/api.js?onload=${t}`).catch(e=>n(e))}o()}}).catch(e=>{throw di=null,e})}(e),di}const fi=new Kn(5e3,15e3),pi={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},mi=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gi(e){const t=e.config;Vn(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Gn(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,r={apiKey:t.apiKey,appName:e.name,v:gn},s=mi.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ze(r).slice(1)}`}const yi={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class vi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Uw){}}}function bi(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const l=Object.assign(Object.assign({},yi),{width:r.toString(),height:s.toString(),top:i,left:o}),c=We().toLowerCase();n&&(a=kr(c)?"_blank":n),Er(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return`${e}${n}=${r},`},"");if(function(){var e;return Ir(arguments.length>0&&void 0!==arguments[0]?arguments[0]:We())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==a)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",a),new vi(null);const d=window.open(t||"",a,u);Vn(d,e,"popup-blocked");try{d.focus()}catch(Uw){}return new vi(d)}const xi="__/auth/handler",wi="emulator/auth/handler",Ei=encodeURIComponent("fac");async function Ni(e,t,n,r,s,i){Vn(e.config.authDomain,e,"auth-domain-config-required"),Vn(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:gn,eventId:s};if(t instanceof rs){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))o[e]=t}if(t instanceof ss){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(o.scopes=e.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const u of Object.keys(a))void 0===a[u]&&delete a[u];const l=await e._getAppCheckToken(),c=l?`#${Ei}=${encodeURIComponent(l)}`:"";return`${function(e){let{config:t}=e;if(!t.emulator)return`https://${t.authDomain}/${xi}`;return Gn(t,wi)}(e)}?${Ze(a).slice(1)}${c}`}const ki="webStorageSupport";const Si=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ns,this._completeRedirectFn=ti,this._overrideRedirectResult=Ys}async _openPopup(e,t,n,r){var s;Bn(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return bi(e,await Ni(e,t,n,$n(),r),Ss())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Ts().location.href=e}(await Ni(e,t,n,$n(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Bn(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await async function(e){const t=await hi(e),n=Ts().gapi;return Vn(n,e,"internal-error"),t.open({where:document.body,url:gi(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:pi,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=Mn(e,"network-request-failed"),i=Ts().setTimeout(()=>{r(s)},fi.get());function o(){Ts().clearTimeout(i),n(t)}t.ping(o).then(o,()=>{r(s)})}))}(e),n=new ni(e);return t.register("authEvent",t=>{Vn(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(ki,{type:ki},n=>{var r;const s=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[ki];void 0!==s&&t(!!s),Ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ai(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Ar()||Nr()||Ir()}};var _i="@firebase/auth",Ti="0.23.2";class Ci{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Vn(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Ii=$e("authIdTokenMaxAge")||300;let ji=null;var Ai;Ai="Browser",hn(new it("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;Vn(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:o,authDomain:a,clientPlatform:Ai,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Rr(Ai)},c=new zr(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gr);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),hn(new it("auth-internal",e=>(e=>new Ci(e))(Br(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),bn(_i,Ti,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(Ai)),bn(_i,Ti,"esm2017");var Ri,Pi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},Oi={},Di=Di||{},Li=Pi||self;function Mi(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Ui(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Fi="closure_uid_"+(1e9*Math.random()>>>0),Vi=0;function zi(e,t,n){return e.call.apply(e.bind,arguments)}function Bi(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function $i(e,t,n){return($i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?zi:Bi).apply(null,arguments)}function qi(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Hi(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function Wi(){this.s=this.s,this.o=this.o}Wi.prototype.s=!1,Wi.prototype.sa=function(){var e;!this.s&&(this.s=!0,this.N(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Fi)&&e[Fi]||(e[Fi]=++Vi))},Wi.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ki=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Gi(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function Qi(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(Mi(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function Xi(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Xi.prototype.h=function(){this.defaultPrevented=!0};var Ji=function(){if(!Li.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Li.addEventListener("test",()=>{},t),Li.removeEventListener("test",()=>{},t)}catch(n){}return e}();function Yi(e){return/^[\s\xa0]*$/.test(e)}function Zi(){var e=Li.navigator;return e&&(e=e.userAgent)?e:""}function eo(e){return-1!=Zi().indexOf(e)}function to(e){return to[" "](e),e}to[" "]=function(){};var no,ro,so=eo("Opera"),io=eo("Trident")||eo("MSIE"),oo=eo("Edge"),ao=oo||io,lo=eo("Gecko")&&!(-1!=Zi().toLowerCase().indexOf("webkit")&&!eo("Edge"))&&!(eo("Trident")||eo("MSIE"))&&!eo("Edge"),co=-1!=Zi().toLowerCase().indexOf("webkit")&&!eo("Edge");function uo(){var e=Li.document;return e?e.documentMode:void 0}e:{var ho="",fo=function(){var e=Zi();return lo?/rv:([^\);]+)(\)|;)/.exec(e):oo?/Edge\/([\d\.]+)/.exec(e):io?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):co?/WebKit\/(\S+)/.exec(e):so?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(fo&&(ho=fo?fo[1]:""),io){var po=uo();if(null!=po&&po>parseFloat(ho)){no=String(po);break e}}no=ho}if(Li.document&&io){var mo=uo();ro=mo||(parseInt(no,10)||void 0)}else ro=void 0;var go=ro;function yo(e,t){if(Xi.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(lo){e:{try{to(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:vo[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&yo.$.h.call(this)}}Hi(yo,Xi);var vo={2:"touch",3:"pen",4:"mouse"};yo.prototype.h=function(){yo.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var bo="closure_listenable_"+(1e6*Math.random()|0),xo=0;function wo(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=s,this.key=++xo,this.fa=this.ia=!1}function Eo(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function No(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function ko(e){const t={};for(const n in e)t[n]=e[n];return t}const So="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _o(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<So.length;t++)n=So[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function To(e){this.src=e,this.g={},this.h=0}function Co(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Ki(s,t);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(Eo(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Io(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.fa&&i.listener==t&&i.capture==!!n&&i.la==r)return s}return-1}To.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var o=Io(e,t,r,s);return-1<o?(t=e[o],n||(t.ia=!1)):((t=new wo(t,this.src,i,!!r,s)).ia=n,e.push(t)),t};var jo="closure_lm_"+(1e6*Math.random()|0),Ao={};function Ro(e,t,n,r,s){if(r&&r.once)return Oo(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)Ro(e,t[i],n,r,s);return null}return n=zo(n),e&&e[bo]?e.O(t,n,Ui(r)?!!r.capture:!!r,s):Po(e,t,n,!1,r,s)}function Po(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=Ui(s)?!!s.capture:!!s,a=Fo(e);if(a||(e[jo]=a=new To(e)),(n=a.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=Uo;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Ji||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(Mo(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Oo(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Oo(e,t[i],n,r,s);return null}return n=zo(n),e&&e[bo]?e.P(t,n,Ui(r)?!!r.capture:!!r,s):Po(e,t,n,!0,r,s)}function Do(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Do(e,t[i],n,r,s);else r=Ui(r)?!!r.capture:!!r,n=zo(n),e&&e[bo]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Io(i=e.g[t],n,r,s))&&(Eo(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Fo(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Io(t,n,r,s)),(n=-1<e?t[e]:null)&&Lo(n))}function Lo(e){if("number"!==typeof e&&e&&!e.fa){var t=e.src;if(t&&t[bo])Co(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Mo(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Fo(t))?(Co(n,e),0==n.h&&(n.src=null,t[jo]=null)):Eo(e)}}}function Mo(e){return e in Ao?Ao[e]:Ao[e]="on"+e}function Uo(e,t){if(e.fa)e=!0;else{t=new yo(t,this);var n=e.listener,r=e.la||e.src;e.ia&&Lo(e),e=n.call(r,t)}return e}function Fo(e){return(e=e[jo])instanceof To?e:null}var Vo="__closure_events_fn_"+(1e9*Math.random()>>>0);function zo(e){return"function"===typeof e?e:(e[Vo]||(e[Vo]=function(t){return e.handleEvent(t)}),e[Vo])}function Bo(){Wi.call(this),this.i=new To(this),this.S=this,this.J=null}function $o(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"===typeof t)t=new Xi(t,e);else if(t instanceof Xi)t.target=t.target||e;else{var s=t;_o(t=new Xi(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var o=t.g=n[i];s=qo(o,r,!0,t)&&s}if(s=qo(o=t.g=e,r,!0,t)&&s,s=qo(o,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=qo(o=t.g=n[i],r,!1,t)&&s}function qo(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var o=t[i];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&Co(e.i,o),s=!1!==a.call(l,r)&&s}}return s&&!r.defaultPrevented}Hi(Bo,Wi),Bo.prototype[bo]=!0,Bo.prototype.removeEventListener=function(e,t,n,r){Do(this,e,t,n,r)},Bo.prototype.N=function(){if(Bo.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Eo(n[r]);delete t.g[e],t.h--}}this.J=null},Bo.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Bo.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ho=Li.JSON.stringify;function Wo(){var e=Zo;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ko=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Go,e=>e.reset());class Go{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Qo(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function Xo(e){Li.setTimeout(()=>{throw e},0)}let Jo,Yo=!1,Zo=new class{constructor(){this.h=this.g=null}add(e,t){const n=Ko.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},ea=()=>{const e=Li.Promise.resolve(void 0);Jo=()=>{e.then(ta)}};var ta=()=>{for(var e;e=Wo();){try{e.h.call(e.g)}catch(n){Xo(n)}var t=Ko;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Yo=!1};function na(e,t){Bo.call(this),this.h=e||1,this.g=t||Li,this.j=$i(this.qb,this),this.l=Date.now()}function ra(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function sa(e,t,n){if("function"===typeof e)n&&(e=$i(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=$i(e.handleEvent,e)}return 2147483647<Number(t)?-1:Li.setTimeout(e,t||0)}function ia(e){e.g=sa(()=>{e.g=null,e.i&&(e.i=!1,ia(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}Hi(na,Bo),(Ri=na.prototype).ga=!1,Ri.T=null,Ri.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),$o(this,"tick"),this.ga&&(ra(this),this.start()))}},Ri.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ri.N=function(){na.$.N.call(this),ra(this),delete this.g};class oa extends Wi{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:ia(this)}N(){super.N(),this.g&&(Li.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function aa(e){Wi.call(this),this.h=e,this.g={}}Hi(aa,Wi);var la=[];function ca(e,t,n,r){Array.isArray(n)||(n&&(la[0]=n.toString()),n=la);for(var s=0;s<n.length;s++){var i=Ro(t,n[s],r||e.handleEvent,!1,e.h||e);if(!i)break;e.g[i.key]=i}}function ua(e){No(e.g,function(e,t){this.g.hasOwnProperty(t)&&Lo(e)},e),e.g={}}function da(){this.g=!0}function ha(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var o=1;o<s.length;o++)s[o]=""}}}return Ho(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}aa.prototype.N=function(){aa.$.N.call(this),ua(this)},aa.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},da.prototype.Ea=function(){this.g=!1},da.prototype.info=function(){};var fa={},pa=null;function ma(){return pa=pa||new Bo}function ga(e){Xi.call(this,fa.Ta,e)}function ya(e){const t=ma();$o(t,new ga(t))}function va(e,t){Xi.call(this,fa.STAT_EVENT,e),this.stat=t}function ba(e){const t=ma();$o(t,new va(t,e))}function xa(e,t){Xi.call(this,fa.Ua,e),this.size=t}function wa(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Li.setTimeout(function(){e()},t)}fa.Ta="serverreachability",Hi(ga,Xi),fa.STAT_EVENT="statevent",Hi(va,Xi),fa.Ua="timingevent",Hi(xa,Xi);var Ea={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Na={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ka(){}function Sa(e){return e.h||(e.h=e.i())}function _a(){}ka.prototype.h=null;var Ta,Ca={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Ia(){Xi.call(this,"d")}function ja(){Xi.call(this,"c")}function Aa(){}function Ra(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new aa(this),this.P=Oa,e=ao?125:void 0,this.V=new na(e),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Pa}function Pa(){this.i=null,this.g="",this.h=!1}Hi(Ia,Xi),Hi(ja,Xi),Hi(Aa,ka),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},Ta=new Aa;var Oa=45e3,Da={},La={};function Ma(e,t,n){e.L=1,e.v=nl(Ja(t)),e.s=n,e.S=!0,Ua(e,null)}function Ua(e,t){e.G=Date.now(),Ba(e),e.A=Ja(e.v);var n=e.A,r=e.W;Array.isArray(r)||(r=[String(r)]),ml(n.i,"t",r),e.C=0,n=e.l.J,e.h=new Pa,e.g=gc(e.l,n?t:null,!e.s),0<e.O&&(e.M=new oa($i(e.Pa,e,e.g),e.O)),ca(e.U,e.g,"readystatechange",e.nb),t=e.I?ko(e.I):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.A,e.u,e.s,t)):(e.u="GET",e.g.ha(e.A,e.u,null,t)),ya(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var o="",a=i.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&"type"==d[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.W,e.s)}function Fa(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.l.Ha)}function Va(e,t,n){let r,s=!0;for(;!e.J&&e.C<n.length;){if(r=za(e,n),r==La){4==t&&(e.o=4,ba(14),s=!1),ha(e.j,e.m,null,"[Incomplete Response]");break}if(r==Da){e.o=4,ba(15),ha(e.j,e.m,n,"[Invalid Chunk]"),s=!1;break}ha(e.j,e.m,r,null),Ka(e,r)}Fa(e)&&r!=La&&r!=Da&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ba(16),s=!1),e.i=e.i&&s,s?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),lc(t),t.M=!0,ba(11))):(ha(e.j,e.m,n,"[Invalid Chunked Response]"),Wa(e),Ha(e))}function za(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?La:(n=Number(t.substring(n,r)),isNaN(n)?Da:(r+=1)+n>t.length?La:(t=t.slice(r,r+n),e.C=r+n,t))}function Ba(e){e.Y=Date.now()+e.P,$a(e,e.P)}function $a(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=wa($i(e.lb,e),t)}function qa(e){e.B&&(Li.clearTimeout(e.B),e.B=null)}function Ha(e){0==e.l.H||e.J||dc(e.l,e)}function Wa(e){qa(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,ra(e.V),ua(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function Ka(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||El(n.i,e)))if(!e.K&&El(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(c){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;uc(n),ec(n)}ac(n),ba(18)}}else n.Fa=s[1],0<n.Fa-n.V&&37500>s[2]&&n.G&&0==n.A&&!n.v&&(n.v=wa($i(n.ib,n),6e3));if(1>=wl(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else fc(n,11)}else if((e.K||n.g==e)&&uc(n),!Yi(t))for(s=n.Ja.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const t=c[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const s=c[4];null!=s&&(n.Ga=s,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.i;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(Nl(i,i.h),i.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,tl(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var o=e;if((r=n).wa=mc(r,r.J?r.pa:null,r.Y),o.K){kl(r.i,o);var a=o,l=r.L;l&&a.setTimeout(l),a.B&&(qa(a),Ba(a)),r.g=o}else oc(r);0<n.j.length&&nc(n)}else"stop"!=c[0]&&"close"!=c[0]||fc(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?fc(n,7):Zl(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ya()}catch(c){}}function Ga(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Mi(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Mi(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Mi(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,i=0;i<s;i++)t.call(void 0,r[i],n&&n[i],e)}(Ri=Ra.prototype).setTimeout=function(e){this.P=e},Ri.nb=function(e){e=e.target;const t=this.M;t&&3==Kl(e)?t.l():this.Pa(e)},Ri.Pa=function(e){try{if(e==this.g)e:{const u=Kl(this.g);var t=this.g.Ia();this.g.da();if(!(3>u)&&(3!=u||ao||this.g&&(this.h.h||this.g.ja()||Gl(this.g)))){this.J||4!=u||7==t||ya(),qa(this);var n=this.g.da();this.ca=n;t:if(Fa(this)){var r=Gl(this.g);e="";var s=r.length,i=4==Kl(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Wa(this),Ha(this);var o="";break t}this.h.i=new Li.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:i&&t==s-1});r.splice(0,s),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,function(e,t,n,r,s,i,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+o})}(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Yi(a)){var c=a;break t}}c=null}if(!(n=c)){this.i=!1,this.o=3,ba(12),Wa(this),Ha(this);break e}ha(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ka(this,n)}this.S?(Va(this,u,o),ao&&this.i&&3==u&&(ca(this.U,this.V,"tick",this.mb),this.V.start())):(ha(this.j,this.m,o,null),Ka(this,o)),4==u&&Wa(this),this.i&&!this.J&&(4==u?dc(this.l,this):(this.i=!1,Ba(this)))}else(function(e){const t={};e=(e.g&&2<=Kl(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(Yi(e[r]))continue;var n=Qo(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.o=3,ba(12)):(this.o=0,ba(13)),Wa(this),Ha(this)}}}catch(u){}},Ri.mb=function(){if(this.g){var e=Kl(this.g),t=this.g.ja();this.C<t.length&&(qa(this),Va(this,e,t),this.i&&4!=e&&Ba(this))}},Ri.cancel=function(){this.J=!0,Wa(this)},Ri.lb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.L&&(ya(),ba(17)),Wa(this),this.o=2,Ha(this)):$a(this,this.Y-e)};var Qa=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xa(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Xa){this.h=e.h,Ya(this,e.j),this.s=e.s,this.g=e.g,Za(this,e.m),this.l=e.l;var t=e.i,n=new dl;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),el(this,n),this.o=e.o}else e&&(t=String(e).match(Qa))?(this.h=!1,Ya(this,t[1]||"",!0),this.s=rl(t[2]||""),this.g=rl(t[3]||"",!0),Za(this,t[4]),this.l=rl(t[5]||"",!0),el(this,t[6]||"",!0),this.o=rl(t[7]||"")):(this.h=!1,this.i=new dl(null,this.h))}function Ja(e){return new Xa(e)}function Ya(e,t,n){e.j=n?rl(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Za(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function el(e,t,n){t instanceof dl?(e.i=t,function(e,t){t&&!e.j&&(hl(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(fl(this,t),ml(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=sl(t,cl)),e.i=new dl(t,e.h))}function tl(e,t,n){e.i.set(t,n)}function nl(e){return tl(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function rl(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function sl(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,il),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function il(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Xa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(sl(t,ol,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(sl(t,ol,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(sl(n,"/"==n.charAt(0)?ll:al,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",sl(n,ul)),e.join("")};var ol=/[#\/\?@]/g,al=/[#\?:]/g,ll=/[#\?]/g,cl=/[#\?@]/g,ul=/#/g;function dl(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function hl(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function fl(e,t){hl(e),t=gl(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function pl(e,t){return hl(e),t=gl(e,t),e.g.has(t)}function ml(e,t,n){fl(e,t),0<n.length&&(e.i=null,e.g.set(gl(e,t),Gi(n)),e.h+=n.length)}function gl(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Ri=dl.prototype).add=function(e,t){hl(this),this.i=null,e=gl(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Ri.forEach=function(e,t){hl(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},Ri.ta=function(){hl(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},Ri.Z=function(e){hl(this);let t=[];if("string"===typeof e)pl(this,e)&&(t=t.concat(this.g.get(gl(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},Ri.set=function(e,t){return hl(this),this.i=null,pl(this,e=gl(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Ri.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},Ri.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var s=i;""!==o[r]&&(s+="="+encodeURIComponent(String(o[r]))),e.push(s)}}return this.i=e.join("&")};var yl=class{constructor(e,t){this.g=e,this.map=t}};function vl(e){this.l=e||bl,Li.PerformanceNavigationTiming?e=0<(e=Li.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Li.g&&Li.g.Ka&&Li.g.Ka()&&Li.g.Ka().ec),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var bl=10;function xl(e){return!!e.h||!!e.g&&e.g.size>=e.j}function wl(e){return e.h?1:e.g?e.g.size:0}function El(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function Nl(e,t){e.g?e.g.add(t):e.h=t}function kl(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Sl(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return Gi(e.i)}vl.prototype.cancel=function(){if(this.i=Sl(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var _l,Tl=class{stringify(e){return Li.JSON.stringify(e,void 0)}parse(e){return Li.JSON.parse(e,void 0)}};function Cl(){this.g=new Tl}function Il(e,t,n){const r=n||"";try{Ga(e,function(e,n){let s=e;Ui(e)&&(s=Ho(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(Uw){throw t.push(r+"type="+encodeURIComponent("_badmap")),Uw}}function jl(e,t,n,r,s){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,s(r)}catch(i){}}function Al(e){this.l=e.fc||null,this.j=e.ob||!1}function Rl(e,t){Bo.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=Pl,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Hi(Al,ka),Al.prototype.g=function(){return new Rl(this.l,this.j)},Al.prototype.i=(_l={},function(){return _l}),Hi(Rl,Bo);var Pl=0;function Ol(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function Dl(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Ll(e)}function Ll(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Ri=Rl.prototype).open=function(e,t){if(this.readyState!=Pl)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Ll(this)},Ri.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||Li).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},Ri.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dl(this)),this.readyState=Pl},Ri.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Ll(this)),this.g&&(this.readyState=3,Ll(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof Li.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ol(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},Ri.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Dl(this):Ll(this),3==this.readyState&&Ol(this)}},Ri.Za=function(e){this.g&&(this.response=this.responseText=e,Dl(this))},Ri.Ya=function(e){this.g&&(this.response=e,Dl(this))},Ri.ka=function(){this.g&&Dl(this)},Ri.setRequestHeader=function(e,t){this.v.append(e,t)},Ri.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Ri.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Rl.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ml=Li.JSON.parse;function Ul(e){Bo.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Fl,this.L=this.M=!1}Hi(Ul,Bo);var Fl="",Vl=/^https?$/i,zl=["POST","PUT"];function Bl(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,$l(e),Hl(e)}function $l(e){e.F||(e.F=!0,$o(e,"complete"),$o(e,"error"))}function ql(e){if(e.h&&"undefined"!=typeof Di&&(!e.C[1]||4!=Kl(e)||2!=e.da()))if(e.v&&4==Kl(e))sa(e.La,0,e);else if($o(e,"readystatechange"),4==Kl(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var s=String(e.I).match(Qa)[1]||null;!s&&Li.self&&Li.self.location&&(s=Li.self.location.protocol.slice(0,-1)),r=!Vl.test(s?s.toLowerCase():"")}n=r}if(n)$o(e,"complete"),$o(e,"success");else{e.m=6;try{var i=2<Kl(e)?e.g.statusText:""}catch(o){i=""}e.j=i+" ["+e.da()+"]",$l(e)}}finally{Hl(e)}}}function Hl(e,t){if(e.g){Wl(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||$o(e,"ready");try{n.onreadystatechange=r}catch(Uw){}}}function Wl(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(Li.clearTimeout(e.A),e.A=null)}function Kl(e){return e.g?e.g.readyState:0}function Gl(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case Fl:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Zc){return null}}function Ql(e){let t="";return No(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Xl(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ql(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):tl(e,t,n))}function Jl(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Yl(e){this.Ga=0,this.j=[],this.l=new da,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Jl("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Jl("baseRetryDelayMs",5e3,e),this.hb=Jl("retryDelaySeedMs",1e4,e),this.eb=Jl("forwardChannelMaxRetries",2,e),this.xa=Jl("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.dc||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new vl(e&&e.concurrentRequestLimit),this.Ja=new Cl,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Zl(e){if(tc(e),3==e.H){var t=e.W++,n=Ja(e.I);if(tl(n,"SID",e.K),tl(n,"RID",t),tl(n,"TYPE","terminate"),sc(e,n),(t=new Ra(e,e.l,t)).L=2,t.v=nl(Ja(n)),n=!1,Li.navigator&&Li.navigator.sendBeacon)try{n=Li.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&Li.Image&&((new Image).src=t.v,n=!0),n||(t.g=gc(t.l,null),t.g.ha(t.v)),t.G=Date.now(),Ba(t)}pc(e)}function ec(e){e.g&&(lc(e),e.g.cancel(),e.g=null)}function tc(e){ec(e),e.u&&(Li.clearTimeout(e.u),e.u=null),uc(e),e.i.cancel(),e.m&&("number"===typeof e.m&&Li.clearTimeout(e.m),e.m=null)}function nc(e){if(!xl(e.i)&&!e.m){e.m=!0;var t=e.Na;Jo||ea(),Yo||(Jo(),Yo=!0),Zo.add(t,e),e.C=0}}function rc(e,t){var n;n=t?t.m:e.W++;const r=Ja(e.I);tl(r,"SID",e.K),tl(r,"RID",n),tl(r,"AID",e.V),sc(e,r),e.o&&e.s&&Xl(r,e.o,e.s),n=new Ra(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=ic(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),Nl(e.i,n),Ma(n,r,t)}function sc(e,t){e.na&&No(e.na,function(e,n){tl(t,n,e)}),e.h&&Ga({},function(e,n){tl(t,n,e)})}function ic(e,t,n){n=Math.min(e.j.length,n);var r=e.h?$i(e.h.Va,e.h,e):null;e:{var s=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let i=!0;for(let o=0;o<n;o++){let n=s[o].g;const a=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),i=!1;else try{Il(a,e,"req"+n+"_")}catch(uu){r&&r(a)}}if(i){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function oc(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;Jo||ea(),Yo||(Jo(),Yo=!0),Zo.add(t,e),e.A=0}}function ac(e){return!(e.g||e.u||3<=e.A)&&(e.ba++,e.u=wa($i(e.Ma,e),hc(e,e.A)),e.A++,!0)}function lc(e){null!=e.B&&(Li.clearTimeout(e.B),e.B=null)}function cc(e){e.g=new Ra(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=Ja(e.wa);tl(t,"RID","rpc"),tl(t,"SID",e.K),tl(t,"AID",e.V),tl(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&tl(t,"TO",e.qa),tl(t,"TYPE","xmlhttp"),sc(e,t),e.o&&e.s&&Xl(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.v=nl(Ja(t)),n.s=null,n.S=!0,Ua(n,e)}function uc(e){null!=e.v&&(Li.clearTimeout(e.v),e.v=null)}function dc(e,t){var n=null;if(e.g==t){uc(e),lc(e),e.g=null;var r=2}else{if(!El(e.i,t))return;n=t.F,kl(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.G;var s=e.C;$o(r=ma(),new xa(r,n)),nc(e)}else oc(e);else if(3==(s=t.o)||0==s&&0<t.ca||!(1==r&&function(e,t){return!(wl(e.i)>=e.i.j-(e.m?1:0))&&(e.m?(e.j=t.F.concat(e.j),!0):!(1==e.H||2==e.H||e.C>=(e.cb?0:e.eb))&&(e.m=wa($i(e.Na,e,t),hc(e,e.C)),e.C++,!0))}(e,t)||2==r&&ac(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),s){case 1:fc(e,5);break;case 4:fc(e,10);break;case 3:fc(e,6);break;default:fc(e,2)}}function hc(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function fc(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=$i(e.pb,e);n||(n=new Xa("//www.google.com/images/cleardot.gif"),Li.location&&"http"==Li.location.protocol||Ya(n,"https"),nl(n)),function(e,t){const n=new da;if(Li.Image){const r=new Image;r.onload=qi(jl,n,r,"TestLoadImage: loaded",!0,t),r.onerror=qi(jl,n,r,"TestLoadImage: error",!1,t),r.onabort=qi(jl,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=qi(jl,n,r,"TestLoadImage: timeout",!1,t),Li.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else ba(2);e.H=0,e.h&&e.h.za(t),pc(e),tc(e)}function pc(e){if(e.H=0,e.ma=[],e.h){const t=Sl(e.i);0==t.length&&0==e.j.length||(Qi(e.ma,t),Qi(e.ma,e.j),e.i.i.length=0,Gi(e.j),e.j.length=0),e.h.ya()}}function mc(e,t,n){var r=n instanceof Xa?Ja(n):new Xa(n);if(""!=r.g)t&&(r.g=t+"."+r.g),Za(r,r.m);else{var s=Li.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var i=new Xa(null);r&&Ya(i,r),t&&(i.g=t),s&&Za(i,s),n&&(i.l=n),r=i}return n=e.F,t=e.Da,n&&t&&tl(r,n,t),tl(r,"VER",e.ra),sc(e,r),r}function gc(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Ha&&!e.va?new Ul(new Al({ob:!0})):new Ul(e.va)).Oa(e.J),t}function yc(){}function vc(){if(io&&!(10<=Number(go)))throw Error("Environmental error: no available transport.")}function bc(e,t){Bo.call(this),this.g=new Yl(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!Yi(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Yi(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Ec(this)}function xc(e){Ia.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function wc(){ja.call(this),this.status=1}function Ec(e){this.g=e}function Nc(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function kc(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],o=t+(i^n&(s^i))+r[0]+3614090360&4294967295;o=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(o<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|o>>>10))+((o=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|o>>>25))+((o=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|o>>>20))+((o=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|o>>>15))+((o=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|o>>>10))+((o=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|o>>>12))+((o=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|o>>>27))+((o=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|o>>>23))+((o=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|o>>>18))+((o=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|o>>>12))+((o=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|o>>>9))+((o=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|o>>>28))+((o=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|o>>>21))+((o=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|o>>>16))+((o=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|o>>>9))+((o=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|o>>>11))+((o=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|o>>>22))+((o=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|o>>>17))+((o=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|o>>>11))+((i=(t=n+((o=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|o>>>26))+((o=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|o>>>22))^((s=i+((o=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|o>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(o<<21&4294967295|o>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function Sc(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}(Ri=Ul.prototype).Oa=function(e){this.M=e},Ri.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ta.g(),this.C=this.u?Sa(this.u):Sa(Ta),this.g.onreadystatechange=$i(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(i){return void Bl(this,i)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=Li.FormData&&e instanceof Li.FormData,!(0<=Ki(zl,t))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Wl(this),0<this.B&&((this.L=function(e){return io&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=$i(this.ua,this)):this.A=sa(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(i){Bl(this,i)}},Ri.ua=function(){"undefined"!=typeof Di&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,$o(this,"timeout"),this.abort(8))},Ri.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,$o(this,"complete"),$o(this,"abort"),Hl(this))},Ri.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Hl(this,!0)),Ul.$.N.call(this)},Ri.La=function(){this.s||(this.G||this.v||this.l?ql(this):this.kb())},Ri.kb=function(){ql(this)},Ri.isActive=function(){return!!this.g},Ri.da=function(){try{return 2<Kl(this)?this.g.status:-1}catch(_l){return-1}},Ri.ja=function(){try{return this.g?this.g.responseText:""}catch(_l){return""}},Ri.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ml(t)}},Ri.Ia=function(){return this.m},Ri.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Ri=Yl.prototype).ra=8,Ri.H=1,Ri.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const s=new Ra(this,this.l,e);let i=this.s;if(this.U&&(i?(i=ko(i),_o(i,this.U)):i=this.U),null!==this.o||this.O||(s.I=i,i=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=ic(this,s,t),tl(n=Ja(this.I),"RID",e),tl(n,"CVER",22),this.F&&tl(n,"X-HTTP-Session-Id",this.F),sc(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ql(i)))+"&"+t:this.o&&Xl(n,this.o,i)),Nl(this.i,s),this.bb&&tl(n,"TYPE","init"),this.P?(tl(n,"$req",t),tl(n,"SID","null"),s.aa=!0,Ma(s,n,null)):Ma(s,n,t),this.H=2}}else 3==this.H&&(e?rc(this,e):0==this.j.length||xl(this.i)||rc(this))},Ri.Ma=function(){if(this.u=null,cc(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=wa($i(this.jb,this),e)}},Ri.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ba(10),ec(this),cc(this))},Ri.ib=function(){null!=this.v&&(this.v=null,ec(this),ac(this),ba(19))},Ri.pb=function(e){e?(this.l.info("Successfully pinged google.com"),ba(2)):(this.l.info("Failed to ping google.com"),ba(1))},Ri.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ri=yc.prototype).Ba=function(){},Ri.Aa=function(){},Ri.za=function(){},Ri.ya=function(){},Ri.isActive=function(){return!0},Ri.Va=function(){},vc.prototype.g=function(e,t){return new bc(e,t)},Hi(bc,Bo),bc.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;ba(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=mc(e,null,e.Y),nc(e)},bc.prototype.close=function(){Zl(this.g)},bc.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ho(e),e=n);t.j.push(new yl(t.fb++,e)),3==t.H&&nc(t)},bc.prototype.N=function(){this.g.h=null,delete this.j,Zl(this.g),delete this.g,bc.$.N.call(this)},Hi(xc,Ia),Hi(wc,ja),Hi(Ec,yc),Ec.prototype.Ba=function(){$o(this.g,"a")},Ec.prototype.Aa=function(e){$o(this.g,new xc(e))},Ec.prototype.za=function(e){$o(this.g,new wc)},Ec.prototype.ya=function(){$o(this.g,"b")},Hi(Nc,function(){this.blockSize=-1}),Nc.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Nc.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,s=this.h,i=0;i<t;){if(0==s)for(;i<=n;)kc(this,e,i),i+=this.blockSize;if("string"===typeof e){for(;i<t;)if(r[s++]=e.charCodeAt(i++),s==this.blockSize){kc(this,r),s=0;break}}else for(;i<t;)if(r[s++]=e[i++],s==this.blockSize){kc(this,r),s=0;break}}this.h=s,this.i+=t},Nc.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var _c={};function Tc(e){return-128<=e&&128>e?function(e,t){var n=_c;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new Sc([0|e],0>e?-1:0)}):new Sc([0|e],0>e?-1:0)}function Cc(e){if(isNaN(e)||!isFinite(e))return jc;if(0>e)return Dc(Cc(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=Ic;return new Sc(t,0)}var Ic=4294967296,jc=Tc(0),Ac=Tc(1),Rc=Tc(16777216);function Pc(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function Oc(e){return-1==e.h}function Dc(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new Sc(n,~e.h).add(Ac)}function Lc(e,t){return e.add(Dc(t))}function Mc(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function Uc(e,t){this.g=e,this.h=t}function Fc(e,t){if(Pc(t))throw Error("division by zero");if(Pc(e))return new Uc(jc,jc);if(Oc(e))return t=Fc(Dc(e),t),new Uc(Dc(t.g),Dc(t.h));if(Oc(t))return t=Fc(e,Dc(t)),new Uc(Dc(t.g),t.h);if(30<e.g.length){if(Oc(e)||Oc(t))throw Error("slowDivide_ only works with positive integers.");for(var n=Ac,r=t;0>=r.X(e);)n=Vc(n),r=Vc(r);var s=zc(n,1),i=zc(r,1);for(r=zc(r,2),n=zc(n,2);!Pc(r);){var o=i.add(r);0>=o.X(e)&&(s=s.add(n),i=o),r=zc(r,1),n=zc(n,1)}return t=Lc(e,s.R(t)),new Uc(s,t)}for(s=jc;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),o=(i=Cc(n)).R(t);Oc(o)||0<o.X(e);)o=(i=Cc(n-=r)).R(t);Pc(i)&&(i=Ac),s=s.add(i),e=Lc(e,o)}return new Uc(s,e)}function Vc(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new Sc(n,e.h)}function zc(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,s=[],i=0;i<r;i++)s[i]=0<t?e.D(i+n)>>>t|e.D(i+n+1)<<32-t:e.D(i+n);return new Sc(s,e.h)}(Ri=Sc.prototype).ea=function(){if(Oc(this))return-Dc(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:Ic+r)*t,t*=Ic}return e},Ri.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(Pc(this))return"0";if(Oc(this))return"-"+Dc(this).toString(e);for(var t=Cc(Math.pow(e,6)),n=this,r="";;){var s=Fc(n,t).g,i=((0<(n=Lc(n,s.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(Pc(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},Ri.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},Ri.X=function(e){return Oc(e=Lc(this,e))?-1:Pc(e)?0:1},Ri.abs=function(){return Oc(this)?Dc(this):this},Ri.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,s=0;s<=t;s++){var i=r+(65535&this.D(s))+(65535&e.D(s)),o=(i>>>16)+(this.D(s)>>>16)+(e.D(s)>>>16);r=o>>>16,i&=65535,o&=65535,n[s]=o<<16|i}return new Sc(n,-2147483648&n[n.length-1]?-1:0)},Ri.R=function(e){if(Pc(this)||Pc(e))return jc;if(Oc(this))return Oc(e)?Dc(this).R(Dc(e)):Dc(Dc(this).R(e));if(Oc(e))return Dc(this.R(Dc(e)));if(0>this.X(Rc)&&0>e.X(Rc))return Cc(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var s=0;s<e.g.length;s++){var i=this.D(r)>>>16,o=65535&this.D(r),a=e.D(s)>>>16,l=65535&e.D(s);n[2*r+2*s]+=o*l,Mc(n,2*r+2*s),n[2*r+2*s+1]+=i*l,Mc(n,2*r+2*s+1),n[2*r+2*s+1]+=o*a,Mc(n,2*r+2*s+1),n[2*r+2*s+2]+=i*a,Mc(n,2*r+2*s+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new Sc(n,0)},Ri.gb=function(e){return Fc(this,e).h},Ri.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new Sc(n,this.h&e.h)},Ri.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new Sc(n,this.h|e.h)},Ri.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new Sc(n,this.h^e.h)},vc.prototype.createWebChannel=vc.prototype.g,bc.prototype.send=bc.prototype.u,bc.prototype.open=bc.prototype.m,bc.prototype.close=bc.prototype.close,Ea.NO_ERROR=0,Ea.TIMEOUT=8,Ea.HTTP_ERROR=6,Na.COMPLETE="complete",_a.EventType=Ca,Ca.OPEN="a",Ca.CLOSE="b",Ca.ERROR="c",Ca.MESSAGE="d",Bo.prototype.listen=Bo.prototype.O,Ul.prototype.listenOnce=Ul.prototype.P,Ul.prototype.getLastError=Ul.prototype.Sa,Ul.prototype.getLastErrorCode=Ul.prototype.Ia,Ul.prototype.getStatus=Ul.prototype.da,Ul.prototype.getResponseJson=Ul.prototype.Wa,Ul.prototype.getResponseText=Ul.prototype.ja,Ul.prototype.send=Ul.prototype.ha,Ul.prototype.setWithCredentials=Ul.prototype.Oa,Nc.prototype.digest=Nc.prototype.l,Nc.prototype.reset=Nc.prototype.reset,Nc.prototype.update=Nc.prototype.j,Sc.prototype.add=Sc.prototype.add,Sc.prototype.multiply=Sc.prototype.R,Sc.prototype.modulo=Sc.prototype.gb,Sc.prototype.compare=Sc.prototype.X,Sc.prototype.toNumber=Sc.prototype.ea,Sc.prototype.toString=Sc.prototype.toString,Sc.prototype.getBits=Sc.prototype.D,Sc.fromNumber=Cc,Sc.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return Dc(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=Cc(Math.pow(n,8)),s=jc,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),a=parseInt(t.substring(i,i+o),n);8>o?(o=Cc(Math.pow(n,o)),s=s.R(o).add(Cc(a))):s=(s=s.R(r)).add(Cc(a))}return s};var Bc=Oi.createWebChannelTransport=function(){return new vc},$c=Oi.getStatEventTarget=function(){return ma()},qc=Oi.ErrorCode=Ea,Hc=Oi.EventType=Na,Wc=Oi.Event=fa,Kc=Oi.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Gc=Oi.FetchXmlHttpFactory=Al,Qc=Oi.WebChannel=_a,Xc=Oi.XhrIo=Ul,Jc=Oi.Md5=Nc,Yc=Oi.Integer=Sc;const Zc="@firebase/firestore";class eu{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}eu.UNAUTHENTICATED=new eu(null),eu.GOOGLE_CREDENTIALS=new eu("google-credentials-uid"),eu.FIRST_PARTY=new eu("first-party-uid"),eu.MOCK_USER=new eu("mock-user");let tu="9.23.0";const nu=new mt("@firebase/firestore");function ru(){return nu.logLevel}function su(e){if(nu.logLevel<=ut.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(au);nu.debug(`Firestore (${tu}): ${e}`,...s)}}function iu(e){if(nu.logLevel<=ut.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(au);nu.error(`Firestore (${tu}): ${e}`,...s)}}function ou(e){if(nu.logLevel<=ut.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(au);nu.warn(`Firestore (${tu}): ${e}`,...s)}}function au(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function lu(){const e=`FIRESTORE (${tu}) INTERNAL ASSERTION FAILED: `+(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state");throw iu(e),new Error(e)}function cu(e,t){e||lu()}function uu(e,t){return e}const du={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class hu extends Ge{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class fu{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class pu{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class mu{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(eu.UNAUTHENTICATED))}shutdown(){}}class gu{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class yu{constructor(e){this.t=e,this.currentUser=eu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new fu;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new fu,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{su("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),i()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(su("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new fu)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(su("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(cu("string"==typeof t.accessToken),new pu(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return cu(null===e||"string"==typeof e),new eu(e)}}class vu{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=eu.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class bu{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new vu(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(eu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xu{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class wu{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const n=e=>{null!=e.error&&su("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.T;return this.T=e.token,su("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{su("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.I.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.I.getImmediate({optional:!0});e?r(e):su("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(cu("string"==typeof e.token),this.T=e.token,new xu(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Eu(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Nu{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=Eu(40);for(let s=0;s<r.length;++s)n.length<20&&r[s]<t&&(n+=e.charAt(r[s]%62))}return n}}function ku(e,t){return e<t?-1:e>t?1:0}function Su(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}class _u{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new hu(du.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new hu(du.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new hu(du.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new hu(du.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return _u.fromMillis(Date.now())}static fromDate(e){return _u.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new _u(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ku(this.nanoseconds,e.nanoseconds):ku(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Tu{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Tu(e)}static min(){return new Tu(new _u(0,0))}static max(){return new Tu(new _u(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Cu{constructor(e,t,n){void 0===t?t=0:t>e.length&&lu(),void 0===n?n=e.length-t:n>e.length-t&&lu(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Cu.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Cu?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),s=t.get(r);if(n<s)return-1;if(n>s)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Iu extends Cu{construct(e,t,n){return new Iu(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new hu(du.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);e.push(...s.split("/").filter(e=>e.length>0))}return new Iu(e)}static emptyPath(){return new Iu([])}}const ju=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Au extends Cu{construct(e,t,n){return new Au(e,t,n)}static isValidIdentifier(e){return ju.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Au.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Au(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new hu(du.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new hu(du.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new hu(du.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new hu(du.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Au(t)}static emptyPath(){return new Au([])}}class Ru{constructor(e){this.path=e}static fromPath(e){return new Ru(Iu.fromString(e))}static fromName(e){return new Ru(Iu.fromString(e).popFirst(5))}static empty(){return new Ru(Iu.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Iu.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Iu.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ru(new Iu(e.slice()))}}class Pu{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}Pu.UNKNOWN_ID=-1;function Ou(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=Tu.fromTimestamp(1e9===r?new _u(n+1,0):new _u(n,r));return new Lu(s,Ru.empty(),t)}function Du(e){return new Lu(e.readTime,e.key,-1)}class Lu{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new Lu(Tu.min(),Ru.empty(),-1)}static max(){return new Lu(Tu.max(),Ru.empty(),-1)}}function Mu(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=Ru.comparator(e.documentKey,t.documentKey),0!==n?n:ku(e.largestBatchId,t.largestBatchId))}const Uu="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Vu(e){if(e.code!==du.FAILED_PRECONDITION||e.message!==Uu)throw e;su("LocalStore","Unexpectedly lost primary lease")}class zu{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&lu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new zu((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof zu?t:zu.resolve(t)}catch(e){return zu.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):zu.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):zu.reject(t)}static resolve(e){return new zu((t,n)=>{t(e)})}static reject(e){return new zu((t,n)=>{n(e)})}static waitFor(e){return new zu((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=zu.resolve(!1);for(const n of e)t=t.next(e=>e?zu.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new zu((n,r)=>{const s=e.length,i=new Array(s);let o=0;for(let a=0;a<s;a++){const l=a;t(e[l]).next(e=>{i[l]=e,++o,o===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new zu((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function Bu(e){return"IndexedDbTransactionError"===e.name}class $u{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ot(e),this.ut=e=>t.writeSequenceNumber(e))}ot(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ut&&this.ut(e),e}}function qu(e){return null==e}function Hu(e){return 0===e&&1/e==-1/0}function Wu(e){return"number"==typeof e&&Number.isInteger(e)&&!Hu(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}$u.ct=-1;const Ku=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Gu=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Qu=Gu;function Xu(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Ju(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Yu(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Zu{constructor(e,t){this.comparator=e,this.root=t||td.EMPTY}insert(e,t){return new Zu(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,td.BLACK,null,null))}remove(e){return new Zu(this.comparator,this.root.remove(e,this.comparator).copy(null,null,td.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ed(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ed(this.root,e,this.comparator,!1)}getReverseIterator(){return new ed(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ed(this.root,e,this.comparator,!0)}}class ed{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class td{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:td.RED,this.left=null!=r?r:td.EMPTY,this.right=null!=s?s:td.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new td(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return td.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return td.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,td.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,td.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw lu();if(this.right.isRed())throw lu();const e=this.left.check();if(e!==this.right.check())throw lu();return e+(this.isRed()?0:1)}}td.EMPTY=null,td.RED=!0,td.BLACK=!1,td.EMPTY=new class{constructor(){this.size=0}get key(){throw lu()}get value(){throw lu()}get color(){throw lu()}get left(){throw lu()}get right(){throw lu()}copy(e,t,n,r,s){return this}insert(e,t,n){return new td(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class nd{constructor(e){this.comparator=e,this.data=new Zu(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new rd(this.data.getIterator())}getIteratorFrom(e){return new rd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof nd))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new nd(this.comparator);return t.data=e,t}}class rd{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class sd{constructor(e){this.fields=e,e.sort(Au.comparator)}static empty(){return new sd([])}unionWith(e){let t=new nd(Au.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new sd(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Su(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class id extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class od{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new id("Invalid base64 string: "+e):e}}(e);return new od(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new od(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ku(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}od.EMPTY_BYTE_STRING=new od("");const ad=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ld(e){if(cu(!!e),"string"==typeof e){let t=0;const n=ad.exec(e);if(cu(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:cd(e.seconds),nanos:cd(e.nanos)}}function cd(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function ud(e){return"string"==typeof e?od.fromBase64String(e):od.fromUint8Array(e)}function dd(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function hd(e){const t=e.mapValue.fields.__previous_value__;return dd(t)?hd(t):t}function fd(e){const t=ld(e.mapValue.fields.__local_write_time__.timestampValue);return new _u(t.seconds,t.nanos)}class pd{constructor(e,t,n,r,s,i,o,a,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class md{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new md("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof md&&e.projectId===this.projectId&&e.database===this.database}}const gd={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function yd(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?dd(e)?4:Ad(e)?9007199254740991:10:lu()}function vd(e,t){if(e===t)return!0;const n=yd(e);if(n!==yd(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return fd(e).isEqual(fd(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ld(e.timestampValue),r=ld(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return ud(e.bytesValue).isEqual(ud(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return cd(e.geoPointValue.latitude)===cd(t.geoPointValue.latitude)&&cd(e.geoPointValue.longitude)===cd(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return cd(e.integerValue)===cd(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=cd(e.doubleValue),r=cd(t.doubleValue);return n===r?Hu(n)===Hu(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Su(e.arrayValue.values||[],t.arrayValue.values||[],vd);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Xu(n)!==Xu(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!vd(n[s],r[s])))return!1;return!0}(e,t);default:return lu()}}function bd(e,t){return void 0!==(e.values||[]).find(e=>vd(e,t))}function xd(e,t){if(e===t)return 0;const n=yd(e),r=yd(t);if(n!==r)return ku(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ku(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=cd(e.integerValue||e.doubleValue),r=cd(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return wd(e.timestampValue,t.timestampValue);case 4:return wd(fd(e),fd(t));case 5:return ku(e.stringValue,t.stringValue);case 6:return function(e,t){const n=ud(e),r=ud(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=ku(n[s],r[s]);if(0!==e)return e}return ku(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=ku(cd(e.latitude),cd(t.latitude));return 0!==n?n:ku(cd(e.longitude),cd(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=xd(n[s],r[s]);if(e)return e}return ku(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===gd.mapValue&&t===gd.mapValue)return 0;if(e===gd.mapValue)return 1;if(t===gd.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let o=0;o<r.length&&o<i.length;++o){const e=ku(r[o],i[o]);if(0!==e)return e;const t=xd(n[r[o]],s[i[o]]);if(0!==t)return t}return ku(r.length,i.length)}(e.mapValue,t.mapValue);default:throw lu()}}function wd(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ku(e,t);const n=ld(e),r=ld(t),s=ku(n.seconds,r.seconds);return 0!==s?s:ku(n.nanos,r.nanos)}function Ed(e){return Nd(e)}function Nd(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ld(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?ud(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,Ru.fromName(n).toString()):"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Nd(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+=`${s}:${Nd(e.fields[s])}`;return n+"}"}(e.mapValue):lu();var t,n}function kd(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function Sd(e){return!!e&&"integerValue"in e}function _d(e){return!!e&&"arrayValue"in e}function Td(e){return!!e&&"nullValue"in e}function Cd(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Id(e){return!!e&&"mapValue"in e}function jd(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Ju(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=jd(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=jd(e.arrayValue.values[n]);return t}return Object.assign({},e)}function Ad(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}class Rd{constructor(e){this.value=e}static empty(){return new Rd({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Id(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=jd(t)}setAll(e){let t=Au.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=jd(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Id(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return vd(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Id(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Ju(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new Rd(jd(this.value))}}function Pd(e){const t=[];return Ju(e.fields,(e,n)=>{const r=new Au([e]);if(Id(n)){const e=Pd(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new sd(t)}class Od{constructor(e,t,n,r,s,i,o){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=o}static newInvalidDocument(e){return new Od(e,0,Tu.min(),Tu.min(),Tu.min(),Rd.empty(),0)}static newFoundDocument(e,t,n,r){return new Od(e,1,t,Tu.min(),n,r,0)}static newNoDocument(e,t){return new Od(e,2,t,Tu.min(),Tu.min(),Rd.empty(),0)}static newUnknownDocument(e,t){return new Od(e,3,t,Tu.min(),Tu.min(),Rd.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Tu.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Rd.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Rd.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Tu.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Od&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Od(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Dd{constructor(e,t){this.position=e,this.inclusive=t}}function Ld(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],o=e.position[s];if(r=i.field.isKeyField()?Ru.comparator(Ru.fromName(o.referenceValue),n.key):xd(o,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function Md(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!vd(e.position[n],t.position[n]))return!1;return!0}class Ud{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function Fd(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class Vd{}class zd extends Vd{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new Qd(e,t,n):"array-contains"===t?new Zd(e,n):"in"===t?new eh(e,n):"not-in"===t?new th(e,n):"array-contains-any"===t?new nh(e,n):new zd(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Xd(e,n):new Jd(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(xd(t,this.value)):null!==t&&yd(this.value)===yd(t)&&this.matchesComparison(xd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return lu()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Bd extends Vd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new Bd(e,t)}matches(e){return $d(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(e=>e.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function $d(e){return"and"===e.op}function qd(e){return Hd(e)&&$d(e)}function Hd(e){for(const t of e.filters)if(t instanceof Bd)return!1;return!0}function Wd(e){if(e instanceof zd)return e.field.canonicalString()+e.op.toString()+Ed(e.value);if(qd(e))return e.filters.map(e=>Wd(e)).join(",");{const t=e.filters.map(e=>Wd(e)).join(",");return`${e.op}(${t})`}}function Kd(e,t){return e instanceof zd?function(e,t){return t instanceof zd&&e.op===t.op&&e.field.isEqual(t.field)&&vd(e.value,t.value)}(e,t):e instanceof Bd?function(e,t){return t instanceof Bd&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Kd(n,t.filters[r]),!0)}(e,t):void lu()}function Gd(e){return e instanceof zd?function(e){return`${e.field.canonicalString()} ${e.op} ${Ed(e.value)}`}(e):e instanceof Bd?function(e){return e.op.toString()+" {"+e.getFilters().map(Gd).join(" ,")+"}"}(e):"Filter"}class Qd extends zd{constructor(e,t,n){super(e,t,n),this.key=Ru.fromName(n.referenceValue)}matches(e){const t=Ru.comparator(e.key,this.key);return this.matchesComparison(t)}}class Xd extends zd{constructor(e,t){super(e,"in",t),this.keys=Yd("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Jd extends zd{constructor(e,t){super(e,"not-in",t),this.keys=Yd("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Yd(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>Ru.fromName(e.referenceValue))}class Zd extends zd{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return _d(t)&&bd(t.arrayValue,this.value)}}class eh extends zd{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&bd(this.value.arrayValue,t)}}class th extends zd{constructor(e,t){super(e,"not-in",t)}matches(e){if(bd(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!bd(this.value.arrayValue,t)}}class nh extends zd{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!_d(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>bd(this.value.arrayValue,e))}}class rh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=o,this.dt=null}}function sh(e){return new rh(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function ih(e){const t=uu(e);if(null===t.dt){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>Wd(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),qu(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Ed(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Ed(e)).join(",")),t.dt=e}return t.dt}function oh(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!Fd(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Kd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Md(e.startAt,t.startAt)&&Md(e.endAt,t.endAt)}function ah(e){return Ru.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class lh{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=o,this.endAt=a,this.wt=null,this._t=null,this.startAt,this.endAt}}function ch(e,t,n,r,s,i,o,a){return new lh(e,t,n,r,s,i,o,a)}function uh(e){return new lh(e)}function dh(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function hh(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function fh(e){for(const t of e.filters){const e=t.getFirstInequalityField();if(null!==e)return e}return null}function ph(e){return null!==e.collectionGroup}function mh(e){const t=uu(e);if(null===t.wt){t.wt=[];const e=fh(t),n=hh(t);if(null!==e&&null===n)e.isKeyField()||t.wt.push(new Ud(e)),t.wt.push(new Ud(Au.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.wt.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.wt.push(new Ud(Au.keyField(),e))}}}return t.wt}function gh(e){const t=uu(e);if(!t._t)if("F"===t.limitType)t._t=sh(t.path,t.collectionGroup,mh(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const s of mh(t)){const t="desc"===s.dir?"asc":"desc";e.push(new Ud(s.field,t))}const n=t.endAt?new Dd(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Dd(t.startAt.position,t.startAt.inclusive):null;t._t=sh(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t._t}function yh(e,t){t.getFirstInequalityField(),fh(e);const n=e.filters.concat([t]);return new lh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function vh(e,t,n){return new lh(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function bh(e,t){return oh(gh(e),gh(t))&&e.limitType===t.limitType}function xh(e){return`${ih(gh(e))}|lt:${e.limitType}`}function wh(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>Gd(e)).join(", ")}]`),qu(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Ed(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Ed(e)).join(",")),`Target(${t})`}(gh(e))}; limitType=${e.limitType})`}function Eh(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):Ru.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of mh(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=Ld(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,mh(e),t))&&!(e.endAt&&!function(e,t,n){const r=Ld(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,mh(e),t))}(e,t)}function Nh(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function kh(e){return(t,n)=>{let r=!1;for(const s of mh(e)){const e=Sh(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Sh(e,t,n){const r=e.field.isKeyField()?Ru.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?xd(r,s):lu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return lu()}}class _h{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ju(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return Yu(this.inner)}size(){return this.innerSize}}const Th=new Zu(Ru.comparator);function Ch(){return Th}const Ih=new Zu(Ru.comparator);function jh(){let e=Ih;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Ah(e){let t=Ih;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function Rh(){return Oh()}function Ph(){return Oh()}function Oh(){return new _h(e=>e.toString(),(e,t)=>e.isEqual(t))}const Dh=new Zu(Ru.comparator),Lh=new nd(Ru.comparator);function Mh(){let e=Lh;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const Uh=new nd(ku);function Fh(){return Uh}function Vh(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Hu(t)?"-0":t}}function zh(e){return{integerValue:""+e}}function Bh(e,t){return Wu(t)?zh(t):Vh(e,t)}class $h{constructor(){this._=void 0}}function qh(e,t,n){return e instanceof Kh?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&dd(t)&&(t=hd(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Gh?Qh(e,t):e instanceof Xh?Jh(e,t):function(e,t){const n=Wh(e,t),r=Zh(n)+Zh(e.gt);return Sd(n)&&Sd(e.gt)?zh(r):Vh(e.serializer,r)}(e,t)}function Hh(e,t,n){return e instanceof Gh?Qh(e,t):e instanceof Xh?Jh(e,t):n}function Wh(e,t){return e instanceof Yh?Sd(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class Kh extends $h{}class Gh extends $h{constructor(e){super(),this.elements=e}}function Qh(e,t){const n=ef(t);for(const r of e.elements)n.some(e=>vd(e,r))||n.push(r);return{arrayValue:{values:n}}}class Xh extends $h{constructor(e){super(),this.elements=e}}function Jh(e,t){let n=ef(t);for(const r of e.elements)n=n.filter(e=>!vd(e,r));return{arrayValue:{values:n}}}class Yh extends $h{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Zh(e){return cd(e.integerValue||e.doubleValue)}function ef(e){return _d(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class tf{constructor(e,t){this.field=e,this.transform=t}}class nf{constructor(e,t){this.version=e,this.transformResults=t}}class rf{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new rf}static exists(e){return new rf(void 0,e)}static updateTime(e){return new rf(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function sf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class of{}function af(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new yf(e.key,rf.none()):new hf(e.key,e.data,rf.none());{const n=e.data,r=Rd.empty();let s=new nd(Au.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new ff(e.key,r,new sd(s.toArray()),rf.none())}}function lf(e,t,n){e instanceof hf?function(e,t,n){const r=e.value.clone(),s=mf(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof ff?function(e,t,n){if(!sf(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=mf(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(pf(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function cf(e,t,n,r){return e instanceof hf?function(e,t,n,r){if(!sf(e.precondition,t))return n;const s=e.value.clone(),i=gf(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof ff?function(e,t,n,r){if(!sf(e.precondition,t))return n;const s=gf(e.fieldTransforms,r,t),i=t.data;return i.setAll(pf(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return sf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function uf(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=Wh(r.transform,e||null);null!=s&&(null===n&&(n=Rd.empty()),n.set(r.field,s))}return n||null}function df(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Su(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Gh&&t instanceof Gh||e instanceof Xh&&t instanceof Xh?Su(e.elements,t.elements,vd):e instanceof Yh&&t instanceof Yh?vd(e.gt,t.gt):e instanceof Kh&&t instanceof Kh}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class hf extends of{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class ff extends of{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function pf(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function mf(e,t,n){const r=new Map;cu(e.length===n.length);for(let s=0;s<n.length;s++){const i=e[s],o=i.transform,a=t.data.field(i.field);r.set(i.field,Hh(o,a,n[s]))}return r}function gf(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,qh(e,i,t))}return r}class yf extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vf extends of{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class bf{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&lf(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=cf(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=cf(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=Ph();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let o=this.applyToLocalView(i,s.mutatedFields);o=t.has(r.key)?null:o;const a=af(i,o);null!==a&&n.set(r.key,a),i.isValidDocument()||i.convertToNoDocument(Tu.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Mh())}isEqual(e){return this.batchId===e.batchId&&Su(this.mutations,e.mutations,(e,t)=>df(e,t))&&Su(this.baseMutations,e.baseMutations,(e,t)=>df(e,t))}}class xf{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){cu(e.mutations.length===n.length);let r=Dh;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new xf(e,t,n,r)}}class wf{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Ef{constructor(e,t){this.count=e,this.unchangedNames=t}}var Nf,kf;function Sf(e){switch(e){default:return lu();case du.CANCELLED:case du.UNKNOWN:case du.DEADLINE_EXCEEDED:case du.RESOURCE_EXHAUSTED:case du.INTERNAL:case du.UNAVAILABLE:case du.UNAUTHENTICATED:return!1;case du.INVALID_ARGUMENT:case du.NOT_FOUND:case du.ALREADY_EXISTS:case du.PERMISSION_DENIED:case du.FAILED_PRECONDITION:case du.ABORTED:case du.OUT_OF_RANGE:case du.UNIMPLEMENTED:case du.DATA_LOSS:return!0}}function _f(e){if(void 0===e)return iu("GRPC error has no .code"),du.UNKNOWN;switch(e){case Nf.OK:return du.OK;case Nf.CANCELLED:return du.CANCELLED;case Nf.UNKNOWN:return du.UNKNOWN;case Nf.DEADLINE_EXCEEDED:return du.DEADLINE_EXCEEDED;case Nf.RESOURCE_EXHAUSTED:return du.RESOURCE_EXHAUSTED;case Nf.INTERNAL:return du.INTERNAL;case Nf.UNAVAILABLE:return du.UNAVAILABLE;case Nf.UNAUTHENTICATED:return du.UNAUTHENTICATED;case Nf.INVALID_ARGUMENT:return du.INVALID_ARGUMENT;case Nf.NOT_FOUND:return du.NOT_FOUND;case Nf.ALREADY_EXISTS:return du.ALREADY_EXISTS;case Nf.PERMISSION_DENIED:return du.PERMISSION_DENIED;case Nf.FAILED_PRECONDITION:return du.FAILED_PRECONDITION;case Nf.ABORTED:return du.ABORTED;case Nf.OUT_OF_RANGE:return du.OUT_OF_RANGE;case Nf.UNIMPLEMENTED:return du.UNIMPLEMENTED;case Nf.DATA_LOSS:return du.DATA_LOSS;default:return lu()}}(kf=Nf||(Nf={}))[kf.OK=0]="OK",kf[kf.CANCELLED=1]="CANCELLED",kf[kf.UNKNOWN=2]="UNKNOWN",kf[kf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",kf[kf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",kf[kf.NOT_FOUND=5]="NOT_FOUND",kf[kf.ALREADY_EXISTS=6]="ALREADY_EXISTS",kf[kf.PERMISSION_DENIED=7]="PERMISSION_DENIED",kf[kf.UNAUTHENTICATED=16]="UNAUTHENTICATED",kf[kf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",kf[kf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",kf[kf.ABORTED=10]="ABORTED",kf[kf.OUT_OF_RANGE=11]="OUT_OF_RANGE",kf[kf.UNIMPLEMENTED=12]="UNIMPLEMENTED",kf[kf.INTERNAL=13]="INTERNAL",kf[kf.UNAVAILABLE=14]="UNAVAILABLE",kf[kf.DATA_LOSS=15]="DATA_LOSS";class Tf{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cf}static getOrCreateInstance(){return null===Cf&&(Cf=new Tf),Cf}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Cf=null;function If(){return new TextEncoder}const jf=new Yc([4294967295,4294967295],0);function Af(e){const t=If().encode(e),n=new Jc;return n.update(t),new Uint8Array(n.digest())}function Rf(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new Yc([n,r],0),new Yc([s,i],0)]}class Pf{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new Of(`Invalid padding: ${t}`);if(n<0)throw new Of(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new Of(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new Of(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Yc.fromNumber(this.It)}Et(e,t,n){let r=e.add(t.multiply(Yc.fromNumber(n)));return 1===r.compare(jf)&&(r=new Yc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Af(e),[n,r]=Rf(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);if(!this.At(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Pf(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.It)return;const t=Af(e),[n,r]=Rf(t);for(let s=0;s<this.hashCount;s++){const e=this.Et(n,r,s);this.Rt(e)}}Rt(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class Of extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Df{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,Lf.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new Df(Tu.min(),r,new Zu(ku),Ch(),Mh())}}class Lf{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new Lf(n,t,Mh(),Mh(),Mh())}}class Mf{constructor(e,t,n,r){this.Pt=e,this.removedTargetIds=t,this.key=n,this.bt=r}}class Uf{constructor(e,t){this.targetId=e,this.Vt=t}}class Ff{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:od.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class Vf{constructor(){this.St=0,this.Dt=$f(),this.Ct=od.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Mh(),t=Mh(),n=Mh();return this.Dt.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:lu()}}),new Lf(this.Ct,this.xt,e,t,n)}Ft(){this.Nt=!1,this.Dt=$f()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class zf{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ch(),this.zt=Bf(),this.Wt=new Zu(ku)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const n=this.Zt(t);switch(e.state){case 0:this.te(t)&&n.$t(e.resumeToken);break;case 1:n.Ut(),n.kt||n.Ft(),n.$t(e.resumeToken);break;case 2:n.Ut(),n.kt||this.removeTarget(t);break;case 3:this.te(t)&&(n.Kt(),n.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),n.$t(e.resumeToken));break;default:lu()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((e,n)=>{this.te(n)&&t(n)})}ne(e){var t;const n=e.targetId,r=e.Vt.count,s=this.se(n);if(s){const i=s.target;if(ah(i))if(0===r){const e=new Ru(i.path);this.Yt(n,e,Od.newNoDocument(e,Tu.min()))}else cu(1===r);else{const s=this.ie(n);if(s!==r){const r=this.re(e,s);if(0!==r){this.ee(n);const e=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(n,e)}null===(t=Tf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(e,t,n){var r,s,i,o,a,l;const c={localCacheCount:t,existenceFilterCount:n.count},u=n.unchangedNames;return u&&(c.bloomFilter={applied:0===e,hashCount:null!==(r=null==u?void 0:u.hashCount)&&void 0!==r?r:0,bitmapLength:null!==(o=null===(i=null===(s=null==u?void 0:u.bits)||void 0===s?void 0:s.bitmap)||void 0===i?void 0:i.length)&&void 0!==o?o:0,padding:null!==(l=null===(a=null==u?void 0:u.bits)||void 0===a?void 0:a.padding)&&void 0!==l?l:0}),c}(r,s,e.Vt))}}}}re(e,t){const{unchangedNames:n,count:r}=e.Vt;if(!n||!n.bits)return 1;const{bits:{bitmap:s="",padding:i=0},hashCount:o=0}=n;let a,l;try{a=ud(s).toUint8Array()}catch(e){if(e instanceof id)return ou("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw e}try{l=new Pf(a,i,o)}catch(e){return ou(e instanceof Of?"BloomFilter error: ":"Applying bloom filter failed: ",e),1}return 0===l.It?1:r!==t-this.oe(e.targetId,l)?2:0}oe(e,t){const n=this.Gt.getRemoteKeysForTarget(e);let r=0;return n.forEach(n=>{const s=this.Gt.ue(),i=`projects/${s.projectId}/databases/${s.database}/documents/${n.path.canonicalString()}`;t.vt(i)||(this.Yt(e,n,null),r++)}),r}ce(e){const t=new Map;this.Qt.forEach((n,r)=>{const s=this.se(r);if(s){if(n.current&&ah(s.target)){const t=new Ru(s.target.path);null!==this.jt.get(t)||this.ae(r,t)||this.Yt(r,t,Od.newNoDocument(t,e))}n.Mt&&(t.set(r,n.Ot()),n.Ft())}});let n=Mh();this.zt.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.se(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.jt.forEach((t,n)=>n.setReadTime(e));const r=new Df(e,t,this.Wt,this.jt,n);return this.jt=Ch(),this.zt=Bf(),this.Wt=new Zu(ku),r}Jt(e,t){if(!this.te(e))return;const n=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,n),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,n){if(!this.te(e))return;const r=this.Zt(e);this.ae(e,t)?r.Bt(t,1):r.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),n&&(this.jt=this.jt.insert(t,n))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Vf,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new nd(ku),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||su("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Vf),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function Bf(){return new Zu(Ru.comparator)}function $f(){return new Zu(Ru.comparator)}const qf={asc:"ASCENDING",desc:"DESCENDING"},Hf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Wf={and:"AND",or:"OR"};class Kf{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Gf(e,t){return e.useProto3Json||qu(t)?t:{value:t}}function Qf(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Xf(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Jf(e,t){return Qf(e,t.toTimestamp())}function Yf(e){return cu(!!e),Tu.fromTimestamp(function(e){const t=ld(e);return new _u(t.seconds,t.nanos)}(e))}function Zf(e,t){return function(e){return new Iu(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function ep(e){const t=Iu.fromString(e);return cu(xp(t)),t}function tp(e,t){return Zf(e.databaseId,t.path)}function np(e,t){const n=ep(t);if(n.get(1)!==e.databaseId.projectId)throw new hu(du.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new hu(du.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ru(op(n))}function rp(e,t){return Zf(e.databaseId,t)}function sp(e){const t=ep(e);return 4===t.length?Iu.emptyPath():op(t)}function ip(e){return new Iu(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function op(e){return cu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function ap(e,t,n){return{name:tp(e,t),fields:n.value.mapValue.fields}}function lp(e,t){let n;if(t instanceof hf)n={update:ap(e,t.key,t.value)};else if(t instanceof yf)n={delete:tp(e,t.key)};else if(t instanceof ff)n={update:ap(e,t.key,t.data),updateMask:bp(t.fieldMask)};else{if(!(t instanceof vf))return lu();n={verify:tp(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Kh)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Gh)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Xh)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Yh)return{fieldPath:t.field.canonicalString(),increment:n.gt};throw lu()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Jf(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:lu()}(e,t.precondition)),n}function cp(e,t){return{documents:[rp(e,t.path)]}}function up(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=rp(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=rp(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const s=function(e){if(0!==e.length)return vp(Bd.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const i=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:gp(e.field),direction:fp(e.dir)}}(e))}(t.orderBy);i&&(n.structuredQuery.orderBy=i);const o=Gf(e,t.limit);var a;return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt={before:(a=t.startAt).inclusive,values:a.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function dp(e){let t=sp(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){cu(1===r);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=hp(e);return t instanceof Bd&&qd(t)?t.getFilters():[t]}(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Ud(yp(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,qu(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new Dd(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new Dd(n,t)}(n.endAt)),ch(t,s,o,i,a,"F",l,c)}function hp(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=yp(e.unaryFilter.field);return zd.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=yp(e.unaryFilter.field);return zd.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=yp(e.unaryFilter.field);return zd.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=yp(e.unaryFilter.field);return zd.create(s,"!=",{nullValue:"NULL_VALUE"});default:return lu()}}(e):void 0!==e.fieldFilter?function(e){return zd.create(yp(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return lu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return Bd.create(e.compositeFilter.filters.map(e=>hp(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return lu()}}(e.compositeFilter.op))}(e):lu()}function fp(e){return qf[e]}function pp(e){return Hf[e]}function mp(e){return Wf[e]}function gp(e){return{fieldPath:e.canonicalString()}}function yp(e){return Au.fromServerFormat(e.fieldPath)}function vp(e){return e instanceof zd?function(e){if("=="===e.op){if(Cd(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NAN"}};if(Td(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Cd(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NOT_NAN"}};if(Td(e.value))return{unaryFilter:{field:gp(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:gp(e.field),op:pp(e.op),value:e.value}}}(e):e instanceof Bd?function(e){const t=e.getFilters().map(e=>vp(e));return 1===t.length?t[0]:{compositeFilter:{op:mp(e.op),filters:t}}}(e):lu()}function bp(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function xp(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class wp{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Tu.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Tu.min(),o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:od.EMPTY_BYTE_STRING,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(e){return new wp(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new wp(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new wp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new wp(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Ep{constructor(e){this.fe=e}}function Np(e){const t=dp({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?vh(t,t.limit,"L"):t}class kp{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(cd(e.integerValue));else if("doubleValue"in e){const n=cd(e.doubleValue);isNaN(n)?this.ye(t,13):(this.ye(t,15),Hu(n)?t.pe(0):t.pe(n))}else if("timestampValue"in e){const n=e.timestampValue;this.ye(t,20),"string"==typeof n?t.Ie(n):(t.Ie(`${n.seconds||""}`),t.pe(n.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(ud(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.ye(t,45),t.pe(n.latitude||0),t.pe(n.longitude||0)}else"mapValue"in e?Ad(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):lu()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const n=e.fields||{};this.ye(t,55);for(const r of Object.keys(n))this.Te(r,t),this.me(n[r],t)}Pe(e,t){const n=e.values||[];this.ye(t,50);for(const r of n)this.me(r,t)}ve(e,t){this.ye(t,37),Ru.fromName(e).path.forEach(e=>{this.ye(t,60),this.be(e,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}kp.Ve=new kp;class Sp{constructor(){this.rn=new _p}addToCollectionParentIndex(e,t){return this.rn.add(t),zu.resolve()}getCollectionParents(e,t){return zu.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return zu.resolve()}deleteFieldIndex(e,t){return zu.resolve()}getDocumentsMatchingTarget(e,t){return zu.resolve(null)}getIndexType(e,t){return zu.resolve(0)}getFieldIndexes(e,t){return zu.resolve([])}getNextCollectionGroupToUpdate(e){return zu.resolve(null)}getMinOffset(e,t){return zu.resolve(Lu.min())}getMinOffsetFromCollectionGroup(e,t){return zu.resolve(Lu.min())}updateCollectionGroup(e,t,n){return zu.resolve()}updateIndexEntries(e,t){return zu.resolve()}}class _p{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new nd(Iu.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new nd(Iu.comparator)).toArray()}}new Uint8Array(0);class Tp{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new Tp(e,Tp.DEFAULT_COLLECTION_PERCENTILE,Tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}Tp.DEFAULT_COLLECTION_PERCENTILE=10,Tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Tp.DEFAULT=new Tp(41943040,Tp.DEFAULT_COLLECTION_PERCENTILE,Tp.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Tp.DISABLED=new Tp(-1,0,0);class Cp{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Cp(0)}static Mn(){return new Cp(-1)}}class Ip{constructor(){this.changes=new _h(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Od.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?zu.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class jp{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Ap{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&cf(n.mutation,e,sd.empty(),_u.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,Mh()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Mh();const r=Rh();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=jh();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=Rh();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,Mh()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Ch();const i=Oh(),o=Oh();return t.forEach((e,t)=>{const o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof ff)?s=s.insert(t.key,t):void 0!==o?(i.set(t.key,o.mutation.getFieldMask()),cf(o.mutation,t,o.mutation.getFieldMask(),_u.now())):i.set(t.key,sd.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return o.set(e,new jp(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),o))}recalculateAndSaveOverlays(e,t){const n=Oh();let r=new Zu((e,t)=>e-t),s=Mh();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let o=n.get(e)||sd.empty();o=s.applyToLocalView(i,o),n.set(e,o);const a=(r.get(s.batchId)||Mh()).add(e);r=r.insert(s.batchId,a)})}).next(()=>{const i=[],o=r.getReverseIterator();for(;o.hasNext();){const r=o.getNext(),a=r.key,l=r.value,c=Ph();l.forEach(e=>{if(!s.has(e)){const r=af(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,a,c))}return zu.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n){return function(e){return Ru.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):ph(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):zu.resolve(Rh());let o=-1,a=s;return i.next(t=>zu.forEach(t,(t,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),s.get(t)?zu.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{a=a.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,a,t,Mh())).next(e=>({batchId:o,changes:Ah(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ru(t)).next(e=>{let t=jh();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n){const r=t.collectionGroup;let s=jh();return this.indexManager.getCollectionParents(e,r).next(i=>zu.forEach(i,i=>{const o=function(e,t){return new lh(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,i.child(r));return this.getDocumentsMatchingCollectionQuery(e,o,n).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r))).next(e=>{r.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,Od.newInvalidDocument(r)))});let n=jh();return e.forEach((e,s)=>{const i=r.get(e);void 0!==i&&cf(i.mutation,s,sd.empty(),_u.now()),Eh(t,s)&&(n=n.insert(e,s))}),n})}}class Rp{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return zu.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var n;return this.cs.set(t.id,{id:(n=t).id,version:n.version,createTime:Yf(n.createTime)}),zu.resolve()}getNamedQuery(e,t){return zu.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,function(e){return{name:e.name,query:Np(e.bundledQuery),readTime:Yf(e.readTime)}}(t)),zu.resolve()}}class Pp{constructor(){this.overlays=new Zu(Ru.comparator),this.ls=new Map}getOverlay(e,t){return zu.resolve(this.overlays.get(t))}getOverlays(e,t){const n=Rh();return zu.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.we(e,t,r)}),zu.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.ls.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.ls.delete(n)),zu.resolve()}getOverlaysForCollection(e,t,n){const r=Rh(),s=t.length+1,i=new Ru(t.child("")),o=this.overlays.getIteratorFrom(i);for(;o.hasNext();){const e=o.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return zu.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new Zu((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=Rh(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const o=Rh(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((e,t)=>o.set(e,t)),!(o.size()>=r)););return zu.resolve(o)}we(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.ls.get(r.largestBatchId).delete(n.key);this.ls.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new wf(t,n));let s=this.ls.get(t);void 0===s&&(s=Mh(),this.ls.set(t,s)),this.ls.set(t,s.add(n.key))}}class Op{constructor(){this.fs=new nd(Dp.ds),this.ws=new nd(Dp._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const n=new Dp(e,t);this.fs=this.fs.add(n),this.ws=this.ws.add(n)}gs(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.ys(new Dp(e,t))}ps(e,t){e.forEach(e=>this.removeReference(e,t))}Is(e){const t=new Ru(new Iu([])),n=new Dp(t,e),r=new Dp(t,e+1),s=[];return this.ws.forEachInRange([n,r],e=>{this.ys(e),s.push(e.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ru(new Iu([])),n=new Dp(t,e),r=new Dp(t,e+1);let s=Mh();return this.ws.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new Dp(e,0),n=this.fs.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class Dp{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ru.comparator(e.key,t.key)||ku(e.As,t.As)}static _s(e,t){return ku(e.As,t.As)||Ru.comparator(e.key,t.key)}}class Lp{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new nd(Dp.ds)}checkEmpty(e){return zu.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new bf(s,t,n,r);this.mutationQueue.push(i);for(const o of r)this.Rs=this.Rs.add(new Dp(o.key,s)),this.indexManager.addToCollectionParentIndex(e,o.key.path.popLast());return zu.resolve(i)}lookupMutationBatch(e,t){return zu.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.bs(n),s=r<0?0:r;return zu.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return zu.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return zu.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new Dp(t,0),r=new Dp(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([n,r],e=>{const t=this.Ps(e.As);s.push(t)}),zu.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new nd(ku);return t.forEach(e=>{const t=new Dp(e,0),r=new Dp(e,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([t,r],e=>{n=n.add(e.As)})}),zu.resolve(this.Vs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;Ru.isDocumentKey(s)||(s=s.child(""));const i=new Dp(new Ru(s),0);let o=new nd(ku);return this.Rs.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.As)),!0)},i),zu.resolve(this.Vs(o))}Vs(e){const t=[];return e.forEach(e=>{const n=this.Ps(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){cu(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let n=this.Rs;return zu.forEach(t.mutations,r=>{const s=new Dp(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Rs=n})}Cn(e){}containsKey(e,t){const n=new Dp(t,0),r=this.Rs.firstAfterOrEqual(n);return zu.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,zu.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Mp{constructor(e){this.Ds=e,this.docs=new Zu(Ru.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.Ds(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return zu.resolve(n?n.document.mutableCopy():Od.newInvalidDocument(t))}getEntries(e,t){let n=Ch();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():Od.newInvalidDocument(e))}),zu.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Ch();const i=t.path,o=new Ru(i.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:e,value:{document:o}}=a.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||Mu(Du(o),n)<=0||(r.has(o.key)||Eh(t,o))&&(s=s.insert(o.key,o.mutableCopy()))}return zu.resolve(s)}getAllFromCollectionGroup(e,t,n,r){lu()}Cs(e,t){return zu.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Up(this)}getSize(e){return zu.resolve(this.size)}}class Up extends Ip{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.os.addEntry(e,r)):this.os.removeEntry(n)}),zu.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class Fp{constructor(e){this.persistence=e,this.xs=new _h(e=>ih(e),oh),this.lastRemoteSnapshotVersion=Tu.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Op,this.targetCount=0,this.Ms=Cp.kn()}forEachTarget(e,t){return this.xs.forEach((e,n)=>t(n)),zu.resolve()}getLastRemoteSnapshotVersion(e){return zu.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return zu.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),zu.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Ns&&(this.Ns=t),zu.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Cp(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,zu.resolve()}updateTargetData(e,t){return this.Fn(t),zu.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,zu.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.xs.forEach((i,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.xs.delete(i),s.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),zu.waitFor(s).next(()=>r)}getTargetCount(e){return zu.resolve(this.targetCount)}getTargetData(e,t){const n=this.xs.get(t)||null;return zu.resolve(n)}addMatchingKeys(e,t,n){return this.ks.gs(t,n),zu.resolve()}removeMatchingKeys(e,t,n){this.ks.ps(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),zu.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),zu.resolve()}getMatchingKeysForTargetId(e,t){const n=this.ks.Es(t);return zu.resolve(n)}containsKey(e,t){return zu.resolve(this.ks.containsKey(t))}}class Vp{constructor(e,t){this.$s={},this.overlays={},this.Os=new $u(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new Fp(this),this.indexManager=new Sp,this.remoteDocumentCache=function(e){return new Mp(e)}(e=>this.referenceDelegate.Ls(e)),this.serializer=new Ep(t),this.qs=new Rp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Pp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.$s[e.toKey()];return n||(n=new Lp(t,this.referenceDelegate),this.$s[e.toKey()]=n),n}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,n){su("MemoryPersistence","Starting transaction:",e);const r=new zp(this.Os.next());return this.referenceDelegate.Us(),n(r).next(e=>this.referenceDelegate.Ks(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Gs(e,t){return zu.or(Object.values(this.$s).map(n=>()=>n.containsKey(e,t)))}}class zp extends Fu{constructor(e){super(),this.currentSequenceNumber=e}}class Bp{constructor(e){this.persistence=e,this.Qs=new Op,this.js=null}static zs(e){return new Bp(e)}get Ws(){if(this.js)return this.js;throw lu()}addReference(e,t,n){return this.Qs.addReference(n,t),this.Ws.delete(n.toString()),zu.resolve()}removeReference(e,t,n){return this.Qs.removeReference(n,t),this.Ws.add(n.toString()),zu.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),zu.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(e=>this.Ws.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.Ws.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return zu.forEach(this.Ws,n=>{const r=Ru.fromPath(n);return this.Hs(e,r).next(e=>{e||t.removeEntry(r,Tu.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(e=>{e?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return zu.or([()=>zu.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class $p{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Fi=n,this.Bi=r}static Li(e,t){let n=Mh(),r=Mh();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new $p(e,t.fromCache,n,r)}}class qp{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,n,r){return this.Ki(e,t).next(s=>s||this.Gi(e,t,r,n)).next(n=>n||this.Qi(e,t))}Ki(e,t){if(dh(t))return zu.resolve(null);let n=gh(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=vh(t,null,"F"),n=gh(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=Mh(...r);return this.Ui.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.ji(t,r);return this.zi(t,i,s,n.readTime)?this.Ki(e,vh(t,null,"F")):this.Wi(e,i,t,n)}))})))}Gi(e,t,n,r){return dh(t)||r.isEqual(Tu.min())?this.Qi(e,t):this.Ui.getDocuments(e,n).next(s=>{const i=this.ji(t,s);return this.zi(t,i,n,r)?this.Qi(e,t):(ru()<=ut.DEBUG&&su("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),wh(t)),this.Wi(e,i,t,Ou(r,-1)))})}ji(e,t){let n=new nd(kh(e));return t.forEach((t,r)=>{Eh(e,r)&&(n=n.add(r))}),n}zi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Qi(e,t){return ru()<=ut.DEBUG&&su("QueryEngine","Using full collection scan to execute query:",wh(t)),this.Ui.getDocumentsMatchingQuery(e,t,Lu.min())}Wi(e,t,n,r){return this.Ui.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class Hp{constructor(e,t,n,r){this.persistence=e,this.Hi=t,this.serializer=r,this.Ji=new Zu(ku),this.Yi=new _h(e=>ih(e),oh),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(n)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ap(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Wp(e,t,n,r){return new Hp(e,t,n,r)}async function Kp(e,t){const n=uu(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.tr(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let o=Mh();for(const e of r){s.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return n.localDocuments.getDocuments(e,o).next(e=>({er:e,removedBatchIds:s,addedBatchIds:i}))})})}function Gp(e){const t=uu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Bs.getLastRemoteSnapshotVersion(e))}function Qp(e,t,n){let r=Mh(),s=Mh();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Ch();return n.forEach((n,i)=>{const o=e.get(n);i.isFoundDocument()!==o.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(Tu.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!o.isValidDocument()||i.version.compareTo(o.version)>0||0===i.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):su("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",i.version)}),{nr:r,sr:s}})}function Xp(e,t){const n=uu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Jp(e,t){const n=uu(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Bs.getTargetData(e,t).next(s=>s?(r=s,zu.resolve(r)):n.Bs.allocateTargetId(e).next(s=>(r=new wp(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Bs.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ji.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ji=n.Ji.insert(e.targetId,e),n.Yi.set(t,e.targetId)),e})}async function Yp(e,t,n){const r=uu(e),s=r.Ji.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Bu(e))throw e;su("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Ji=r.Ji.remove(t),r.Yi.delete(s.target)}function Zp(e,t,n){const r=uu(e);let s=Tu.min(),i=Mh();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=uu(e),s=r.Yi.get(n);return void 0!==s?zu.resolve(r.Ji.get(s)):r.Bs.getTargetData(t,n)}(r,e,gh(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Hi.getDocumentsMatchingQuery(e,t,n?s:Tu.min(),n?i:Mh())).next(e=>(em(r,Nh(t),e),{documents:e,ir:i})))}function em(e,t,n){let r=e.Xi.get(t)||Tu.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Xi.set(t,r)}class tm{constructor(){this.activeTargetIds=Fh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class nm{constructor(){this.Hr=new tm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,n){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new tm,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class rm{Yr(e){}shutdown(){}}class sm{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){su("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){su("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let im=null;function om(){return null===im?im=268435456+Math.round(2147483648*Math.random()):im++,"0x"+im.toString(16)}const am={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class lm{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const cm="WebChannelConnection";class um extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http";this.mo=t+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,n,r,s){const i=om(),o=this.To(e,t);su("RestConnection",`Sending RPC '${e}' ${i}:`,o,n);const a={};return this.Eo(a,r,s),this.Ao(e,o,a,n).then(t=>(su("RestConnection",`Received RPC '${e}' ${i}: `,t),t),t=>{throw ou("RestConnection",`RPC '${e}' ${i} failed with error: `,t,"url: ",o,"request:",n),t})}vo(e,t,n,r,s,i){return this.Io(e,t,n,r,s)}Eo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+tu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}To(e,t){const n=am[e];return`${this.mo}/v1/${t}:${n}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,n,r){const s=om();return new Promise((i,o)=>{const a=new Xc;a.setWithCredentials(!0),a.listenOnce(Hc.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case qc.NO_ERROR:const t=a.getResponseJson();su(cm,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(t)),i(t);break;case qc.TIMEOUT:su(cm,`RPC '${e}' ${s} timed out`),o(new hu(du.DEADLINE_EXCEEDED,"Request time out"));break;case qc.HTTP_ERROR:const n=a.getStatus();if(su(cm,`RPC '${e}' ${s} failed with status:`,n,"response text:",a.getResponseText()),n>0){let e=a.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(du).indexOf(t)>=0?t:du.UNKNOWN}(t.status);o(new hu(e,t.message))}else o(new hu(du.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new hu(du.UNAVAILABLE,"Connection failed."));break;default:lu()}}finally{su(cm,`RPC '${e}' ${s} completed.`)}});const l=JSON.stringify(r);su(cm,`RPC '${e}' ${s} sending request:`,r),a.send(t,"POST",l,n,15)})}Ro(e,t,n){const r=om(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=Bc(),o=$c(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.xmlHttpFactory=new Gc({})),this.Eo(a.initMessageHeaders,t,n),a.encodeInitMessageHeaders=!0;const c=s.join("");su(cm,`Creating RPC '${e}' stream ${r}: ${c}`,a);const u=i.createWebChannel(c,a);let d=!1,h=!1;const f=new lm({ro:t=>{h?su(cm,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(su(cm,`Opening RPC '${e}' stream ${r} transport.`),u.open(),d=!0),su(cm,`RPC '${e}' stream ${r} sending:`,t),u.send(t))},oo:()=>u.close()}),p=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return p(u,Qc.EventType.OPEN,()=>{h||su(cm,`RPC '${e}' stream ${r} transport opened.`)}),p(u,Qc.EventType.CLOSE,()=>{h||(h=!0,su(cm,`RPC '${e}' stream ${r} transport closed`),f.wo())}),p(u,Qc.EventType.ERROR,t=>{h||(h=!0,ou(cm,`RPC '${e}' stream ${r} transport errored:`,t),f.wo(new hu(du.UNAVAILABLE,"The operation could not be completed")))}),p(u,Qc.EventType.MESSAGE,t=>{var n;if(!h){const s=t.data[0];cu(!!s);const i=s,o=i.error||(null===(n=i[0])||void 0===n?void 0:n.error);if(o){su(cm,`RPC '${e}' stream ${r} received error:`,o);const t=o.status;let n=function(e){const t=Nf[e];if(void 0!==t)return _f(t)}(t),s=o.message;void 0===n&&(n=du.INTERNAL,s="Unknown error status: "+t+" with message "+o.message),h=!0,f.wo(new hu(n,s)),u.close()}else su(cm,`RPC '${e}' stream ${r} received:`,s),f._o(s)}}),p(o,Wc.STAT_EVENT,t=>{t.stat===Kc.PROXY?su(cm,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===Kc.NOPROXY&&su(cm,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{f.fo()},0),f}}function dm(){return"undefined"!=typeof document?document:null}function hm(e){return new Kf(e,!0)}class fm{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.ii=e,this.timerId=t,this.Po=n,this.bo=r,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),n=Math.max(0,Date.now()-this.Co),r=Math.max(0,t-n);r>0&&su("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,r,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class pm{constructor(e,t,n,r,s,i,o,a){this.ii=e,this.$o=n,this.Oo=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new fm(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(e,t){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==e?this.qo.reset():t&&t.code===du.RESOURCE_EXHAUSTED?(iu(t.toString()),iu("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):t&&t.code===du.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.ao(t)}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Fo===t&&this.Zo(n,r)},t=>{e(()=>{const e=new hu(du.UNKNOWN,"Fetching auth token failed: "+t.message);return this.tu(e)})})}Zo(e,t){const n=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{n(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(e=>{n(()=>this.tu(e))}),this.stream.onMessage(e=>{n(()=>this.onMessage(e))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(e){return su("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(su("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class mm extends pm{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:lu()}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(cu(void 0===t||"string"==typeof t),od.fromBase64String(t||"")):(cu(void 0===t||t instanceof Uint8Array),od.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?du.UNKNOWN:_f(e.code);return new hu(t,e.message||"")}(o);n=new Ff(r,s,i,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=np(e,r.document.name),i=Yf(r.document.updateTime),o=r.document.createTime?Yf(r.document.createTime):Tu.min(),a=new Rd({mapValue:{fields:r.document.fields}}),l=Od.newFoundDocument(s,i,o,a),c=r.targetIds||[],u=r.removedTargetIds||[];n=new Mf(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=np(e,r.document),i=r.readTime?Yf(r.readTime):Tu.min(),o=Od.newNoDocument(s,i),a=r.removedTargetIds||[];n=new Mf([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=np(e,r.document),i=r.removedTargetIds||[];n=new Mf([],i,s,null)}else{if(!("filter"in t))return lu();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Ef(r,s),o=e.targetId;n=new Uf(o,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return Tu.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Tu.min():t.readTime?Yf(t.readTime):Tu.min()}(e);return this.listener.nu(t,n)}su(e){const t={};t.database=ip(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=ah(r)?{documents:cp(e,r)}:{query:up(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Xf(e,t.resumeToken);const r=Gf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(Tu.min())>0){n.readTime=Qf(e,t.snapshotVersion.toTimestamp());const r=Gf(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return lu()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Wo(t)}iu(e){const t={};t.database=ip(this.serializer),t.removeTarget=e,this.Wo(t)}}class gm extends pm{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(cu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function(e,t){return e&&e.length>0?(cu(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Yf(e.updateTime):Yf(t);return n.isEqual(Tu.min())&&(n=Yf(t)),new nf(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Yf(e.commitTime);return this.listener.cu(n,t)}return cu(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=ip(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>lp(this.serializer,e))};this.Wo(t)}}class ym extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.lu=!1}fu(){if(this.lu)throw new hu(du.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,n){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(r=>{let[s,i]=r;return this.connection.Io(e,t,n,s,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===du.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hu(du.UNKNOWN,e.toString())})}vo(e,t,n,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,o]=s;return this.connection.vo(e,t,n,i,o,r)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===du.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new hu(du.UNKNOWN,e.toString())})}terminate(){this.lu=!0}}class vm{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(iu(t),this.mu=!1):su("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class bm{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(e=>{n.enqueueAndForget(async()=>{Cm(this)&&(su("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=uu(e);t.vu.add(4),await wm(t),t.bu.set("Unknown"),t.vu.delete(4),await xm(t)}(this))})}),this.bu=new vm(n,r)}}async function xm(e){if(Cm(e))for(const t of e.Ru)await t(!0)}async function wm(e){for(const t of e.Ru)await t(!1)}function Em(e,t){const n=uu(e);n.Au.has(t.targetId)||(n.Au.set(t.targetId,t),Tm(n)?_m(n):Wm(n).Ko()&&km(n,t))}function Nm(e,t){const n=uu(e),r=Wm(n);n.Au.delete(t),r.Ko()&&Sm(n,t),0===n.Au.size&&(r.Ko()?r.jo():Cm(n)&&n.bu.set("Unknown"))}function km(e,t){if(e.Vu.qt(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Tu.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Wm(e).su(t)}function Sm(e,t){e.Vu.qt(t),Wm(e).iu(t)}function _m(e){e.Vu=new zf({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),le:t=>e.Au.get(t)||null,ue:()=>e.datastore.serializer.databaseId}),Wm(e).start(),e.bu.gu()}function Tm(e){return Cm(e)&&!Wm(e).Uo()&&e.Au.size>0}function Cm(e){return 0===uu(e).vu.size}function Im(e){e.Vu=void 0}async function jm(e){e.Au.forEach((t,n)=>{km(e,t)})}async function Am(e,t){Im(e),Tm(e)?(e.bu.Iu(t),_m(e)):e.bu.set("Unknown")}async function Rm(e,t,n){if(e.bu.set("Online"),t instanceof Ff&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Au.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Au.delete(r),e.Vu.removeTarget(r))}(e,t)}catch(n){su("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Pm(e,n)}else if(t instanceof Mf?e.Vu.Ht(t):t instanceof Uf?e.Vu.ne(t):e.Vu.Xt(t),!n.isEqual(Tu.min()))try{const t=await Gp(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Vu.ce(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Au.get(r);s&&e.Au.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Au.get(t);if(!r)return;e.Au.set(t,r.withResumeToken(od.EMPTY_BYTE_STRING,r.snapshotVersion)),Sm(e,t);const s=new wp(r.target,t,n,r.sequenceNumber);km(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){su("RemoteStore","Failed to raise snapshot:",t),await Pm(e,t)}}async function Pm(e,t,n){if(!Bu(t))throw t;e.vu.add(1),await wm(e),e.bu.set("Offline"),n||(n=()=>Gp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{su("RemoteStore","Retrying IndexedDB access"),await n(),e.vu.delete(1),await xm(e)})}function Om(e,t){return t().catch(n=>Pm(e,n,t))}async function Dm(e){const t=uu(e),n=Km(t);let r=t.Eu.length>0?t.Eu[t.Eu.length-1].batchId:-1;for(;Lm(t);)try{const e=await Xp(t.localStore,r);if(null===e){0===t.Eu.length&&n.jo();break}r=e.batchId,Mm(t,e)}catch(e){await Pm(t,e)}Um(t)&&Fm(t)}function Lm(e){return Cm(e)&&e.Eu.length<10}function Mm(e,t){e.Eu.push(t);const n=Km(e);n.Ko()&&n.ou&&n.uu(t.mutations)}function Um(e){return Cm(e)&&!Km(e).Uo()&&e.Eu.length>0}function Fm(e){Km(e).start()}async function Vm(e){Km(e).hu()}async function zm(e){const t=Km(e);for(const n of e.Eu)t.uu(n.mutations)}async function Bm(e,t,n){const r=e.Eu.shift(),s=xf.from(r,t,n);await Om(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Dm(e)}async function $m(e,t){t&&Km(e).ou&&await async function(e,t){if(Sf(n=t.code)&&n!==du.ABORTED){const n=e.Eu.shift();Km(e).Qo(),await Om(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Dm(e)}var n}(e,t),Um(e)&&Fm(e)}async function qm(e,t){const n=uu(e);n.asyncQueue.verifyOperationInProgress(),su("RemoteStore","RemoteStore received new credentials");const r=Cm(n);n.vu.add(3),await wm(n),r&&n.bu.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.vu.delete(3),await xm(n)}async function Hm(e,t){const n=uu(e);t?(n.vu.delete(2),await xm(n)):t||(n.vu.add(2),await wm(n),n.bu.set("Unknown"))}function Wm(e){return e.Su||(e.Su=function(e,t,n){const r=uu(e);return r.fu(),new mm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:jm.bind(null,e),ao:Am.bind(null,e),nu:Rm.bind(null,e)}),e.Ru.push(async t=>{t?(e.Su.Qo(),Tm(e)?_m(e):e.bu.set("Unknown")):(await e.Su.stop(),Im(e))})),e.Su}function Km(e){return e.Du||(e.Du=function(e,t,n){const r=uu(e);return r.fu(),new gm(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{uo:Vm.bind(null,e),ao:$m.bind(null,e),au:zm.bind(null,e),cu:Bm.bind(null,e)}),e.Ru.push(async t=>{t?(e.Du.Qo(),await Dm(e)):(await e.Du.stop(),e.Eu.length>0&&(su("RemoteStore",`Stopping write stream with ${e.Eu.length} pending writes`),e.Eu=[]))})),e.Du}class Gm{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new fu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,o=new Gm(e,t,i,r,s);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new hu(du.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Qm(e,t){if(iu("AsyncQueue",`${t}: ${e}`),Bu(e))return new hu(du.UNAVAILABLE,`${t}: ${e}`);throw e}class Xm{constructor(e){this.comparator=e?(t,n)=>e(t,n)||Ru.comparator(t.key,n.key):(e,t)=>Ru.comparator(e.key,t.key),this.keyedMap=jh(),this.sortedSet=new Zu(this.comparator)}static emptySet(e){return new Xm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Xm))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Xm;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Jm{constructor(){this.Cu=new Zu(Ru.comparator)}track(e){const t=e.doc.key,n=this.Cu.get(t);n?0!==e.type&&3===n.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==n.type?this.Cu=this.Cu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Cu=this.Cu.remove(t):1===e.type&&2===n.type?this.Cu=this.Cu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):lu():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,n)=>{e.push(n)}),e}}class Ym{constructor(e,t,n,r,s,i,o,a,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Ym(e,t,Xm.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&bh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Zm{constructor(){this.Nu=void 0,this.listeners=[]}}class eg{constructor(){this.queries=new _h(e=>xh(e),bh),this.onlineState="Unknown",this.ku=new Set}}async function tg(e,t){const n=uu(e),r=t.query;let s=!1,i=n.queries.get(r);if(i||(s=!0,i=new Zm),s)try{i.Nu=await n.onListen(r)}catch(e){const n=Qm(e,`Initialization of query '${wh(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,i),i.listeners.push(t),t.Mu(n.onlineState),i.Nu&&t.$u(i.Nu)&&ig(n)}async function ng(e,t){const n=uu(e),r=t.query;let s=!1;const i=n.queries.get(r);if(i){const e=i.listeners.indexOf(t);e>=0&&(i.listeners.splice(e,1),s=0===i.listeners.length)}if(s)return n.queries.delete(r),n.onUnlisten(r)}function rg(e,t){const n=uu(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.listeners)e.$u(s)&&(r=!0);t.Nu=s}}r&&ig(n)}function sg(e,t,n){const r=uu(e),s=r.queries.get(t);if(s)for(const i of s.listeners)i.onError(n);r.queries.delete(t)}function ig(e){e.ku.forEach(e=>{e.next()})}class og{constructor(e,t,n){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=n||{}}$u(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Ym(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Ku||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){if(e.docChanges.length>0)return!0;const t=this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Uu(e){e=Ym.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class ag{constructor(e){this.key=e}}class lg{constructor(e){this.key=e}}class cg{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Mh(),this.mutatedKeys=Mh(),this.tc=kh(e),this.ec=new Xm(this.tc)}get nc(){return this.Yu}sc(e,t){const n=t?t.ic:new Jm,r=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,o=!1;const a="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Eh(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.rc(c,u)||(n.track({type:2,doc:u}),f=!0,(a&&this.tc(u,a)>0||l&&this.tc(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(a||l)&&(o=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{ec:i,ic:n,zi:o,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return lu()}};return n(e)-n(t)}(e.type,t.type)||this.tc(e.doc,t.doc)),this.oc(n);const i=t?this.uc():[],o=0===this.Zu.size&&this.current?1:0,a=o!==this.Xu;return this.Xu=o,0!==s.length||a?{snapshot:new Ym(this.query,e.ec,r,s,e.mutatedKeys,0===o,a,!1,!!n&&n.resumeToken.approximateByteSize()>0),cc:i}:{cc:i}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Jm,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(e=>this.Yu=this.Yu.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Yu=this.Yu.delete(e)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Mh(),this.ec.forEach(e=>{this.ac(e.key)&&(this.Zu=this.Zu.add(e.key))});const t=[];return e.forEach(e=>{this.Zu.has(e)||t.push(new lg(e))}),this.Zu.forEach(n=>{e.has(n)||t.push(new ag(n))}),t}hc(e){this.Yu=e.ir,this.Zu=Mh();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Ym.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class ug{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class dg{constructor(e){this.key=e,this.fc=!1}}class hg{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.dc={},this.wc=new _h(e=>xh(e),bh),this._c=new Map,this.mc=new Set,this.gc=new Zu(Ru.comparator),this.yc=new Map,this.Ic=new Op,this.Tc={},this.Ec=new Map,this.Ac=Cp.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}async function fg(e,t){const n=Ag(e);let r,s;const i=n.wc.get(t);if(i)r=i.targetId,n.sharedClientState.addLocalQueryTarget(r),s=i.view.lc();else{const e=await Jp(n.localStore,gh(t)),i=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,s=await pg(n,t,r,"current"===i,e.resumeToken),n.isPrimaryClient&&Em(n.remoteStore,e)}return s}async function pg(e,t,n,r,s){e.Rc=(t,n,r)=>async function(e,t,n,r){let s=t.view.sc(n);s.zi&&(s=await Zp(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.sc(n,s)}));const i=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i);return Sg(e,t.targetId,o.cc),o.snapshot}(e,t,n,r);const i=await Zp(e.localStore,t,!0),o=new cg(t,i.ir),a=o.sc(i.documents),l=Lf.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=o.applyChanges(a,e.isPrimaryClient,l);Sg(e,n,c.cc);const u=new ug(t,n,o);return e.wc.set(t,u),e._c.has(n)?e._c.get(n).push(t):e._c.set(n,[t]),c.snapshot}async function mg(e,t){const n=uu(e),r=n.wc.get(t),s=n._c.get(r.targetId);if(s.length>1)return n._c.set(r.targetId,s.filter(e=>!bh(e,t))),void n.wc.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Yp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Nm(n.remoteStore,r.targetId),Ng(n,r.targetId)}).catch(Vu)):(Ng(n,r.targetId),await Yp(n.localStore,r.targetId,!0))}async function gg(e,t){const n=uu(e);try{const e=await function(e,t){const n=uu(e),r=t.snapshotVersion;let s=n.Ji;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Zi.newChangeBuffer({trackRemovals:!0});s=n.Ji;const o=[];t.targetChanges.forEach((i,a)=>{const l=s.get(a);if(!l)return;o.push(n.Bs.removeMatchingKeys(e,i.removedDocuments,a).next(()=>n.Bs.addMatchingKeys(e,i.addedDocuments,a)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(a)?c=c.withResumeToken(od.EMPTY_BYTE_STRING,Tu.min()).withLastLimboFreeSnapshotVersion(Tu.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(a,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,i)&&o.push(n.Bs.updateTargetData(e,c))});let a=Ch(),l=Mh();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Qp(e,i,t.documentUpdates).next(e=>{a=e.nr,l=e.sr})),!r.isEqual(Tu.min())){const t=n.Bs.getLastRemoteSnapshotVersion(e).next(t=>n.Bs.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return zu.waitFor(o).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,a,l)).next(()=>a)}).then(e=>(n.Ji=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.yc.get(t);r&&(cu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.fc=!0:e.modifiedDocuments.size>0?cu(r.fc):e.removedDocuments.size>0&&(cu(r.fc),r.fc=!1))}),await Cg(n,e,t)}catch(e){await Vu(e)}}function yg(e,t,n){const r=uu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.wc.forEach((n,r)=>{const s=r.view.Mu(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=uu(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.listeners)s.Mu(t)&&(r=!0)}),r&&ig(n)}(r.eventManager,t),e.length&&r.dc.nu(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function vg(e,t,n){const r=uu(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.yc.get(t),i=s&&s.key;if(i){let e=new Zu(Ru.comparator);e=e.insert(i,Od.newNoDocument(i,Tu.min()));const n=Mh().add(i),s=new Df(Tu.min(),new Map,new Zu(ku),e,n);await gg(r,s),r.gc=r.gc.remove(i),r.yc.delete(t),Tg(r)}else await Yp(r.localStore,t,!1).then(()=>Ng(r,t,n)).catch(Vu)}async function bg(e,t){const n=uu(e),r=t.batch.batchId;try{const e=await function(e,t){const n=uu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Zi.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let o=zu.resolve();return i.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);cu(null!==i),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),o.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=Mh();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);Eg(n,r,null),wg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Cg(n,e)}catch(e){await Vu(e)}}async function xg(e,t,n){const r=uu(e);try{const e=await function(e,t){const n=uu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(cu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);Eg(r,t,n),wg(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Cg(r,e)}catch(n){await Vu(n)}}function wg(e,t){(e.Ec.get(t)||[]).forEach(e=>{e.resolve()}),e.Ec.delete(t)}function Eg(e,t,n){const r=uu(e);let s=r.Tc[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Tc[r.currentUser.toKey()]=s}}function Ng(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e._c.get(t))e.wc.delete(r),n&&e.dc.Pc(r,n);e._c.delete(t),e.isPrimaryClient&&e.Ic.Is(t).forEach(t=>{e.Ic.containsKey(t)||kg(e,t)})}function kg(e,t){e.mc.delete(t.path.canonicalString());const n=e.gc.get(t);null!==n&&(Nm(e.remoteStore,n),e.gc=e.gc.remove(t),e.yc.delete(n),Tg(e))}function Sg(e,t,n){for(const r of n)r instanceof ag?(e.Ic.addReference(r.key,t),_g(e,r)):r instanceof lg?(su("SyncEngine","Document no longer in limbo: "+r.key),e.Ic.removeReference(r.key,t),e.Ic.containsKey(r.key)||kg(e,r.key)):lu()}function _g(e,t){const n=t.key,r=n.path.canonicalString();e.gc.get(n)||e.mc.has(r)||(su("SyncEngine","New document in limbo: "+n),e.mc.add(r),Tg(e))}function Tg(e){for(;e.mc.size>0&&e.gc.size<e.maxConcurrentLimboResolutions;){const t=e.mc.values().next().value;e.mc.delete(t);const n=new Ru(Iu.fromString(t)),r=e.Ac.next();e.yc.set(r,new dg(n)),e.gc=e.gc.insert(n,r),Em(e.remoteStore,new wp(gh(uh(n.path)),r,"TargetPurposeLimboResolution",$u.ct))}}async function Cg(e,t,n){const r=uu(e),s=[],i=[],o=[];r.wc.isEmpty()||(r.wc.forEach((e,a)=>{o.push(r.Rc(a,t,n).then(e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){s.push(e);const t=$p.Li(a.targetId,e);i.push(t)}}))}),await Promise.all(o),r.dc.nu(s),await async function(e,t){const n=uu(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>zu.forEach(t,t=>zu.forEach(t.Fi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>zu.forEach(t.Bi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Bu(e))throw e;su("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ji.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ji=n.Ji.insert(e,s)}}}(r.localStore,i))}async function Ig(e,t){const n=uu(e);if(!n.currentUser.isEqual(t)){su("SyncEngine","User change. New user:",t.toKey());const e=await Kp(n.localStore,t);n.currentUser=t,function(e){e.Ec.forEach(e=>{e.forEach(e=>{e.reject(new hu(du.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ec.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Cg(n,e.er)}}function jg(e,t){const n=uu(e),r=n.yc.get(t);if(r&&r.fc)return Mh().add(r.key);{let e=Mh();const r=n._c.get(t);if(!r)return e;for(const t of r){const r=n.wc.get(t);e=e.unionWith(r.view.nc)}return e}}function Ag(e){const t=uu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=gg.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=jg.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=vg.bind(null,t),t.dc.nu=rg.bind(null,t.eventManager),t.dc.Pc=sg.bind(null,t.eventManager),t}function Rg(e){const t=uu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=bg.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=xg.bind(null,t),t}class Pg{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=hm(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Wp(this.persistence,new qp,e.initialUser,this.serializer)}createPersistence(e){return new Vp(Bp.zs,this.serializer)}createSharedClientState(e){return new nm}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Og{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>yg(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ig.bind(null,this.syncEngine),await Hm(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new eg}createDatastore(e){const t=hm(e.databaseInfo.databaseId),n=(r=e.databaseInfo,new um(r));var r;return function(e,t,n,r){return new ym(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,s=e=>yg(this.syncEngine,e,0),i=sm.D()?new sm:new rm,new bm(t,n,r,s,i);var t,n,r,s,i}createSyncEngine(e,t){return function(e,t,n,r,s,i,o){const a=new hg(e,t,n,r,s,i);return o&&(a.vc=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=uu(e);su("RemoteStore","RemoteStore shutting down."),t.vu.add(5),await wm(t),t.Pu.shutdown(),t.bu.set("Unknown")}(this.remoteStore)}}class Dg{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):iu("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Lg{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=eu.UNAUTHENTICATED,this.clientId=Nu.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,async e=>{su("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(su("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new hu(du.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new fu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(Uw){const n=Qm(Uw,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Mg(e,t){e.asyncQueue.verifyOperationInProgress(),su("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Kp(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Ug(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Vg(e);su("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>qm(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>qm(t.remoteStore,n)),e._onlineComponents=t}function Fg(e){return"FirebaseError"===e.name?e.code===du.FAILED_PRECONDITION||e.code===du.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function Vg(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){su("FirestoreClient","Using user provided OfflineComponentProvider");try{await Mg(e,e._uninitializedComponentsProvider._offline)}catch(Uw){const n=Uw;if(!Fg(n))throw n;ou("Error using user provided cache. Falling back to memory cache: "+n),await Mg(e,new Pg)}}else su("FirestoreClient","Using default OfflineComponentProvider"),await Mg(e,new Pg);return e._offlineComponents}async function zg(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(su("FirestoreClient","Using user provided OnlineComponentProvider"),await Ug(e,e._uninitializedComponentsProvider._online)):(su("FirestoreClient","Using default OnlineComponentProvider"),await Ug(e,new Og))),e._onlineComponents}function Bg(e){return zg(e).then(e=>e.syncEngine)}async function $g(e){const t=await zg(e),n=t.eventManager;return n.onListen=fg.bind(null,t.syncEngine),n.onUnlisten=mg.bind(null,t.syncEngine),n}function qg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new fu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Dg({next:i=>{t.enqueueAndForget(()=>ng(e,o));const a=i.docs.has(n);!a&&i.fromCache?s.reject(new hu(du.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&i.fromCache&&r&&"server"===r.source?s.reject(new hu(du.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(i)},error:e=>s.reject(e)}),o=new og(uh(n.path),i,{includeMetadataChanges:!0,Ku:!0});return tg(e,o)}(await $g(e),e.asyncQueue,t,n,r)),r.promise}function Hg(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new fu;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Dg({next:n=>{t.enqueueAndForget(()=>ng(e,o)),n.fromCache&&"server"===r.source?s.reject(new hu(du.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),o=new og(n,i,{includeMetadataChanges:!0,Ku:!0});return tg(e,o)}(await $g(e),e.asyncQueue,t,n,r)),r.promise}function Wg(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Kg=new Map;function Gg(e,t,n){if(!n)throw new hu(du.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function Qg(e){if(!Ru.isDocumentKey(e))throw new hu(du.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Xg(e){if(Ru.isDocumentKey(e))throw new hu(du.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Jg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":lu()}function Yg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new hu(du.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Jg(e);throw new hu(du.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}class Zg{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new hu(du.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new hu(du.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new hu(du.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Wg(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new hu(du.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new hu(du.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new hu(du.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(t=this.experimentalLongPollingOptions,n=e.experimentalLongPollingOptions,t.timeoutSeconds===n.timeoutSeconds)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams;var t,n}}class ey{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Zg({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new hu(du.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new hu(du.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Zg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new mu;switch(e.type){case"firstParty":return new bu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new hu(du.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Kg.get(e);t&&(su("ComponentProvider","Removing Datastore"),Kg.delete(e),t.terminate())}(this),Promise.resolve()}}class ty{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ry(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ty(this.firestore,e,this._key)}}class ny{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ny(this.firestore,e,this._query)}}class ry extends ny{constructor(e,t,n){super(e,t,uh(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ty(this.firestore,null,new Ru(e))}withConverter(e){return new ry(this.firestore,e,this._path)}}function sy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=st(e),Gg("collection","path",t),e instanceof ey){const n=Iu.fromString(t,...r);return Xg(n),new ry(e,null,n)}{if(!(e instanceof ty||e instanceof ry))throw new hu(du.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Iu.fromString(t,...r));return Xg(n),new ry(e.firestore,null,n)}}function iy(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=st(e),1===arguments.length&&(t=Nu.A()),Gg("doc","path",t),e instanceof ey){const n=Iu.fromString(t,...r);return Qg(n),new ty(e,null,new Ru(n))}{if(!(e instanceof ty||e instanceof ry))throw new hu(du.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(Iu.fromString(t,...r));return Qg(n),new ty(e.firestore,e instanceof ry?e.converter:null,new Ru(n))}}class oy{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new fm(this,"async_queue_retry"),this.Xc=()=>{const e=dm();e&&su("AsyncQueue","Visibility state changed to "+e.visibilityState),this.qo.Mo()};const e=dm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new fu;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(e){if(!Bu(e))throw e;su("AsyncQueue","Operation failed with retryable error: "+e)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(e=>{this.Wc=e,this.Hc=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw iu("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Hc=!1,e))));return this.Gc=t,t}enqueueAfterDelay(e,t,n){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const r=Gm.createAndSchedule(this,e,t,n,e=>this.na(e));return this.zc.push(r),r}Zc(){this.Wc&&lu()}verifyOperationInProgress(){}async sa(){let e;do{e=this.Gc,await e}while(e!==this.Gc)}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}class ay extends ey{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new oy,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||cy(this),this._firestoreClient.terminate()}}function ly(e){return e._firestoreClient||cy(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function cy(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new pd(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Wg(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._firestoreClient=new Lg(e._authCredentials,e._appCheckCredentials,e._queue,i),(null===(n=s.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=s.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:s.cache.kind,_offline:s.cache._offlineComponentProvider,_online:s.cache._onlineComponentProvider})}class uy{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uy(od.fromBase64String(e))}catch(e){throw new hu(du.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new uy(od.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dy{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new hu(du.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Au(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hy{constructor(e){this._methodName=e}}class fy{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new hu(du.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new hu(du.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ku(this._lat,e._lat)||ku(this._long,e._long)}}const py=/^__.*__$/;class my{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new ff(e,this.data,this.fieldMask,t,this.fieldTransforms):new hf(e,this.data,t,this.fieldTransforms)}}class gy{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new ff(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yy(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw lu()}}class vy{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new vy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.fa(e),r}da(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.aa({path:n,la:!1});return r.ua(),r}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Dy(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(yy(this.ca)&&py.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class by{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||hm(e)}ya(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new vy({ca:e,methodName:t,ga:n,path:Au.emptyPath(),la:!1,ma:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xy(e){const t=e._freezeSettings(),n=hm(e._databaseId);return new by(e._databaseId,!!t.ignoreUndefinedProperties,n)}function wy(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const o=e.ya(i.merge||i.mergeFields?2:0,t,n,s);Ay("Data must be an object, but it was:",o,r);const a=Iy(r,o);let l,c;if(i.merge)l=new sd(o.fieldMask),c=o.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Ry(t,r,n);if(!o.contains(s))throw new hu(du.INVALID_ARGUMENT,`Field '${s}' is specified in your field mask but missing from your input data.`);Ly(e,s)||e.push(s)}l=new sd(e),c=o.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=o.fieldTransforms;return new my(new Rd(a),l,c)}class Ey extends hy{_toFieldTransform(e){if(2!==e.ca)throw 1===e.ca?e._a(`${this._methodName}() can only appear at the top level of your update data`):e._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ey}}class Ny extends hy{_toFieldTransform(e){return new tf(e.path,new Kh)}isEqual(e){return e instanceof Ny}}class ky extends hy{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Yh(e.serializer,Bh(e.serializer,this.Ia));return new tf(e.path,t)}isEqual(e){return this===e}}function Sy(e,t,n,r){const s=e.ya(1,t,n);Ay("Data must be an object, but it was:",s,r);const i=[],o=Rd.empty();Ju(r,(e,r)=>{const a=Oy(t,e,n);r=st(r);const l=s.da(a);if(r instanceof Ey)i.push(a);else{const e=Cy(r,l);null!=e&&(i.push(a),o.set(a,e))}});const a=new sd(i);return new gy(o,a,s.fieldTransforms)}function _y(e,t,n,r,s,i){const o=e.ya(1,t,n),a=[Ry(t,r,n)],l=[s];if(i.length%2!=0)throw new hu(du.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<i.length;h+=2)a.push(Ry(t,i[h])),l.push(i[h+1]);const c=[],u=Rd.empty();for(let h=a.length-1;h>=0;--h)if(!Ly(c,a[h])){const e=a[h];let t=l[h];t=st(t);const n=o.da(e);if(t instanceof Ey)c.push(e);else{const r=Cy(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new sd(c);return new gy(u,d,o.fieldTransforms)}function Ty(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cy(n,e.ya(r?4:3,t))}function Cy(e,t){if(jy(e=st(e)))return Ay("Unsupported field value:",t,e),Iy(e,t);if(e instanceof hy)return function(e,t){if(!yy(t.ca))throw t._a(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t._a(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.la&&4!==t.ca)throw t._a("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Cy(s,t.wa(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=st(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return Bh(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=_u.fromDate(e);return{timestampValue:Qf(t.serializer,n)}}if(e instanceof _u){const n=new _u(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Qf(t.serializer,n)}}if(e instanceof fy)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof uy)return{bytesValue:Xf(t.serializer,e._byteString)};if(e instanceof ty){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t._a(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Zf(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t._a(`Unsupported field value: ${Jg(e)}`)}(e,t)}function Iy(e,t){const n={};return Yu(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Ju(e,(e,r)=>{const s=Cy(r,t.ha(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function jy(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof _u||e instanceof fy||e instanceof uy||e instanceof ty||e instanceof hy)}function Ay(e,t,n){if(!jy(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Jg(n);throw"an object"===r?t._a(e+" a custom object"):t._a(e+" "+r)}}function Ry(e,t,n){if((t=st(t))instanceof dy)return t._internalPath;if("string"==typeof t)return Oy(e,t);throw Dy("Field path arguments must be of type string or ",e,!1,void 0,n)}const Py=new RegExp("[~\\*/\\[\\]]");function Oy(e,t,n){if(t.search(Py)>=0)throw Dy(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new dy(...t.split("."))._internalPath}catch(r){throw Dy(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Dy(e,t,n,r,s){const i=r&&!r.isEmpty(),o=void 0!==s;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${r}`),o&&(l+=` in document ${s}`),l+=")"),new hu(du.INVALID_ARGUMENT,a+e+l)}function Ly(e,t){return e.some(e=>e.isEqual(t))}class My{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new ty(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Uy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Fy("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Uy extends My{data(){return super.data()}}function Fy(e,t){return"string"==typeof t?Oy(e,t):t instanceof dy?t._internalPath:t._delegate._internalPath}function Vy(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new hu(du.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zy{}class By extends zy{}function $y(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof zy&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Wy).length,n=e.filter(e=>e instanceof qy).length;if(t>1||t>0&&n>0)throw new hu(du.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const o of n)e=o._apply(e);return e}class qy extends By{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new qy(e,t,n)}_apply(e){const t=this._parse(e);return Jy(e._query,t),new ny(e.firestore,e.converter,yh(e._query,t))}_parse(e){const t=xy(e.firestore),n=function(e,t,n,r,s,i,o){let a;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new hu(du.INVALID_ARGUMENT,`Invalid Query. You can't perform '${i}' queries on documentId().`);if("in"===i||"not-in"===i){Xy(o,i);const t=[];for(const n of o)t.push(Qy(r,e,n));a={arrayValue:{values:t}}}else a=Qy(r,e,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Xy(o,i),a=Ty(n,"where",o,"in"===i||"not-in"===i);return zd.create(s,i,a)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Hy(e,t,n){const r=t,s=Fy("where",e);return qy._create(s,r,n)}class Wy extends zy{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wy(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:Bd.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Jy(n,s),n=yh(n,s)}(e._query,t),new ny(e.firestore,e.converter,yh(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Ky extends By{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Ky(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new hu(du.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new hu(du.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Ud(t,n);return function(e,t){if(null===hh(e)){const n=fh(e);null!==n&&Yy(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new ny(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new lh(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Gy(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Fy("orderBy",e);return Ky._create(n,t)}function Qy(e,t,n){if("string"==typeof(n=st(n))){if(""===n)throw new hu(du.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ph(t)&&-1!==n.indexOf("/"))throw new hu(du.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Iu.fromString(n));if(!Ru.isDocumentKey(r))throw new hu(du.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return kd(e,new Ru(r))}if(n instanceof ty)return kd(e,n._key);throw new hu(du.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Jg(n)}.`)}function Xy(e,t){if(!Array.isArray(e)||0===e.length)throw new hu(du.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Jy(e,t){if(t.isInequality()){const n=fh(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new hu(du.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${r.toString()}'`);const s=hh(e);null!==s&&Yy(e,r,s)}const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new hu(du.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new hu(du.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}function Yy(e,t,n){if(!n.isEqual(t))throw new hu(du.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Zy{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(yd(e)){case 0:return null;case 1:return e.booleanValue;case 2:return cd(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ud(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw lu()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return Ju(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new fy(cd(e.latitude),cd(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=hd(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(fd(e));default:return null}}convertTimestamp(e){const t=ld(e);return new _u(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Iu.fromString(e);cu(xp(n));const r=new md(n.get(1),n.get(3)),s=new Ru(n.popFirst(5));return r.isEqual(t)||iu(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function ev(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class tv{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nv extends My{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new rv(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Fy("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class rv extends nv{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class sv{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new tv(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new rv(this._firestore,this._userDataWriter,n.key,n,new tv(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new hu(du.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new rv(e._firestore,e._userDataWriter,n.doc.key,n.doc,new tv(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new rv(e._firestore,e._userDataWriter,t.doc.key,t.doc,new tv(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:iv(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function iv(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return lu()}}function ov(e){e=Yg(e,ty);const t=Yg(e.firestore,ay);return qg(ly(t),e._key).then(n=>fv(t,e,n))}class av extends Zy{constructor(e){super(),this.firestore=e}convertBytes(e){return new uy(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ty(this.firestore,null,t)}}function lv(e){e=Yg(e,ny);const t=Yg(e.firestore,ay),n=ly(t),r=new av(t);return Vy(e._query),Hg(n,e._query).then(n=>new sv(t,r,e,n))}function cv(e,t,n){e=Yg(e,ty);const r=Yg(e.firestore,ay),s=ev(e.converter,t,n);return hv(r,[wy(xy(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,rf.none())])}function uv(e,t,n){e=Yg(e,ty);const r=Yg(e.firestore,ay),s=xy(r);let i;for(var o=arguments.length,a=new Array(o>3?o-3:0),l=3;l<o;l++)a[l-3]=arguments[l];return i="string"==typeof(t=st(t))||t instanceof dy?_y(s,"updateDoc",e._key,t,n,a):Sy(s,"updateDoc",e._key,t),hv(r,[i.toMutation(e._key,rf.exists(!0))])}function dv(e){return hv(Yg(e.firestore,ay),[new yf(e._key,rf.none())])}function hv(e,t){return function(e,t){const n=new fu;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Rg(e);try{const e=await function(e,t){const n=uu(e),r=_u.now(),s=t.reduce((e,t)=>e.add(t.key),Mh());let i,o;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let a=Ch(),l=Mh();return n.Zi.getEntries(e,s).next(e=>{a=e,a.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,a)).next(s=>{i=s;const o=[];for(const e of t){const t=uf(e,i.get(e.key).overlayedDocument);null!=t&&o.push(new ff(e.key,t,Pd(t.value.mapValue),rf.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,o,t)}).next(t=>{o=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:o.batchId,changes:Ah(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Tc[e.currentUser.toKey()];r||(r=new Zu(ku)),r=r.insert(t,n),e.Tc[e.currentUser.toKey()]=r}(r,e.batchId,n),await Cg(r,e.changes),await Dm(r.remoteStore)}catch(e){const t=Qm(e,"Failed to persist write");n.reject(t)}}(await Bg(e),t,n)),n.promise}(ly(e),t)}function fv(e,t,n){const r=n.docs.get(t._key),s=new av(e);return new nv(e,s,t._key,r,new tv(n.hasPendingWrites,n.fromCache),t.converter)}function pv(e){return new ky("increment",e)}!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){tu=e}(gn),hn(new it("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),o=new ay(new yu(e.getProvider("auth-internal")),new wu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new hu(du.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new md(e.options.projectId,t)}(i,r),i);return s=Object.assign({useFetchStreams:t},s),o._setSettings(s),o},"PUBLIC").setMultipleInstances(!0)),bn(Zc,"3.13.0",e),bn(Zc,"3.13.0","esm2017")}();const mv="firebasestorage.googleapis.com",gv="storageBucket";class yv extends Ge{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;super(xv(e),`Firebase Storage: ${t} (${xv(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yv.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xv(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var vv,bv;function xv(e){return"storage/"+e}function wv(){return new yv(vv.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ev(){return new yv(vv.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Nv(){return new yv(vv.CANCELED,"User canceled the upload/download.")}function kv(e){return new yv(vv.INVALID_ARGUMENT,e)}function Sv(){return new yv(vv.APP_DELETED,"The Firebase app was deleted.")}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(vv||(vv={}));class _v{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=_v.makeFromUrl(e,t)}catch(Uw){return new _v(e,"")}if(""===n.path)return n;throw r=e,new yv(vv.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)";const s=new RegExp("^gs://"+r+"(/(.*))?$","i");function i(e){e.path_=decodeURIComponent(e.path)}const o=t.replace(/[.]/g,"\\."),a=[{regex:s,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${o}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp(`^https?://${t===mv?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:i}];for(let l=0;l<a.length;l++){const t=a[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let s=r[t.indices.path];s||(s=""),n=new _v(e,s),t.postModify(n);break}}if(null==n)throw function(e){return new yv(vv.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class Tv{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(){}}function Cv(e,t,n,r){if(r<t)throw kv(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw kv(`Invalid value for '${e}'. Expected ${n} or less.`)}function Iv(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1),n}function jv(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),s=-1!==t.indexOf(e);return n||r||s}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(bv||(bv={}));class Av{constructor(e,t,n,r,s,i,o,a,l,c,u){let d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=i,this.callback_=o,this.errorCallback_=a,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=u,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()})}start_(){const e=(e,t)=>{if(t)return void e(!1,new Rv(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===bv.NO_ERROR,s=n.getStatus();if(!t||jv(s,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===bv.ABORT;return void e(!1,new Rv(!1,null,t))}const i=-1!==this.successCodes_.indexOf(s);e(!0,new Rv(i,n))})},t=(e,t)=>{const n=this.resolve_,r=this.reject_,s=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(s,s.getResponse());!function(e){return void 0!==e}(e)?n():n(e)}catch(Uw){r(Uw)}else if(null!==s){const e=wv();e.serverResponse=s.getErrorText(),this.errorCallback_?r(this.errorCallback_(s,e)):r(e)}else if(t.canceled){r(this.appDelete_?Sv():Nv())}else{r(Ev())}};this.canceled_?t(0,new Rv(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,s=null,i=null,o=!1,a=0;function l(){return 2===a}let c=!1;function u(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function d(t){s=setTimeout(()=>{s=null,e(f,l())},t)}function h(){i&&clearTimeout(i)}function f(e){if(c)return void h();for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];if(e)return h(),void u.call(null,e,...n);if(l()||o)return h(),void u.call(null,e,...n);let i;r<64&&(r*=2),1===a?(a=2,i=0):i=1e3*(r+Math.random()),d(i)}let p=!1;function m(e){p||(p=!0,h(),c||(null!==s?(e||(a=2),clearTimeout(s),d(0)):e||(a=1)))}return d(0),i=setTimeout(()=>{o=!0,m(!0)},n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Rv{constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}function Pv(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}class Ov{constructor(e,t){this._service=e,this._location=t instanceof _v?t:_v.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Ov(e,t)}get root(){const e=new _v(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Pv(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new _v(this._location.bucket,e);return new Ov(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw function(e){return new yv(vv.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(e)}}function Dv(e,t){const n=null===t||void 0===t?void 0:t[gv];return null==n?null:_v.makeFromBucketSpec(n,e)}class Lv{constructor(e,t,n,r,s){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=mv,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?_v.makeFromBucketSpec(r,this._host):Dv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=_v.makeFromBucketSpec(this._url,e):this._bucket=Dv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Cv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Cv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});if(e){return(await e.getToken()).token}return null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ov(this,e)}_makeRequest(e,t,n,r){let s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Tv(Sv());{const i=function(e,t,n,r,s,i){let o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];const a=Iv(e.urlParams),l=e.url+a,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,i),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Av(l,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,s,o)}(e,this._appId,n,r,t,this._firebaseVersion,s);return this._requests.add(i),i.getPromise().then(()=>this._requests.delete(i),()=>this._requests.delete(i)),i}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const Mv="@firebase/storage",Uv="0.11.2",Fv="storage";function Vv(e,t){let{instanceIdentifier:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Lv(r,s,i,n,gn)}hn(new it(Fv,Vv,"PUBLIC").setMultipleInstances(!0)),bn(Mv,Uv,""),bn(Mv,Uv,"esm2017");const zv=yn({apiKey:"AIzaSyAP7ED_F_BFusSYlTEvQvLk4bavb0fu1jw",authDomain:"auto-host-refacciones.firebaseapp.com",projectId:"auto-host-refacciones",storageBucket:"auto-host-refacciones.appspot.com",messagingSenderId:"474507344675",appId:"1:474507344675:web:2db1eb8e1750651cc52a96"}),Bv=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn();const t=fn(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=fn(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(Je(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;Ln(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Si,persistence:[Us,ws,Ns]}),r=$e("authTokenSyncURL");if(r){const e=(s=r,async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>Ii)return;const r=null===t||void 0===t?void 0:t.token;ji!==r&&(ji=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});!function(e,t,n){st(e).beforeAuthStateChanged(t,n)}(n,e,()=>e(n.currentUser)),function(e,t,n,r){st(e).onIdTokenChanged(t,n,r)}(n,t=>e(t))}var s;const i=Ve("auth");return i&&qr(n,`http://${i}`),n}(zv),$v=function(e,t){const n="string"==typeof e?e:t||"(default)",r=fn("object"==typeof e?e:vn(),"firestore").getImmediate({identifier:n});if(!r._initialized){const e=ze("firestore");e&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var s;const i=(e=Yg(e,ey))._getSettings(),o=`${t}:${n}`;if("firestore.googleapis.com"!==i.host&&i.host!==o&&ou("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=eu.MOCK_USER;else{t=He(r.mockUserToken,null===(s=e._app)||void 0===s?void 0:s.options.projectId);const i=r.mockUserToken.sub||r.mockUserToken.user_id;if(!i)throw new hu(du.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new eu(i)}e._authCredentials=new gu(new pu(t,n))}}(r,...e)}return r}(zv);!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:vn(),t=arguments.length>1?arguments[1]:void 0;e=st(e);const n=fn(e,Fv).getImmediate({identifier:t}),r=ze("storage");r&&function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};!function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:s}=r;s&&(e._overrideAuthToken="string"===typeof s?s:He(s,e.app.options.projectId))}(e,t,n,r)}(n,...r)}(zv);var qv=n(579);const Hv=(0,i.createContext)(),Wv=()=>(0,i.useContext)(Hv),Kv=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{const e=function(e,t,n,r){return st(e).onAuthStateChanged(t,n,r)}(Bv,async e=>{if(e){const t=iy($v,"users",e.uid),n=await ov(t);n.exists()?(e.firestoreProfile=n.data(),r(e),console.log("Usuario autenticado y perfil de Firestore cargado:",e)):(r(e),console.warn("Usuario autenticado, pero perfil de Firestore no encontrado. UID:",e.uid))}else r(null),console.log("No hay usuario autenticado.");o(!1)});return e},[]);const a={currentUser:n,loadingAuth:s,logout:()=>function(e){return st(e).signOut()}(Bv)};return(0,qv.jsx)(Hv.Provider,{value:a,children:!s&&t})},Gv=n.p+"static/media/logo_AUTOHOST.a535d3ba47a59bf01baf.png",Qv=()=>{const e=re(),{currentUser:t,logout:n,loadingAuth:r}=Wv();return r?(0,qv.jsx)("header",{className:"bg-white shadow-md py-4 px-6 rounded-b-lg",children:(0,qv.jsxs)("nav",{className:"container mx-auto flex justify-between items-center",children:[(0,qv.jsx)("div",{className:"flex items-center space-x-2",children:(0,qv.jsx)("h1",{className:"text-3xl font-extrabold text-blue-800",children:"Cargando..."})}),(0,qv.jsxs)("ul",{className:"flex space-x-6 text-lg font-semibold text-gray-700",children:[(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/"),className:"hover:text-blue-600 transition-colors",children:"Inicio"})}),(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/catalogo"),className:"hover:text-blue-600 transition-colors",children:"Cat\xe1logo"})}),(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/ofertas"),className:"hover:text-blue-600 transition-colors",children:"Ofertas"})}),(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/acerca-de"),className:"hover:text-blue-600 transition-colors",children:"Acerca de"})})]}),(0,qv.jsx)("div",{className:"text-gray-500",children:"Cargando usuario..."})]})}):(0,qv.jsx)("header",{className:"bg-white shadow-md py-4 px-6 rounded-b-lg",children:(0,qv.jsxs)("nav",{className:"container mx-auto flex justify-between items-center",children:[(0,qv.jsx)("div",{className:"flex items-center space-x-2",children:(0,qv.jsx)("img",{src:Gv,alt:"AUTO HOST Logo",className:"h-12 w-auto"})}),(0,qv.jsxs)("ul",{className:"flex space-x-6 text-lg font-semibold text-gray-700",children:[(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/"),className:"hover:text-blue-600 transition-colors",children:"Inicio"})}),(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/catalogo"),className:"hover:text-blue-600 transition-colors",children:"Cat\xe1logo"})}),(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/ofertas"),className:"hover:text-blue-600 transition-colors",children:"Ofertas"})}),(0,qv.jsx)("li",{children:(0,qv.jsx)("button",{onClick:()=>e("/acerca-de"),className:"hover:text-blue-600 transition-colors",children:"Acerca de"})})]}),(0,qv.jsx)("div",{className:"flex items-center space-x-4",children:t?(0,qv.jsxs)(qv.Fragment,{children:[(0,qv.jsx)("button",{onClick:()=>e("/messages"),className:"text-gray-700 font-medium hover:text-blue-600 transition-colors py-2 px-3 rounded-full",children:"Mensajes"}),(0,qv.jsx)("button",{onClick:()=>e("/cart"),className:"text-gray-700 font-medium hover:text-blue-600 transition-colors py-2 px-3 rounded-full",children:"Mi Carrito"}),(0,qv.jsx)("button",{onClick:()=>e("/my-orders"),className:"text-gray-700 font-medium hover:text-blue-600 transition-colors py-2 px-3 rounded-full",children:"Mis Pedidos"}),t.firestoreProfile&&"Vendedor"===t.firestoreProfile.userType&&(0,qv.jsx)("button",{onClick:()=>e("/seller-dashboard"),className:"text-orange-600 font-bold hover:text-orange-700 transition-colors py-2 px-3 rounded-full",children:"Panel de Vendedor"}),(0,qv.jsxs)("span",{className:"text-gray-700 font-medium",children:["Hola, ",t.firestoreProfile&&t.firestoreProfile.name?t.firestoreProfile.name:t.email]}),(0,qv.jsx)("button",{onClick:async()=>{try{await n(),console.log("Sesi\xf3n cerrada con \xe9xito."),e("/login")}catch(t){console.error("Error al cerrar sesi\xf3n:",t)}},className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-5 rounded-full transition-colors shadow-md",children:"Salir"})]}):(0,qv.jsxs)(qv.Fragment,{children:[(0,qv.jsx)("button",{onClick:()=>e("/login"),className:"text-gray-700 font-medium hover:text-blue-600 transition-colors",children:"Ingresar"}),(0,qv.jsx)("button",{onClick:()=>e("/register"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-5 rounded-full transition-colors shadow-md",children:"Crear cuenta"})]})})]})})},Xv=()=>(0,qv.jsx)("footer",{className:"bg-blue-900 text-white py-8 px-4 rounded-t-lg shadow-inner",children:(0,qv.jsxs)("div",{className:"container mx-auto text-center",children:[(0,qv.jsxs)("div",{className:"flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-8 mb-6",children:[(0,qv.jsx)(je,{to:"/politica-privacidad",className:"hover:text-blue-300 transition-colors",children:"Pol\xedticas de Privacidad"}),(0,qv.jsx)("span",{className:"hidden sm:inline",children:"|"}),(0,qv.jsx)(je,{to:"/acerca-de",className:"hover:text-blue-300 transition-colors",children:"Acerca de Nosotros"})]}),(0,qv.jsx)("p",{className:"text-sm text-blue-200",children:"\xa9 2025 AUTO HOST. Todos los derechos reservados."})]})}),Jv=()=>{const e=re();return(0,qv.jsxs)(qv.Fragment,{children:[(0,qv.jsx)("section",{className:"bg-blue-800 text-white py-20 text-center rounded-b-lg shadow-lg",children:(0,qv.jsxs)("div",{className:"container mx-auto px-4",children:[(0,qv.jsx)("h2",{className:"text-5xl font-extrabold mb-4 leading-tight",children:"ENCUENTRA LAS MEJORES REFACCIONES"}),(0,qv.jsx)("p",{className:"text-xl mb-8 max-w-2xl mx-auto",children:"Calidad, confianza y los mejores precios del mercado de segunda mano."}),(0,qv.jsx)("button",{onClick:()=>e("/catalogo"),className:"bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-8 rounded-full text-lg transition-colors shadow-lg",children:"Ir al Cat\xe1logo de Piezas"})]})}),(0,qv.jsxs)("section",{className:"py-12 bg-white rounded-lg shadow-md mt-8 container mx-auto px-4",children:[(0,qv.jsx)("h3",{className:"text-3xl font-bold text-center text-gray-800 mb-8",children:"\xbfC\xf3mo funciona?"}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 text-center",children:[(0,qv.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,qv.jsx)("svg",{className:"w-16 h-16 text-blue-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),(0,qv.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"1. Busca tu pieza"}),(0,qv.jsx)("p",{className:"text-gray-600",children:"Usa nuestros filtros avanzados para encontrar la refacci\xf3n exacta que necesitas por nombre, categor\xeda o marca."})]}),(0,qv.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,qv.jsx)("svg",{className:"w-16 h-16 text-green-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 4.016A11.955 11.955 0 002.944 12c0 2.97.97 5.728 2.618 8.056A11.955 11.955 0 0012 21.056c2.97 0 5.728-.97 8.056-2.618A11.955 11.955 0 0021.056 12c0-2.97-.97-5.728-2.618-8.056z"})}),(0,qv.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"2. Compra con Confianza"}),(0,qv.jsx)("p",{className:"text-gray-600",children:"Todas las transacciones son seguras. Tu pago se retiene hasta que confirmes la recepci\xf3n del producto."})]}),(0,qv.jsxs)("div",{className:"flex flex-col items-center p-4",children:[(0,qv.jsx)("svg",{className:"w-16 h-16 text-purple-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4m0-10h.01"})}),(0,qv.jsx)("h4",{className:"text-xl font-semibold text-gray-800 mb-2",children:"3. Recibe tu refacci\xf3n"}),(0,qv.jsx)("p",{className:"text-gray-600",children:"Recibe tu pieza directamente en la puerta de tu casa o taller, con seguimiento de env\xedo integrado."})]})]})]})]})};function Yv(e,t){return function(){return e.apply(t,arguments)}}const{toString:Zv}=Object.prototype,{getPrototypeOf:eb}=Object,{iterator:tb,toStringTag:nb}=Symbol,rb=(sb=Object.create(null),e=>{const t=Zv.call(e);return sb[t]||(sb[t]=t.slice(8,-1).toLowerCase())});var sb;const ib=e=>(e=e.toLowerCase(),t=>rb(t)===e),ob=e=>t=>typeof t===e,{isArray:ab}=Array,lb=ob("undefined");function cb(e){return null!==e&&!lb(e)&&null!==e.constructor&&!lb(e.constructor)&&hb(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const ub=ib("ArrayBuffer");const db=ob("string"),hb=ob("function"),fb=ob("number"),pb=e=>null!==e&&"object"===typeof e,mb=e=>{if("object"!==rb(e))return!1;const t=eb(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(nb in e)&&!(tb in e)},gb=ib("Date"),yb=ib("File"),vb=ib("Blob"),bb=ib("FileList"),xb=ib("URLSearchParams"),[wb,Eb,Nb,kb]=["ReadableStream","Request","Response","Headers"].map(ib);function Sb(e,t){let n,r,{allOwnKeys:s=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),ab(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(cb(e))return;const r=s?Object.getOwnPropertyNames(e):Object.keys(e),i=r.length;let o;for(n=0;n<i;n++)o=r[n],t.call(null,e[o],o,e)}}function _b(e,t){if(cb(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,s=n.length;for(;s-- >0;)if(r=n[s],t===r.toLowerCase())return r;return null}const Tb="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,Cb=e=>!lb(e)&&e!==Tb;const Ib=(jb="undefined"!==typeof Uint8Array&&eb(Uint8Array),e=>jb&&e instanceof jb);var jb;const Ab=ib("HTMLFormElement"),Rb=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),Pb=ib("RegExp"),Ob=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};Sb(n,(n,s)=>{let i;!1!==(i=t(n,s,e))&&(r[s]=i||n)}),Object.defineProperties(e,r)};const Db=ib("AsyncFunction"),Lb=((e,t)=>{return e?setImmediate:t?(n=`axios@${Math.random()}`,r=[],Tb.addEventListener("message",e=>{let{source:t,data:s}=e;t===Tb&&s===n&&r.length&&r.shift()()},!1),e=>{r.push(e),Tb.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,hb(Tb.postMessage)),Mb="undefined"!==typeof queueMicrotask?queueMicrotask.bind(Tb):"undefined"!==typeof process&&process.nextTick||Lb,Ub={isArray:ab,isArrayBuffer:ub,isBuffer:cb,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||hb(e.append)&&("formdata"===(t=rb(e))||"object"===t&&hb(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&ub(e.buffer),t},isString:db,isNumber:fb,isBoolean:e=>!0===e||!1===e,isObject:pb,isPlainObject:mb,isEmptyObject:e=>{if(!pb(e)||cb(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(Uw){return!1}},isReadableStream:wb,isRequest:Eb,isResponse:Nb,isHeaders:kb,isUndefined:lb,isDate:gb,isFile:yb,isBlob:vb,isRegExp:Pb,isFunction:hb,isStream:e=>pb(e)&&hb(e.pipe),isURLSearchParams:xb,isTypedArray:Ib,isFileList:bb,forEach:Sb,merge:function e(){const{caseless:t}=Cb(this)&&this||{},n={},r=(r,s)=>{const i=t&&_b(n,s)||s;mb(n[i])&&mb(r)?n[i]=e(n[i],r):mb(r)?n[i]=e({},r):ab(r)?n[i]=r.slice():n[i]=r};for(let s=0,i=arguments.length;s<i;s++)arguments[s]&&Sb(arguments[s],r);return n},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return Sb(t,(t,r)=>{n&&hb(t)?e[r]=Yv(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let s,i,o;const a={};if(t=t||{},null==e)return t;do{for(s=Object.getOwnPropertyNames(e),i=s.length;i-- >0;)o=s[i],r&&!r(o,e,t)||a[o]||(t[o]=e[o],a[o]=!0);e=!1!==n&&eb(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:rb,kindOfTest:ib,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(ab(e))return e;let t=e.length;if(!fb(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[tb]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:Ab,hasOwnProperty:Rb,hasOwnProp:Rb,reduceDescriptors:Ob,freezeMethods:e=>{Ob(e,(t,n)=>{if(hb(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];hb(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return ab(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:_b,global:Tb,isContextDefined:Cb,isSpecCompliantForm:function(e){return!!(e&&hb(e.append)&&"FormData"===e[nb]&&e[tb])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(pb(e)){if(t.indexOf(e)>=0)return;if(cb(e))return e;if(!("toJSON"in e)){t[r]=e;const s=ab(e)?[]:{};return Sb(e,(e,t)=>{const i=n(e,r+1);!lb(i)&&(s[t]=i)}),t[r]=void 0,s}}return e};return n(e,0)},isAsyncFn:Db,isThenable:e=>e&&(pb(e)||hb(e))&&hb(e.then)&&hb(e.catch),setImmediate:Lb,asap:Mb,isIterable:e=>null!=e&&hb(e[tb])};function Fb(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s,this.status=s.status?s.status:null)}Ub.inherits(Fb,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ub.toJSONObject(this.config),code:this.code,status:this.status}}});const Vb=Fb.prototype,zb={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{zb[e]={value:e}}),Object.defineProperties(Fb,zb),Object.defineProperty(Vb,"isAxiosError",{value:!0}),Fb.from=(e,t,n,r,s,i)=>{const o=Object.create(Vb);return Ub.toFlatObject(e,o,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),Fb.call(o,e.message,t,n,r,s),o.cause=e,o.name=e.name,i&&Object.assign(o,i),o};const Bb=Fb;function $b(e){return Ub.isPlainObject(e)||Ub.isArray(e)}function qb(e){return Ub.endsWith(e,"[]")?e.slice(0,-2):e}function Hb(e,t,n){return e?e.concat(t).map(function(e,t){return e=qb(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Wb=Ub.toFlatObject(Ub,{},null,function(e){return/^is[A-Z]/.test(e)});const Kb=function(e,t,n){if(!Ub.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=Ub.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!Ub.isUndefined(t[e])})).metaTokens,s=n.visitor||c,i=n.dots,o=n.indexes,a=(n.Blob||"undefined"!==typeof Blob&&Blob)&&Ub.isSpecCompliantForm(t);if(!Ub.isFunction(s))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(Ub.isDate(e))return e.toISOString();if(Ub.isBoolean(e))return e.toString();if(!a&&Ub.isBlob(e))throw new Bb("Blob is not supported. Use a Buffer instead.");return Ub.isArrayBuffer(e)||Ub.isTypedArray(e)?a&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,s){let a=e;if(e&&!s&&"object"===typeof e)if(Ub.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(Ub.isArray(e)&&function(e){return Ub.isArray(e)&&!e.some($b)}(e)||(Ub.isFileList(e)||Ub.endsWith(n,"[]"))&&(a=Ub.toArray(e)))return n=qb(n),a.forEach(function(e,r){!Ub.isUndefined(e)&&null!==e&&t.append(!0===o?Hb([n],r,i):null===o?n:n+"[]",l(e))}),!1;return!!$b(e)||(t.append(Hb(s,n,i),l(e)),!1)}const u=[],d=Object.assign(Wb,{defaultVisitor:c,convertValue:l,isVisitable:$b});if(!Ub.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!Ub.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),Ub.forEach(n,function(n,i){!0===(!(Ub.isUndefined(n)||null===n)&&s.call(t,n,Ub.isString(i)?i.trim():i,r,d))&&e(n,r?r.concat(i):[i])}),u.pop()}}(e),t};function Gb(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Qb(e,t){this._pairs=[],e&&Kb(e,this,t)}const Xb=Qb.prototype;Xb.append=function(e,t){this._pairs.push([e,t])},Xb.toString=function(e){const t=e?function(t){return e.call(this,t,Gb)}:Gb;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Jb=Qb;function Yb(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Zb(e,t,n){if(!t)return e;const r=n&&n.encode||Yb;Ub.isFunction(n)&&(n={serialize:n});const s=n&&n.serialize;let i;if(i=s?s(t,n):Ub.isURLSearchParams(t)?t.toString():new Jb(t,n).toString(r),i){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+i}return e}const ex=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){Ub.forEach(this.handlers,function(t){null!==t&&e(t)})}},tx={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},nx={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:Jb,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},rx="undefined"!==typeof window&&"undefined"!==typeof document,sx="object"===typeof navigator&&navigator||void 0,ix=rx&&(!sx||["ReactNative","NativeScript","NS"].indexOf(sx.product)<0),ox="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,ax=rx&&window.location.href||"http://localhost",lx={...r,...nx};const cx=function(e){function t(e,n,r,s){let i=e[s++];if("__proto__"===i)return!0;const o=Number.isFinite(+i),a=s>=e.length;if(i=!i&&Ub.isArray(r)?r.length:i,a)return Ub.hasOwnProp(r,i)?r[i]=[r[i],n]:r[i]=n,!o;r[i]&&Ub.isObject(r[i])||(r[i]=[]);return t(e,n,r[i],s)&&Ub.isArray(r[i])&&(r[i]=function(e){const t={},n=Object.keys(e);let r;const s=n.length;let i;for(r=0;r<s;r++)i=n[r],t[i]=e[i];return t}(r[i])),!o}if(Ub.isFormData(e)&&Ub.isFunction(e.entries)){const n={};return Ub.forEachEntry(e,(e,r)=>{t(function(e){return Ub.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const ux={transitional:tx,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=Ub.isObject(e);s&&Ub.isHTMLForm(e)&&(e=new FormData(e));if(Ub.isFormData(e))return r?JSON.stringify(cx(e)):e;if(Ub.isArrayBuffer(e)||Ub.isBuffer(e)||Ub.isStream(e)||Ub.isFile(e)||Ub.isBlob(e)||Ub.isReadableStream(e))return e;if(Ub.isArrayBufferView(e))return e.buffer;if(Ub.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let i;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Kb(e,new lx.classes.URLSearchParams,{visitor:function(e,t,n,r){return lx.isNode&&Ub.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)},...t})}(e,this.formSerializer).toString();if((i=Ub.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Kb(i?{"files[]":e}:e,t&&new t,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),function(e,t,n){if(Ub.isString(e))try{return(t||JSON.parse)(e),Ub.trim(e)}catch(Uw){if("SyntaxError"!==Uw.name)throw Uw}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ux.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(Ub.isResponse(e)||Ub.isReadableStream(e))return e;if(e&&Ub.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(Uw){if(n){if("SyntaxError"===Uw.name)throw Bb.from(Uw,Bb.ERR_BAD_RESPONSE,this,null,this.response);throw Uw}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:lx.classes.FormData,Blob:lx.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ub.forEach(["delete","get","head","post","put","patch"],e=>{ux.headers[e]={}});const dx=ux,hx=Ub.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fx=Symbol("internals");function px(e){return e&&String(e).trim().toLowerCase()}function mx(e){return!1===e||null==e?e:Ub.isArray(e)?e.map(mx):String(e)}function gx(e,t,n,r,s){return Ub.isFunction(r)?r.call(this,t,n):(s&&(t=n),Ub.isString(t)?Ub.isString(r)?-1!==t.indexOf(r):Ub.isRegExp(r)?r.test(t):void 0:void 0)}class yx{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function s(e,t,n){const s=px(t);if(!s)throw new Error("header name must be a non-empty string");const i=Ub.findKey(r,s);(!i||void 0===r[i]||!0===n||void 0===n&&!1!==r[i])&&(r[i||t]=mx(e))}const i=(e,t)=>Ub.forEach(e,(e,n)=>s(e,n,t));if(Ub.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(Ub.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))i((e=>{const t={};let n,r,s;return e&&e.split("\n").forEach(function(e){s=e.indexOf(":"),n=e.substring(0,s).trim().toLowerCase(),r=e.substring(s+1).trim(),!n||t[n]&&hx[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(Ub.isObject(e)&&Ub.isIterable(e)){let n,r,s={};for(const t of e){if(!Ub.isArray(t))throw TypeError("Object iterator must return a key-value pair");s[r=t[0]]=(n=s[r])?Ub.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}i(s,t)}else null!=e&&s(t,e,n);return this}get(e,t){if(e=px(e)){const n=Ub.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(Ub.isFunction(t))return t.call(this,e,n);if(Ub.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=px(e)){const n=Ub.findKey(this,e);return!(!n||void 0===this[n]||t&&!gx(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function s(e){if(e=px(e)){const s=Ub.findKey(n,e);!s||t&&!gx(0,n[s],s,t)||(delete n[s],r=!0)}}return Ub.isArray(e)?e.forEach(s):s(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const s=t[n];e&&!gx(0,this[s],s,e,!0)||(delete this[s],r=!0)}return r}normalize(e){const t=this,n={};return Ub.forEach(this,(r,s)=>{const i=Ub.findKey(n,s);if(i)return t[i]=mx(r),void delete t[s];const o=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(s):String(s).trim();o!==s&&delete t[s],t[o]=mx(r),n[o]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return Ub.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&Ub.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[fx]=this[fx]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=px(e);t[r]||(!function(e,t){const n=Ub.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,s){return this[r].call(this,t,e,n,s)},configurable:!0})})}(n,e),t[r]=!0)}return Ub.isArray(e)?e.forEach(r):r(e),this}}yx.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),Ub.reduceDescriptors(yx.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),Ub.freezeMethods(yx);const vx=yx;function bx(e,t){const n=this||dx,r=t||n,s=vx.from(r.headers);let i=r.data;return Ub.forEach(e,function(e){i=e.call(n,i,s.normalize(),t?t.status:void 0)}),s.normalize(),i}function xx(e){return!(!e||!e.__CANCEL__)}function wx(e,t,n){Bb.call(this,null==e?"canceled":e,Bb.ERR_CANCELED,t,n),this.name="CanceledError"}Ub.inherits(wx,Bb,{__CANCEL__:!0});const Ex=wx;function Nx(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Bb("Request failed with status code "+n.status,[Bb.ERR_BAD_REQUEST,Bb.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const kx=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s,i=0,o=0;return t=void 0!==t?t:1e3,function(a){const l=Date.now(),c=r[o];s||(s=l),n[i]=a,r[i]=l;let u=o,d=0;for(;u!==i;)d+=n[u++],u%=e;if(i=(i+1)%e,i===o&&(o=(o+1)%e),l-s<t)return;const h=c&&l-c;return h?Math.round(1e3*d/h):void 0}};const Sx=function(e,t){let n,r,s=0,i=1e3/t;const o=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();s=i,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-s;for(var a=arguments.length,l=new Array(a),c=0;c<a;c++)l[c]=arguments[c];t>=i?o(l,e):(n=l,r||(r=setTimeout(()=>{r=null,o(n)},i-t)))},()=>n&&o(n)]},_x=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const s=kx(50,250);return Sx(n=>{const i=n.loaded,o=n.lengthComputable?n.total:void 0,a=i-r,l=s(a);r=i;e({loaded:i,total:o,progress:o?i/o:void 0,bytes:a,rate:l||void 0,estimated:l&&o&&i<=o?(o-i)/l:void 0,event:n,lengthComputable:null!=o,[t?"download":"upload"]:!0})},n)},Tx=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Cx=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ub.asap(()=>e(...n))},Ix=lx.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,lx.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(lx.origin),lx.navigator&&/(msie|trident)/i.test(lx.navigator.userAgent)):()=>!0,jx=lx.hasStandardBrowserEnv?{write(e,t,n,r,s,i){const o=[e+"="+encodeURIComponent(t)];Ub.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),Ub.isString(r)&&o.push("path="+r),Ub.isString(s)&&o.push("domain="+s),!0===i&&o.push("secure"),document.cookie=o.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Ax(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Rx=e=>e instanceof vx?{...e}:e;function Px(e,t){t=t||{};const n={};function r(e,t,n,r){return Ub.isPlainObject(e)&&Ub.isPlainObject(t)?Ub.merge.call({caseless:r},e,t):Ub.isPlainObject(t)?Ub.merge({},t):Ub.isArray(t)?t.slice():t}function s(e,t,n,s){return Ub.isUndefined(t)?Ub.isUndefined(e)?void 0:r(void 0,e,0,s):r(e,t,0,s)}function i(e,t){if(!Ub.isUndefined(t))return r(void 0,t)}function o(e,t){return Ub.isUndefined(t)?Ub.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function a(n,s,i){return i in t?r(n,s):i in e?r(void 0,n):void 0}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(e,t,n)=>s(Rx(e),Rx(t),0,!0)};return Ub.forEach(Object.keys({...e,...t}),function(r){const i=l[r]||s,o=i(e[r],t[r],r);Ub.isUndefined(o)&&i!==a||(n[r]=o)}),n}const Ox=e=>{const t=Px({},e);let n,{data:r,withXSRFToken:s,xsrfHeaderName:i,xsrfCookieName:o,headers:a,auth:l}=t;if(t.headers=a=vx.from(a),t.url=Zb(Ax(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&a.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),Ub.isFormData(r))if(lx.hasStandardBrowserEnv||lx.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(!1!==(n=a.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];a.setContentType([e||"multipart/form-data",...t].join("; "))}if(lx.hasStandardBrowserEnv&&(s&&Ub.isFunction(s)&&(s=s(t)),s||!1!==s&&Ix(t.url))){const e=i&&o&&jx.read(o);e&&a.set(i,e)}return t},Dx="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=Ox(e);let s=r.data;const i=vx.from(r.headers).normalize();let o,a,l,c,u,{responseType:d,onUploadProgress:h,onDownloadProgress:f}=r;function p(){c&&c(),u&&u(),r.cancelToken&&r.cancelToken.unsubscribe(o),r.signal&&r.signal.removeEventListener("abort",o)}let m=new XMLHttpRequest;function g(){if(!m)return;const r=vx.from("getAllResponseHeaders"in m&&m.getAllResponseHeaders());Nx(function(e){t(e),p()},function(e){n(e),p()},{data:d&&"text"!==d&&"json"!==d?m.response:m.responseText,status:m.status,statusText:m.statusText,headers:r,config:e,request:m}),m=null}m.open(r.method.toUpperCase(),r.url,!0),m.timeout=r.timeout,"onloadend"in m?m.onloadend=g:m.onreadystatechange=function(){m&&4===m.readyState&&(0!==m.status||m.responseURL&&0===m.responseURL.indexOf("file:"))&&setTimeout(g)},m.onabort=function(){m&&(n(new Bb("Request aborted",Bb.ECONNABORTED,e,m)),m=null)},m.onerror=function(){n(new Bb("Network Error",Bb.ERR_NETWORK,e,m)),m=null},m.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const s=r.transitional||tx;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Bb(t,s.clarifyTimeoutError?Bb.ETIMEDOUT:Bb.ECONNABORTED,e,m)),m=null},void 0===s&&i.setContentType(null),"setRequestHeader"in m&&Ub.forEach(i.toJSON(),function(e,t){m.setRequestHeader(t,e)}),Ub.isUndefined(r.withCredentials)||(m.withCredentials=!!r.withCredentials),d&&"json"!==d&&(m.responseType=r.responseType),f&&([l,u]=_x(f,!0),m.addEventListener("progress",l)),h&&m.upload&&([a,c]=_x(h),m.upload.addEventListener("progress",a),m.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(o=t=>{m&&(n(!t||t.type?new Ex(null,e,m):t),m.abort(),m=null)},r.cancelToken&&r.cancelToken.subscribe(o),r.signal&&(r.signal.aborted?o():r.signal.addEventListener("abort",o)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);y&&-1===lx.protocols.indexOf(y)?n(new Bb("Unsupported protocol "+y+":",Bb.ERR_BAD_REQUEST,e)):m.send(s||null)})},Lx=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const s=function(e){if(!n){n=!0,o();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Bb?t:new Ex(t instanceof Error?t.message:t))}};let i=t&&setTimeout(()=>{i=null,s(new Bb(`timeout ${t} of ms exceeded`,Bb.ETIMEDOUT))},t);const o=()=>{e&&(i&&clearTimeout(i),i=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(s):e.removeEventListener("abort",s)}),e=null)};e.forEach(e=>e.addEventListener("abort",s));const{signal:a}=r;return a.unsubscribe=()=>Ub.asap(o),a}},Mx=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,s=0;for(;s<n;)r=s+t,yield e.slice(s,r),s=r},Ux=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},Fx=(e,t,n,r)=>{const s=async function*(e,t){for await(const n of Ux(e))yield*Mx(n,t)}(e,t);let i,o=0,a=e=>{i||(i=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await s.next();if(t)return a(),void e.close();let i=r.byteLength;if(n){let e=o+=i;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw a(t),t}},cancel:e=>(a(e),s.return())},{highWaterMark:2})},Vx="function"===typeof fetch&&"function"===typeof Request&&"function"===typeof Response,zx=Vx&&"function"===typeof ReadableStream,Bx=Vx&&("function"===typeof TextEncoder?($x=new TextEncoder,e=>$x.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var $x;const qx=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(Uw){return!1}},Hx=zx&&qx(()=>{let e=!1;const t=new Request(lx.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),Wx=zx&&qx(()=>Ub.isReadableStream(new Response("").body)),Kx={stream:Wx&&(e=>e.body)};var Gx;Vx&&(Gx=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Kx[e]&&(Kx[e]=Ub.isFunction(Gx[e])?t=>t[e]():(t,n)=>{throw new Bb(`Response type '${e}' is not supported`,Bb.ERR_NOT_SUPPORT,n)})}));const Qx=async(e,t)=>{const n=Ub.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(Ub.isBlob(e))return e.size;if(Ub.isSpecCompliantForm(e)){const t=new Request(lx.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return Ub.isArrayBufferView(e)||Ub.isArrayBuffer(e)?e.byteLength:(Ub.isURLSearchParams(e)&&(e+=""),Ub.isString(e)?(await Bx(e)).byteLength:void 0)})(t):n},Xx=Vx&&(async e=>{let{url:t,method:n,data:r,signal:s,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:c,headers:u,withCredentials:d="same-origin",fetchOptions:h}=Ox(e);c=c?(c+"").toLowerCase():"text";let f,p=Lx([s,i&&i.toAbortSignal()],o);const m=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&Hx&&"get"!==n&&"head"!==n&&0!==(g=await Qx(u,r))){let e,n=new Request(t,{method:"POST",body:r,duplex:"half"});if(Ub.isFormData(r)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Tx(g,_x(Cx(l)));r=Fx(n.body,65536,e,t)}}Ub.isString(d)||(d=d?"include":"omit");const s="credentials"in Request.prototype;f=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:r,duplex:"half",credentials:s?d:void 0});let i=await fetch(f,h);const o=Wx&&("stream"===c||"response"===c);if(Wx&&(a||o&&m)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=i[t]});const t=Ub.toFiniteNumber(i.headers.get("content-length")),[n,r]=a&&Tx(t,_x(Cx(a),!0))||[];i=new Response(Fx(i.body,65536,n,()=>{r&&r(),m&&m()}),e)}c=c||"text";let y=await Kx[Ub.findKey(Kx,c)||"text"](i,e);return!o&&m&&m(),await new Promise((t,n)=>{Nx(t,n,{data:y,headers:vx.from(i.headers),status:i.status,statusText:i.statusText,config:e,request:f})})}catch(y){if(m&&m(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new Bb("Network Error",Bb.ERR_NETWORK,e,f),{cause:y.cause||y});throw Bb.from(y,y&&y.code,e,f)}}),Jx={http:null,xhr:Dx,fetch:Xx};Ub.forEach(Jx,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(Uw){}Object.defineProperty(e,"adapterName",{value:t})}});const Yx=e=>`- ${e}`,Zx=e=>Ub.isFunction(e)||null===e||!1===e,ew=e=>{e=Ub.isArray(e)?e:[e];const{length:t}=e;let n,r;const s={};for(let i=0;i<t;i++){let t;if(n=e[i],r=n,!Zx(n)&&(r=Jx[(t=String(n)).toLowerCase()],void 0===r))throw new Bb(`Unknown adapter '${t}'`);if(r)break;s[t||"#"+i]=r}if(!r){const e=Object.entries(s).map(e=>{let[t,n]=e;return`adapter ${t} `+(!1===n?"is not supported by the environment":"is not available in the build")});let n=t?e.length>1?"since :\n"+e.map(Yx).join("\n"):" "+Yx(e[0]):"as no adapter specified";throw new Bb("There is no suitable adapter to dispatch the request "+n,"ERR_NOT_SUPPORT")}return r};function tw(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ex(null,e)}function nw(e){tw(e),e.headers=vx.from(e.headers),e.data=bx.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ew(e.adapter||dx.adapter)(e).then(function(t){return tw(e),t.data=bx.call(e,e.transformResponse,t),t.headers=vx.from(t.headers),t},function(t){return xx(t)||(tw(e),t&&t.response&&(t.response.data=bx.call(e,e.transformResponse,t.response),t.response.headers=vx.from(t.response.headers))),Promise.reject(t)})}const rw="1.11.0",sw={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sw[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const iw={};sw.transitional=function(e,t,n){function r(e,t){return"[Axios v"+rw+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,s,i)=>{if(!1===e)throw new Bb(r(s," has been removed"+(t?" in "+t:"")),Bb.ERR_DEPRECATED);return t&&!iw[s]&&(iw[s]=!0,console.warn(r(s," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,s,i)}},sw.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};const ow={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Bb("options must be an object",Bb.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const i=r[s],o=t[i];if(o){const t=e[i],n=void 0===t||o(t,i,e);if(!0!==n)throw new Bb("option "+i+" must be "+n,Bb.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Bb("Unknown option "+i,Bb.ERR_BAD_OPTION)}},validators:sw},aw=ow.validators;class lw{constructor(e){this.defaults=e||{},this.interceptors={request:new ex,response:new ex}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(Uw){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=Px(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:s}=t;void 0!==n&&ow.assertOptions(n,{silentJSONParsing:aw.transitional(aw.boolean),forcedJSONParsing:aw.transitional(aw.boolean),clarifyTimeoutError:aw.transitional(aw.boolean)},!1),null!=r&&(Ub.isFunction(r)?t.paramsSerializer={serialize:r}:ow.assertOptions(r,{encode:aw.function,serialize:aw.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ow.assertOptions(t,{baseUrl:aw.spelling("baseURL"),withXsrfToken:aw.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=s&&Ub.merge(s.common,s[t.method]);s&&Ub.forEach(["delete","get","head","post","put","patch","common"],e=>{delete s[e]}),t.headers=vx.concat(i,s);const o=[];let a=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(a=a&&e.synchronous,o.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,d=0;if(!a){const e=[nw.bind(this),void 0];for(e.unshift(...o),e.push(...l),u=e.length,c=Promise.resolve(t);d<u;)c=c.then(e[d++],e[d++]);return c}u=o.length;let h=t;for(d=0;d<u;){const e=o[d++],t=o[d++];try{h=e(h)}catch(f){t.call(this,f);break}}try{c=nw.call(this,h)}catch(f){return Promise.reject(f)}for(d=0,u=l.length;d<u;)c=c.then(l[d++],l[d++]);return c}getUri(e){return Zb(Ax((e=Px(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}Ub.forEach(["delete","get","head","options"],function(e){lw.prototype[e]=function(t,n){return this.request(Px(n||{},{method:e,url:t,data:(n||{}).data}))}}),Ub.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,s){return this.request(Px(s||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}lw.prototype[e]=t(),lw.prototype[e+"Form"]=t(!0)});const cw=lw;class uw{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,s){n.reason||(n.reason=new Ex(e,r,s),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new uw(function(t){e=t}),cancel:e}}}const dw=uw;const hw={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(hw).forEach(e=>{let[t,n]=e;hw[n]=t});const fw=hw;const pw=function e(t){const n=new cw(t),r=Yv(cw.prototype.request,n);return Ub.extend(r,cw.prototype,n,{allOwnKeys:!0}),Ub.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(Px(t,n))},r}(dx);pw.Axios=cw,pw.CanceledError=Ex,pw.CancelToken=dw,pw.isCancel=xx,pw.VERSION=rw,pw.toFormData=Kb,pw.AxiosError=Bb,pw.Cancel=pw.CanceledError,pw.all=function(e){return Promise.all(e)},pw.spread=function(e){return function(t){return e.apply(null,t)}},pw.isAxiosError=function(e){return Ub.isObject(e)&&!0===e.isAxiosError},pw.mergeConfig=Px,pw.AxiosHeaders=vx,pw.formToJSON=e=>cx(Ub.isHTMLForm(e)?new FormData(e):e),pw.getAdapter=ew,pw.HttpStatusCode=fw,pw.default=pw;const mw=pw,gw="https://auto-host-backend-golden-release.onrender.com/api",yw=()=>{const e=re(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(""),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)(""),[g,y]=(0,i.useState)(""),[v,b]=(0,i.useState)(""),[x,w]=(0,i.useState)(1),[E]=(0,i.useState)(9),[N,k]=(0,i.useState)(0),[S,_]=(0,i.useState)(1),[T,C]=(0,i.useState)("recent"),I=(e,t)=>{switch(w(1),e){case"category":d(t);break;case"condition":f(t);break;case"brand":b(t);break;case"sortOrder":C(t)}},j=(0,i.useCallback)(async()=>{s(!0),a(null),console.log("Intentando cargar productos con filtros, paginaci\xf3n y ordenamiento...");try{const e=new URLSearchParams;l&&e.append("name",l),u&&e.append("category",u),h&&e.append("condition",h),p&&e.append("minPrice",p),g&&e.append("maxPrice",g),v&&e.append("brand",v),e.append("page",x),e.append("limit",E),e.append("sort",T);const t=`${gw}/products?${e.toString()}`;console.log("URL de la API con filtros, paginaci\xf3n y ordenamiento:",t);const r=await mw.get(t);console.log("Respuesta completa de productos con paginaci\xf3n y ordenamiento:",r.data),n(r.data.products),k(r.data.totalProducts),_(Math.ceil(r.data.totalProducts/E)),s(!1)}catch(e){console.error("Error al obtener productos con filtros, paginaci\xf3n y ordenamiento:",e),a("No se pudieron cargar los productos. Intenta de nuevo m\xe1s tarde."),s(!1)}},[l,u,h,p,g,v,x,E,T]);(0,i.useEffect)(()=>{const e=setTimeout(()=>{j()},500);return()=>{clearTimeout(e)}},[j]);const A=e=>{e>0&&e<=S&&w(e)};return r?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando productos..."}):o?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:o}):(0,qv.jsxs)("div",{className:"container mx-auto p-8",children:[(0,qv.jsx)("h2",{className:"text-4xl font-bold text-blue-800 mb-8",children:"Cat\xe1logo de Refacciones"}),(0,qv.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,qv.jsxs)("div",{className:"w-full md:w-1/4 bg-white p-6 rounded-lg shadow-md",children:[(0,qv.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,qv.jsxs)("h3",{className:"text-2xl font-semibold text-gray-800 flex items-center",children:[(0,qv.jsx)("span",{className:"mr-2",children:(0,qv.jsx)("svg",{className:"h-6 w-6 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M3 4a1 1 0 011-1h16a1 1 0 011 1v2.586a1 1 0 01.293.707V19a1 1 0 01-1 1H4a1 1 0 01-1-1V7.293a1 1 0 01.293-.707L3 4z"})})}),"Filtros"]}),(0,qv.jsx)("button",{onClick:()=>{c(""),d(""),f(""),m(""),y(""),b(""),C("recent"),w(1)},className:"text-sm text-blue-600 hover:text-blue-800",children:"Limpiar"})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{htmlFor:"searchName",className:"block text-gray-700 text-lg font-medium mb-2",children:"Buscar por nombre"}),(0,qv.jsx)("input",{type:"text",id:"searchName",name:"searchName",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej., Faro, Bomba...",value:l,onChange:e=>c(e.target.value)})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{className:"block text-gray-700 text-lg font-medium mb-2",children:"Categor\xeda"}),(0,qv.jsxs)("div",{className:"space-y-2",children:[["Motor","Frenos","Suspensi\xf3n","El\xe9ctrico","Carrocer\xeda","Transmisi\xf3n","Accesorios"].map(e=>(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"radio",id:`category-${e}`,name:"category",value:e,checked:u===e,onChange:()=>I("category",e),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,qv.jsx)("label",{htmlFor:`category-${e}`,className:"ml-2 text-gray-800",children:e})]},e)),(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"radio",id:"category-Todas",name:"category",value:"",checked:""===u,onChange:()=>I("category",""),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,qv.jsx)("label",{htmlFor:"category-Todas",className:"ml-2 text-gray-800 font-semibold",children:"Todas"})]})]})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{className:"block text-gray-700 text-lg font-medium mb-2",children:"Condici\xf3n"}),(0,qv.jsxs)("div",{className:"space-y-2",children:[["Nuevo","Usado","Reacondicionado"].map(e=>(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"radio",id:`condition-${e}`,name:"condition",value:e,checked:h===e,onChange:()=>I("condition",e),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,qv.jsx)("label",{htmlFor:`condition-${e}`,className:"ml-2 text-gray-800",children:e})]},e)),(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"radio",id:"condition-Todas",name:"condition",value:"",checked:""===h,onChange:()=>I("condition",""),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,qv.jsx)("label",{htmlFor:"condition-Todas",className:"ml-2 text-gray-800 font-semibold",children:"Todas"})]})]})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{className:"block text-gray-700 text-lg font-medium mb-2",children:"Precio"}),(0,qv.jsxs)("div",{className:"flex gap-4",children:[(0,qv.jsx)("input",{type:"number",className:"w-1/2 p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Min",value:p,onChange:e=>m(e.target.value)}),(0,qv.jsx)("input",{type:"number",className:"w-1/2 p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Max",value:g,onChange:e=>y(e.target.value)})]})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{htmlFor:"brand",className:"block text-gray-700 text-lg font-medium mb-2",children:"Marca de la refacci\xf3n"}),(0,qv.jsxs)("div",{className:"space-y-2",children:[["Chevrolet","Nissan","Volkswagen","Ford","Toyota","Honda","BMW","Mercedes-Benz"].map(e=>(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"radio",id:`brand-${e}`,name:"brand",value:e,checked:v===e,onChange:()=>I("brand",e),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,qv.jsx)("label",{htmlFor:`brand-${e}`,className:"ml-2 text-gray-800",children:e})]},e)),(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"radio",id:"brand-Todas",name:"brand",value:"",checked:""===v,onChange:()=>I("brand",""),className:"h-4 w-4 text-blue-600 border-gray-300 focus:ring-blue-500"}),(0,qv.jsx)("label",{htmlFor:"brand-Todas",className:"ml-2 text-gray-800 font-semibold",children:"Todas"})]})]})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{htmlFor:"sortOrder",className:"block text-gray-700 text-lg font-medium mb-2",children:"Ordenar por"}),(0,qv.jsxs)("select",{id:"sortOrder",name:"sortOrder",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:T,onChange:e=>I("sortOrder",e.target.value),children:[(0,qv.jsx)("option",{value:"recent",children:"M\xe1s Recientes"}),(0,qv.jsx)("option",{value:"priceAsc",children:"Precio: Menor a Mayor"}),(0,qv.jsx)("option",{value:"priceDesc",children:"Precio: Mayor a Menor"})]})]})]}),(0,qv.jsx)("div",{className:"w-full md:w-3/4 grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.length>0?t.filter(e=>"a3"!==e.name&&"a22"!==e.name).map(t=>(0,qv.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md flex flex-col items-center text-center text-gray-800 max-w-[300px] mx-auto h-[400px] overflow-hidden",children:[(0,qv.jsx)("div",{className:"w-full h-48 mb-4 overflow-hidden rounded-md flex items-center justify-center bg-gray-100",children:(0,qv.jsx)("img",{src:t.imageUrl||`https://placehold.it/300x200?text=${t.name.substring(0,Math.min(t.name.length,10))}`,alt:t.name,className:"w-full h-48 object-cover"})}),(0,qv.jsx)("h4",{className:"text-lg font-semibold mb-2 line-clamp-2",children:t.name}),(0,qv.jsxs)("p",{className:"font-bold text-xl mb-4 text-blue-600",children:["$",t.price.toLocaleString("es-MX")]}),(0,qv.jsx)("button",{onClick:()=>{return n=t._id,void e(`/products/${n}`);var n},className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md transition-colors w-full",children:"Ver Detalles"})]},t._id)):(0,qv.jsx)("div",{className:"md:col-span-3 text-center text-gray-500 text-xl mt-10",children:"No hay productos disponibles en este momento."})})]}),S>1&&(0,qv.jsxs)("div",{className:"flex justify-center items-center space-x-4 mt-8",children:[(0,qv.jsx)("button",{onClick:()=>A(x-1),disabled:1===x,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:text-gray-500",children:"Anterior"}),(0,qv.jsxs)("span",{className:"text-lg font-semibold",children:["P\xe1gina ",x," de ",S]}),(0,qv.jsx)("button",{onClick:()=>A(x+1),disabled:x===S,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:bg-gray-300 disabled:text-gray-500",children:"Siguiente"})]})]})},vw=()=>{const e=re(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[o,a]=(0,i.useState)(null),l=(0,i.useCallback)(async()=>{s(!0),a(null),console.log("Intentando cargar productos en oferta...");try{const e=`${gw}/products?isOnOffer=true`;console.log("URL de ofertas:",e);const t=await mw.get(e);console.log("Respuesta de ofertas:",t.data),n(t.data.products),s(!1)}catch(e){console.error("Error al obtener productos en oferta:",e),a("No se pudieron cargar las ofertas. Intenta de nuevo m\xe1s tarde."),s(!1)}},[]);(0,i.useEffect)(()=>{l()},[l]);return r?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando ofertas..."}):o?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:o}):(0,qv.jsxs)("div",{className:"container mx-auto p-8 text-center bg-white shadow-lg rounded-lg my-8",children:[(0,qv.jsx)("h2",{className:"text-4xl font-bold text-blue-800 mb-4",children:"Ofertas Imperdibles"}),(0,qv.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"\xa1Aprovecha estos descuentos especiales marcados por nuestros vendedores!"}),0===t.length?(0,qv.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 border-2 border-dashed border-gray-300 rounded-lg",children:[(0,qv.jsx)("svg",{className:"w-20 h-20 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),(0,qv.jsx)("p",{className:"text-gray-500 text-lg mb-2",children:"No hay ofertas disponibles en este momento."}),(0,qv.jsx)("p",{className:"text-gray-500",children:"Los vendedores a\xfan no han marcado productos en oferta."}),(0,qv.jsx)("button",{onClick:()=>e("/seller/add-product"),className:"mt-4 bg-orange-500 hover:bg-orange-600 text-white font-bold py-2 px-4 rounded-md transition-colors",children:"\xa1Marca tus productos en oferta!"})]}):(0,qv.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(t=>(0,qv.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow-md flex flex-col items-center text-center text-gray-800 max-w-[300px] mx-auto h-[400px] overflow-hidden relative",children:[(0,qv.jsx)("span",{className:"absolute top-2 left-2 bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full z-10",children:"\xa1OFERTA!"}),(0,qv.jsxs)("span",{className:"absolute top-2 right-2 bg-blue-600 text-white text-xs font-bold px-2 py-1 rounded-full z-10",children:[t.discountPercentage,"% OFF"]}),(0,qv.jsx)("div",{className:"w-full h-48 mb-4 overflow-hidden rounded-md flex items-center justify-center bg-gray-100",children:(0,qv.jsx)("img",{src:t.imageUrl||`https://placehold.it/300x200?text=${t.name.substring(0,Math.min(t.name.length,10))}`,alt:t.name,className:"w-full h-48 object-cover"})}),(0,qv.jsx)("h4",{className:"text-lg font-semibold mb-2 line-clamp-2",children:t.name}),(0,qv.jsxs)("p",{className:"text-sm text-gray-500 line-through",children:["$",t.originalPrice.toLocaleString("es-MX")]}),(0,qv.jsxs)("p",{className:"font-bold text-xl mb-4 text-red-600",children:["$",t.price.toLocaleString("es-MX")]}),(0,qv.jsx)("button",{onClick:()=>{return n=t._id,void e(`/products/${n}`);var n},className:"bg-blue-500 hover:bg-blue-600 text-white py-2 px-4 rounded-md transition-colors w-full",children:"Ver Detalles"})]},t._id))})]})},bw=()=>{const e=re();return(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:[(0,qv.jsx)("h2",{className:"text-4xl font-bold text-blue-800 text-center mb-6",children:"Acerca de AUTO HOST"}),(0,qv.jsx)("p",{className:"text-gray-700 text-lg leading-relaxed mb-4",children:"AUTO HOST es tu plataforma de confianza para encontrar y vender refacciones de segunda mano para veh\xedculos. Nuestra misi\xf3n es conectar a compradores y vendedores de manera eficiente, segura y transparente, contribuyendo a la econom\xeda circular y facilitando el mantenimiento automotriz."}),(0,qv.jsx)("p",{className:"text-gray-700 text-lg leading-relaxed mb-4",children:"Creemos en la importancia de dar una segunda vida a las piezas automotrices, promoviendo la sostenibilidad y ofreciendo alternativas econ\xf3micas y de calidad para todos."}),(0,qv.jsx)("p",{className:"text-gray-700 text-lg leading-relaxed mb-6",children:"Nuestra plataforma est\xe1 dise\xf1ada pensando en la facilidad de uso, con herramientas de b\xfasqueda avanzadas, un panel intuitivo para vendedores y un sistema de mensajer\xeda integrado para una comunicaci\xf3n fluida."}),(0,qv.jsx)("div",{className:"text-center mt-8",children:(0,qv.jsx)("button",{onClick:()=>e("/catalogo"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md transition-colors text-lg",children:"Explorar Cat\xe1logo"})})]})},xw=()=>{const e=re(),[t,n]=(0,i.useState)(""),[r,s]=(0,i.useState)(""),[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)(!1);return(0,qv.jsx)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:(0,qv.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Ingresa a tu cuenta"}),(0,qv.jsxs)("form",{onSubmit:async n=>{n.preventDefault(),c(!0),a(null);try{const n=await function(e,t,n){return ys(st(e),ns.credential(t,n))}(Bv,t,r);console.log("Usuario inici\xf3 sesi\xf3n con \xe9xito:",n.user),e("/")}catch(s){console.error("Error al iniciar sesi\xf3n:",s);let e="Error al iniciar sesi\xf3n. Por favor, verifica tu email y contrase\xf1a.";switch(s.code){case"auth/invalid-email":e="El formato del email no es v\xe1lido.";break;case"auth/user-disabled":e="Tu cuenta ha sido deshabilitada.";break;case"auth/user-not-found":case"auth/wrong-password":e="Email o contrase\xf1a incorrectos.";break;default:e=s.message}a(e)}finally{c(!1)}},children:[(0,qv.jsxs)("div",{className:"mb-4",children:[(0,qv.jsx)("label",{htmlFor:"email",className:"block text-gray-700 text-sm font-medium mb-2",children:"Email:"}),(0,qv.jsx)("input",{type:"email",id:"email",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"tu@email.com",value:t,onChange:e=>n(e.target.value),required:!0,disabled:l})]}),(0,qv.jsxs)("div",{className:"mb-6",children:[(0,qv.jsx)("label",{htmlFor:"password",className:"block text-gray-700 text-sm font-medium mb-2",children:"Contrase\xf1a:"}),(0,qv.jsx)("input",{type:"password",id:"password",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-500",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022",value:r,onChange:e=>s(e.target.value),required:!0,disabled:l})]}),o&&(0,qv.jsx)("p",{className:"text-red-500 text-center mb-4",children:o}),(0,qv.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:l,children:l?"Ingresando...":"Ingresar"})]}),(0,qv.jsxs)("p",{className:"text-center text-gray-600 mt-6",children:["\xbfNo tienes cuenta?"," ",(0,qv.jsx)(je,{to:"/register",className:"text-blue-600 hover:underline",children:"Reg\xedstrate aqu\xed"})]})]})})},ww=e=>{let{isOpen:t,onClose:n,onSubmit:r,productName:s,sellerName:o}=e;const[a,l]=(0,i.useState)(""),[c,u]=(0,i.useState)(!1);if(!t)return null;return(0,qv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:n,children:(0,qv.jsx)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-lg",onClick:e=>e.stopPropagation(),children:(0,qv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),a.trim()){u(!0);try{await r(a),l(""),n()}catch(t){console.error("Error al enviar el mensaje:",t),alert(`Error: ${t.message}`)}finally{u(!1)}}},children:[(0,qv.jsx)("div",{className:"p-6 border-b",children:(0,qv.jsxs)("div",{className:"flex justify-between items-center",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Contactar al Vendedor"}),(0,qv.jsxs)("p",{className:"text-sm text-gray-500",children:["Pregunta sobre: ",(0,qv.jsx)("span",{className:"font-semibold",children:s})]})]}),(0,qv.jsx)("button",{type:"button",onClick:n,className:"p-1 rounded-full text-gray-500 hover:bg-gray-200",children:"X"})]})}),(0,qv.jsxs)("div",{className:"p-6",children:[(0,qv.jsxs)("label",{htmlFor:"message",className:"font-semibold text-gray-700 block mb-2",children:["Tu Mensaje para ",o]}),(0,qv.jsx)("textarea",{id:"message",value:a,onChange:e=>l(e.target.value),placeholder:"Escribe tu pregunta aqu\xed... \xbfLa pieza es compatible con un modelo 2015? \xbfCu\xe1l es el mejor precio?",className:"w-full p-3 border rounded-lg focus:ring-2 focus:ring-blue-500 transition",rows:"5",required:!0})]}),(0,qv.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[(0,qv.jsx)("button",{type:"button",onClick:n,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300",children:"Cancelar"}),(0,qv.jsxs)("button",{type:"submit",disabled:c,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700 disabled:bg-gray-400 flex items-center gap-2",children:[c?"Enviando...":"Enviar Mensaje",!c&&(0,qv.jsx)("span",{children:"\u27a4"})," "]})]})]})})})},Ew=()=>{const{id:e}=se(),t=re(),{currentUser:n}=Wv(),[r,s]=(0,i.useState)(null),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!1),h=(0,i.useCallback)(async()=>{a(!0),c(null);try{const t=await mw.get(`${gw}/products/${e}`);s(t.data),console.log("Detalles del producto obtenidos:",t.data),a(!1)}catch(t){console.error("Error al obtener detalles del producto:",t),a(!1),t.response&&404===t.response.status?c("Producto no encontrado."):c("Error al cargar los detalles del producto. Intenta de nuevo.")}},[e]);(0,i.useEffect)(()=>{h()},[h]);const f=()=>{if(r.isOnOffer&&r.originalPrice&&r.discountPercentage){return r.originalPrice*(1-r.discountPercentage/100)}return r.price};if(o)return(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando detalles del producto..."});if(l)return(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:l});if(!r)return(0,qv.jsx)("div",{className:"text-center mt-20 text-gray-600 text-xl",children:"No se pudo cargar el producto."});const p=f();return(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:["\xa0 \xa0 \xa0 ",(0,qv.jsxs)("button",{onClick:()=>t(-1),className:"mb-6 text-blue-600 hover:underline flex items-center",children:["\xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"\xa0 \xa0 \xa0 \xa0 Volver \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:["\xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{className:"md:col-span-1",children:["\xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("img",{src:r.imageUrl||`https://placehold.it/600x400?text=${r.name.substring(0,Math.min(r.name.length,15))}`,alt:r.name,className:"w-full h-auto rounded-lg shadow-md object-cover",style:{maxHeight:"500px"}}),"\xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{className:"md:col-span-1 flex flex-col justify-between",children:["\xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("h1",{className:"text-4xl font-bold text-blue-800 mb-4",children:r.name}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.isOnOffer?(0,qv.jsxs)("div",{className:"mb-4",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-xl text-gray-500 line-through",children:["Precio Original: $",r.originalPrice.toLocaleString("es-MX")]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-3xl font-bold text-red-600",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 Precio Oferta: $",p.toLocaleString("es-MX"),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("span",{className:"text-lg text-red-500 ml-2",children:["(",r.discountPercentage,"% OFF)"]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}):(0,qv.jsxs)("p",{className:"text-3xl font-bold text-blue-600 mb-4",children:["$",r.price.toLocaleString("es-MX")]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("p",{className:"text-gray-700 text-lg leading-relaxed mb-6",children:r.description}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-gray-700 mb-6",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Categor\xeda:"})," ",r.category]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Condici\xf3n:"})," ",r.condition]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.stock>0&&(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Stock:"})," ",r.stock," unidades"]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.marca_refaccion&&(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Marca:"})," ",r.marca_refaccion]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.lado&&(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Lado:"})," ",r.lado]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.numero_parte&&(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"N\xfamero de Parte:"})," ",r.numero_parte]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg border border-gray-200 mb-6",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Informaci\xf3n del Vendedor"}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-gray-700",children:["Email: ",r.sellerEmail||"No disponible"]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 mt-6",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",r.stock>0?(0,qv.jsxs)("button",{onClick:async()=>{if(!n||!n.uid)return alert("Debes iniciar sesi\xf3n para a\xf1adir productos al carrito."),void t("/login");if(r.stock<=0)return void alert("Este producto no tiene stock disponible.");const e=f(),s=n.uid,i=iy($v,"carts",s),o=sy(i,"items");try{(await ov(i)).exists()||(await cv(i,{userId:s,createdAt:new Date}),console.log("Carrito creado para el usuario:",s));const t=iy(o,r._id);(await ov(t)).exists()?(await uv(t,{quantity:pv(1),totalPrice:pv(e),updatedAt:new Date}),console.log(`Cantidad de ${r.name} incrementada en el carrito.`),alert(`\xa1Se a\xf1adi\xf3 otra unidad de "${r.name}" al carrito!`)):(await cv(t,{productId:r._id,name:r.name,imageUrl:r.imageUrl,pricePerUnit:e,quantity:1,totalPrice:e,sellerId:r.user,sellerEmail:r.sellerEmail,addedAt:new Date}),console.log(`"${r.name}" a\xf1adido al carrito.`),alert(`\xa1"${r.name}" a\xf1adido al carrito!`))}catch(a){console.error("Error al a\xf1adir producto al carrito:",a),alert("Hubo un error al a\xf1adir el producto al carrito. Intenta de nuevo.")}},className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md transition-colors text-lg",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 Comprar Ahora ($",p.toLocaleString("es-MX"),") \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}):(0,qv.jsx)("button",{className:"flex-1 bg-gray-400 text-white font-bold py-3 px-6 rounded-md cursor-not-allowed text-lg",disabled:!0,children:"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 Sin Stock \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("button",{onClick:()=>{if(!n)return alert("Debes iniciar sesi\xf3n para contactar al vendedor."),void t("/login");d(!0)},className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md transition-colors text-lg",children:"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 Contactar Vendedor \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "}),"\xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 ",u&&(0,qv.jsx)(ww,{isOpen:u,onClose:()=>{d(!1)},onSubmit:async e=>{if(!n||!n.uid)return alert("Error: No est\xe1s autenticado para enviar mensajes."),!1;if(!r||!r.user)return alert("Error: No se pudo identificar al vendedor del producto."),!1;try{const t=await n.getIdToken(),s={senderId:n.uid,senderEmail:n.email,receiverId:r.user,receiverEmail:r.sellerEmail,productId:r._id,productName:r.name,content:e};console.log("Enviando mensaje al backend:",s);const i=await mw.post(`${gw}/messages`,s,{headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}});return console.log("Mensaje enviado con \xe9xito:",i.data),alert("\xa1Mensaje enviado al vendedor!"),!0}catch(l){return console.error("Error al enviar el mensaje:",l.response?l.response.data:l.message),alert(`Error al enviar mensaje: ${l.response&&l.response.data?l.response.data.message:l.message}`),!1}},productName:r.name,sellerName:r.sellerEmail}),"\xa0 \xa0 "]})},Nw=()=>{var e,t,n;const r=re(),{currentUser:s,loadingAuth:o}=Wv(),[a,l]=(0,i.useState)([]),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)(null),f=(0,i.useCallback)(async()=>{if(!o&&s){u(!0),h(null);try{const e=s.uid,t=sy($v,"carts",e,"items"),n=await lv(t),r=[];n.forEach(e=>{r.push({id:e.id,...e.data()})}),l(r),u(!1),console.log("\xcdtems del carrito obtenidos para checkout:",r)}catch(e){console.error("Error al obtener \xedtems del carrito para checkout:",e),h("No se pudieron cargar los \xedtems de tu carrito. Intenta de nuevo."),u(!1)}}else u(!1)},[s,o]);(0,i.useEffect)(()=>{f()},[f]);const p=a.reduce((e,t)=>e+t.totalPrice,0);return o||c?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando resumen del pedido..."}):d?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:d}):s?0===a.length?(0,qv.jsxs)("div",{className:"text-center mt-20 p-8 border rounded-lg bg-gray-50",children:[(0,qv.jsx)("p",{className:"text-gray-600 text-xl mb-4",children:"Tu carrito est\xe1 vac\xedo. No hay productos para checkout."}),(0,qv.jsx)(je,{to:"/catalogo",className:"text-blue-600 hover:underline text-lg",children:"Explora nuestro cat\xe1logo para a\xf1adir productos."})]}):(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:[(0,qv.jsxs)("button",{onClick:()=>r(-1),className:"mb-6 text-blue-600 hover:underline flex items-center",children:[(0,qv.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Volver al Carrito"]}),(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Confirmar Pedido"}),(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Revisa tu pedido antes de confirmar la compra."}),(0,qv.jsxs)("div",{className:"space-y-6 mb-8",children:[(0,qv.jsxs)("div",{className:"card p-6",children:[(0,qv.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Productos en tu Pedido:"}),(0,qv.jsx)("div",{className:"space-y-3",children:a.map(e=>(0,qv.jsxs)("div",{className:"flex justify-between items-center border-b pb-2",children:[(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("img",{src:e.imageUrl||`https://placehold.it/50x50?text=${e.name.substring(0,Math.min(e.name.length,5))}`,alt:e.name,className:"w-12 h-12 object-cover rounded-md mr-3"}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("p",{className:"font-semibold text-gray-800",children:e.name}),(0,qv.jsxs)("p",{className:"text-sm text-gray-600",children:["Cantidad: ",e.quantity]})]})]}),(0,qv.jsxs)("p",{className:"font-bold text-blue-600",children:["$",e.totalPrice.toLocaleString("es-MX")]})]},e.id))})]}),(0,qv.jsxs)("div",{className:"card p-6",children:[(0,qv.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Resumen del Pedido:"}),(0,qv.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-gray-700 mb-2",children:[(0,qv.jsx)("span",{children:"Subtotal de productos:"}),(0,qv.jsxs)("span",{children:["$",p.toLocaleString("es-MX")]})]}),(0,qv.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-gray-700 mb-2",children:[(0,qv.jsx)("span",{children:"Env\xedo:"}),(0,qv.jsx)("span",{children:"$0.00 (Simulado)"})]}),(0,qv.jsxs)("div",{className:"flex justify-between text-2xl font-bold text-blue-800 border-t pt-4 mt-4",children:[(0,qv.jsx)("span",{children:"Total a Pagar:"}),(0,qv.jsxs)("span",{children:["$",p.toLocaleString("es-MX")]})]})]}),(0,qv.jsxs)("div",{className:"card p-6",children:[(0,qv.jsx)("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"Informaci\xf3n de Env\xedo:"}),(0,qv.jsxs)("p",{className:"text-gray-700",children:[(0,qv.jsx)("strong",{children:"Nombre:"})," ",(null===(e=s.firestoreProfile)||void 0===e?void 0:e.name)||"N/A"]}),(0,qv.jsxs)("p",{className:"text-gray-700",children:[(0,qv.jsx)("strong",{children:"Direcci\xf3n:"})," ",(null===(t=s.firestoreProfile)||void 0===t?void 0:t.address)||"N/A"]}),(0,qv.jsxs)("p",{className:"text-gray-700",children:[(0,qv.jsx)("strong",{children:"C.P.:"})," ",(null===(n=s.firestoreProfile)||void 0===n?void 0:n.cp)||"N/A"]}),(0,qv.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"(Esta informaci\xf3n se toma de tu perfil. Aseg\xfarate de que est\xe9 actualizada en tu secci\xf3n de perfil.)"})]})]}),(0,qv.jsx)("button",{onClick:async()=>{if(!s)return alert("Debes iniciar sesi\xf3n para confirmar tu pedido."),void r("/login");if(0===a.length)return alert("Tu carrito est\xe1 vac\xedo. No hay productos para comprar."),void r("/cart");u(!0),h(null);try{var e,t,n;console.log("DEBUG: Procesando pedido...");const i=[...new Set(a.map(e=>e.sellerId))],o=sy($v,"orders"),l={buyerId:s.uid,buyerEmail:s.email,buyerName:(null===(e=s.firestoreProfile)||void 0===e?void 0:e.name)||s.email,items:a.map(e=>({productId:e.productId,name:e.name,imageUrl:e.imageUrl,pricePerUnit:e.pricePerUnit,quantity:e.quantity,totalPrice:e.totalPrice,sellerId:e.sellerId,sellerEmail:e.sellerEmail})),orderTotal:p,shippingAddress:(null===(t=s.firestoreProfile)||void 0===t?void 0:t.address)||"N/A",shippingCP:(null===(n=s.firestoreProfile)||void 0===n?void 0:n.cp)||"N/A",status:"Pendiente",createdAt:new Ny("serverTimestamp"),involvedSellerUids:i},c=await function(e,t){const n=Yg(e.firestore,ay),r=iy(e),s=ev(e.converter,t);return hv(n,[wy(xy(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,rf.exists(!1))]).then(()=>r)}(o,l);console.log("DEBUG: Pedido guardado en Firestore con ID:",c.id);const d=s.uid,h=sy($v,"carts",d,"items"),f=await lv(h),m=[];f.forEach(e=>{m.push(dv(iy($v,"carts",d,"items",e.id)))}),await Promise.all(m),console.log("DEBUG: Carrito vaciado en Firestore."),u(!1),alert("\xa1Tu pedido ha sido confirmado con \xe9xito! Gracias por tu compra."),r("/purchase-success")}catch(i){console.error("Error al confirmar el pedido:",i),h("Hubo un error al confirmar tu pedido. Intenta de nuevo."),u(!1)}},className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-4 rounded-md transition-colors text-xl",disabled:c,children:c?"Confirmando Pedido...":`Confirmar Pedido ($${p.toLocaleString("es-MX")})`}),(0,qv.jsx)("p",{className:"text-center text-gray-600 mt-4 text-sm",children:"Al confirmar, aceptas nuestros T\xe9rminos y Condiciones."})]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:[(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"Debes iniciar sesi\xf3n para confirmar tu pedido."}),(0,qv.jsx)("button",{onClick:()=>r("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"Inicia Sesi\xf3n"})]})},kw=()=>{var e,t,n;const{orderId:r}=se(),{currentUser:s,loadingAuth:o}=(re(),Wv()),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)(!0),[d,h]=(0,i.useState)(null),f=(0,i.useCallback)(async()=>{if(!o&&r){u(!0),h(null);try{var e;const t=iy($v,"orders",r),n=await ov(t);if(!n.exists())return h("Pedido no encontrado. El ID de transacci\xf3n podr\xeda ser inv\xe1lido."),void u(!1);const i={id:n.id,...n.data()};if(s&&i.buyerId!==s.uid&&(null===(e=i.involvedSellerUids)||void 0===e||!e.includes(s.uid)))return h("No tienes permiso para ver los detalles de este pedido."),void u(!1);l(i),u(!1),console.log("Detalles del pedido obtenidos:",i)}catch(t){console.error("Error al obtener los detalles del pedido:",t),h("No se pudieron cargar los detalles del pedido. Intenta de nuevo."),u(!1)}}else u(!1)},[r,s,o]);if((0,i.useEffect)(()=>{f()},[f]),o||c)return(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando detalles del pedido..."});if(d)return(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:d});if(!a)return(0,qv.jsx)("div",{className:"text-center mt-20 text-gray-600 text-xl",children:"No se encontr\xf3 el pedido o no tienes permiso para verlo."});const p={productImage:(null===(e=a.items[0])||void 0===e?void 0:e.imageUrl)||"https://placehold.co/80x80/e0e0e0/333333?text=Producto",productName:a.items.length>1?`${a.items[0].name} y ${a.items.length-1} m\xe1s`:(null===(t=a.items[0])||void 0===t?void 0:t.name)||"N/A",vendorEmail:(null===(n=a.items[0])||void 0===n?void 0:n.sellerEmail)||"N/A",buyerEmail:a.buyerEmail||"N/A",date:a.createdAt?new Date(1e3*a.createdAt.seconds).toLocaleDateString():"N/A",transactionId:a.id,salePrice:a.orderTotal,commission:.1*a.orderTotal},m=p.salePrice-p.commission;return(0,qv.jsx)("div",{className:"container mx-auto p-8 max-w-2xl",children:(0,qv.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[(0,qv.jsx)("svg",{className:"w-20 h-20 text-green-500 mx-auto mb-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),(0,qv.jsx)("h2",{className:"text-4xl font-bold text-gray-800 mb-4",children:"\xa1Compra Realizada con \xc9xito!"}),(0,qv.jsx)("p",{className:"text-xl text-gray-600 mb-8",children:"Gracias por tu confianza en AUTO HOST."}),(0,qv.jsxs)("div",{className:"text-left mb-8",children:[(0,qv.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Resumen de la Transacci\xf3n"}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-gray-700",children:[(0,qv.jsxs)("div",{className:"flex items-center space-x-3 col-span-2 mb-4",children:[(0,qv.jsx)("img",{src:p.productImage,alt:"Producto",className:"w-16 h-16 rounded-md"}),(0,qv.jsx)("div",{children:(0,qv.jsx)("p",{className:"font-semibold",children:p.productName})})]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("span",{className:"font-semibold",children:"Vendido por:"})," ",p.vendorEmail]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("span",{className:"font-semibold",children:"Comprador:"})," ",p.buyerEmail]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("span",{className:"font-semibold",children:"Fecha de compra:"})," ",p.date]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("span",{className:"font-semibold",children:"ID de transacci\xf3n:"})," ",p.transactionId]})]})]}),(0,qv.jsxs)("div",{className:"text-left",children:[(0,qv.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Desglose Financiero"}),(0,qv.jsxs)("div",{className:"flex justify-between text-gray-700 mb-2",children:[(0,qv.jsx)("span",{children:"Precio de Venta"}),(0,qv.jsxs)("span",{className:"font-bold text-blue-600",children:["$",p.salePrice.toLocaleString("es-MX")]})]}),(0,qv.jsxs)("div",{className:"flex justify-between text-gray-700 mb-2",children:[(0,qv.jsx)("span",{children:"Comisi\xf3n AUTO HOST (10%)"}),(0,qv.jsxs)("span",{className:"font-bold text-red-600",children:["-$",p.commission.toLocaleString("es-MX")]})]}),(0,qv.jsxs)("div",{className:"flex justify-between text-gray-800 font-bold text-xl border-t pt-4 mt-4",children:[(0,qv.jsx)("span",{children:"Total para el Vendedor"}),(0,qv.jsxs)("span",{className:"text-green-600",children:["$",m.toLocaleString("es-MX")]})]}),(0,qv.jsx)("p",{className:"text-gray-500 text-sm mt-4",children:"Este desglose es visible para fines de demostraci\xf3n. En una aplicaci\xf3n real, el comprador y el vendedor ver\xedan vistas diferentes del ticket."})]})]})})};const Sw=function(e){let{isOpen:t,onClose:n}=e;return t?(0,qv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:n,children:(0,qv.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-3xl h-full md:h-5/6 flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,qv.jsxs)("div",{className:"p-6 border-b flex justify-between items-center",children:[(0,qv.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Pol\xedticas de Privacidad de AUTO-HOST"}),(0,qv.jsx)("button",{type:"button",onClick:n,className:"p-1 rounded-full text-gray-500 hover:bg-gray-200",children:(0,qv.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),(0,qv.jsxs)("div",{className:"p-6 flex-grow overflow-y-auto",children:[(0,qv.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"\xdaltima actualizaci\xf3n: 2 de agosto de 2025"}),(0,qv.jsxs)("div",{className:"space-y-6 prose max-w-none text-gray-700",children:[(0,qv.jsx)("p",{children:"En AUTO-HOST, valoramos profundamente tu privacidad y nos comprometemos a proteger tu informaci\xf3n personal con la m\xe1xima diligencia. Esta Pol\xedtica de Privacidad describe c\xf3mo recopilamos, utilizamos, almacenamos, divulgamos y protegemos los datos que nos proporcionas al interactuar con nuestra plataforma, as\xed como tus derechos en relaci\xf3n con dicha informaci\xf3n."}),(0,qv.jsx)("h3",{className:"text-2xl font-semibold pt-4 text-gray-800",children:"1. Informaci\xf3n que Recopilamos"}),(0,qv.jsx)("p",{children:"Para poder ofrecerte nuestros servicios de intermediaci\xf3n en la compra y venta de refacciones, recopilamos las siguientes categor\xedas de informaci\xf3n:"}),(0,qv.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Informaci\xf3n de Contacto y Cuenta:"})," Nombre completo, direcci\xf3n de correo electr\xf3nico y n\xfamero de tel\xe9fono. Estos datos son esenciales para la creaci\xf3n y gesti\xf3n de tu cuenta en AUTO-HOST."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Datos de Vendedores:"})," Exclusivamente para usuarios registrados como Vendedores, solicitamos informaci\xf3n de identificaci\xf3n fiscal como la Clave \xdanica de Registro de Poblaci\xf3n (CURP) o el Registro Federal de Contribuyentes (RFC), y datos bancarios como la CLABE interbancaria. Estos datos son cruciales para verificar tu identidad, cumplir con obligaciones fiscales y facilitar el procesamiento de los pagos derivados de tus ventas."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Datos de Compradores:"})," Recopilamos tu direcci\xf3n de env\xedo (incluyendo calle, n\xfamero, colonia, c\xf3digo postal y referencias) para asegurar la correcta entrega de los productos que adquieras."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Informaci\xf3n de Transacciones:"})," Detalles sobre los productos que compras o vendes, precios, cantidades, fechas de transacci\xf3n y estado de los pedidos."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Comunicaciones:"})," Contenido de los mensajes intercambiados entre compradores y vendedores a trav\xe9s de nuestra plataforma, con el fin de facilitar la comunicaci\xf3n y la resoluci\xf3n de disputas."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Informaci\xf3n de Uso:"})," Datos sobre c\xf3mo interact\xfaas con nuestra plataforma, incluyendo p\xe1ginas visitadas, tiempo de permanencia, b\xfasquedas realizadas, tipo de dispositivo y navegador. Esto nos ayuda a mejorar la funcionalidad y la experiencia de usuario."]})]}),(0,qv.jsx)("h3",{className:"text-2xl font-semibold pt-4 text-gray-800",children:"2. Uso y Finalidades de la Informaci\xf3n"}),(0,qv.jsx)("p",{children:"Utilizamos la informaci\xf3n recopilada para los siguientes prop\xf3sitos:"}),(0,qv.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Gesti\xf3n de Cuentas:"})," Crear, mantener y gestionar tu perfil de usuario en AUTO-HOST."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Verificaci\xf3n y Seguridad:"})," Validar la identidad de los vendedores y garantizar un entorno de mercado seguro y confiable para todas las partes."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Facilitar Transacciones:"})," Procesar tus compras, ventas, pagos y coordinar los env\xedos de manera eficiente y segura."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Comunicaci\xf3n:"})," Habilitar la comunicaci\xf3n fluida entre compradores y vendedores para consultas y detalles de productos."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Mejora de Servicios:"})," Analizar el uso de la plataforma para mejorar nuestras funcionalidades, personalizar tu experiencia y desarrollar nuevas caracter\xedsticas."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Atenci\xf3n al Cliente:"})," Responder a tus consultas, solicitudes de soporte y resolver cualquier incidencia."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Cumplimiento Legal:"})," Cumplir con las leyes y regulaciones aplicables, incluyendo la prevenci\xf3n de fraudes y actividades il\xedcitas."]})]}),(0,qv.jsx)("h3",{className:"text-2xl font-semibold pt-4 text-gray-800",children:"3. Compartir y Divulgar Informaci\xf3n"}),(0,qv.jsx)("p",{children:"Tu privacidad es una de nuestras principales prioridades. No vendemos, alquilamos ni comercializamos tu informaci\xf3n personal con terceros para fines de marketing directo o cualquier otro uso no relacionado con nuestros servicios. Sin embargo, podr\xedamos compartir tu informaci\xf3n en las siguientes circunstancias:"}),(0,qv.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Entre Compradores y Vendedores:"})," Para completar una transacci\xf3n, la informaci\xf3n de contacto y env\xedo relevante se compartir\xe1 entre el comprador y el vendedor involucrados. Por ejemplo, el vendedor recibir\xe1 la direcci\xf3n de env\xedo del comprador."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Proveedores de Servicios:"})," Contratamos a terceros de confianza para que realicen servicios en nuestro nombre, como procesamiento de pagos, alojamiento de datos, servicios de env\xedo y an\xe1lisis. Estos proveedores est\xe1n obligados contractualmente a proteger tu informaci\xf3n y solo pueden usarla para los fines espec\xedficos que les encomendamos."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Cumplimiento Legal:"})," Podr\xedamos divulgar tu informaci\xf3n si as\xed lo exige la ley, una orden judicial, una solicitud gubernamental o para proteger nuestros derechos, propiedad o seguridad, as\xed como los de nuestros usuarios o el p\xfablico."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Transferencias de Negocio:"})," En caso de una fusi\xf3n, adquisici\xf3n, venta de activos o reorganizaci\xf3n, tu informaci\xf3n personal podr\xeda ser transferida como parte de los activos de la empresa, siempre bajo la condici\xf3n de mantener la confidencialidad."]})]}),(0,qv.jsx)("h3",{className:"text-2xl font-semibold pt-4 text-gray-800",children:"4. Seguridad de los Datos"}),(0,qv.jsx)("p",{children:"Implementamos medidas de seguridad t\xe9cnicas, administrativas y f\xedsicas robustas para proteger tu informaci\xf3n personal contra el acceso no autorizado, la alteraci\xf3n, la divulgaci\xf3n o la destrucci\xf3n. Esto incluye el uso de cifrado, firewalls, controles de acceso y procedimientos de auditor\xeda. Aunque nos esforzamos al m\xe1ximo por proteger tu informaci\xf3n, ning\xfan sistema es completamente impenetrable, y no podemos garantizar la seguridad absoluta de tus datos transmitidos a trav\xe9s de internet."}),(0,qv.jsx)("h3",{className:"text-2xl font-semibold pt-4 text-gray-800",children:"5. Tus Derechos"}),(0,qv.jsx)("p",{children:"De acuerdo con la legislaci\xf3n aplicable, tienes derecho a:"}),(0,qv.jsxs)("ul",{className:"list-disc list-inside space-y-2",children:[(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Acceso:"})," Solicitar acceso a la informaci\xf3n personal que tenemos sobre ti."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Rectificaci\xf3n:"})," Solicitar la correcci\xf3n de datos personales inexactos o incompletos."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Cancelaci\xf3n:"})," Solicitar la eliminaci\xf3n de tu informaci\xf3n personal cuando ya no sea necesaria para los fines para los que fue recopilada."]}),(0,qv.jsxs)("li",{children:[(0,qv.jsx)("strong",{children:"Oposici\xf3n:"})," Oponerte al uso de tus datos personales para ciertos fines."]})]}),(0,qv.jsx)("p",{children:"Para ejercer cualquiera de estos derechos, por favor cont\xe1ctanos a trav\xe9s de [tu_email_de_soporte@ejemplo.com]."}),(0,qv.jsx)("h3",{className:"text-2xl font-semibold pt-4 text-gray-800",children:"6. Cambios a esta Pol\xedtica de Privacidad"}),(0,qv.jsx)("p",{children:'Podemos actualizar esta Pol\xedtica de Privacidad peri\xf3dicamente para reflejar cambios en nuestras pr\xe1cticas de datos o en la legislaci\xf3n aplicable. Te notificaremos sobre cualquier cambio significativo publicando la nueva pol\xedtica en nuestra plataforma y actualizando la fecha de "\xdaltima actualizaci\xf3n" en la parte superior.'}),(0,qv.jsx)("p",{className:"pt-6 font-semibold text-gray-800",children:"Al utilizar los servicios de AUTO-HOST, confirmas que has le\xeddo y comprendido esta Pol\xedtica de Privacidad, y que aceptas sus t\xe9rminos."})]}),(0,qv.jsxs)("p",{className:"mt-8 text-xs text-gray-500",children:[(0,qv.jsx)("strong",{children:"Nota legal importante:"})," Este es un borrador de pol\xedtica de privacidad con fines de desarrollo y demostraci\xf3n. **Se recomienda encarecidamente que consultes a un profesional legal especializado en privacidad y protecci\xf3n de datos** para redactar una pol\xedtica final que asegure el cumplimiento total con la Ley Federal de Protecci\xf3n de Datos Personales en Posesi\xf3n de los Particulares de M\xe9xico (LFPDPPP) y otras regulaciones relevantes antes del lanzamiento oficial de tu plataforma. AUTO-HOST no se hace responsable de la idoneidad legal de este texto."]})]}),(0,qv.jsx)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end",children:(0,qv.jsx)("button",{type:"button",onClick:n,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-blue-700",children:"Cerrar"})})]})}):null},_w=e=>{let{isOpen:t,onClose:n,onConfirm:r,itemType:s,itemName:i}=e;if(!t)return null;return(0,qv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:n,children:(0,qv.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-sm flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,qv.jsxs)("div",{className:"p-4 border-b flex justify-between items-center bg-red-600 text-white rounded-t-lg",children:[(0,qv.jsx)("h2",{className:"text-xl font-bold",children:"Confirmar Eliminaci\xf3n"}),(0,qv.jsx)("button",{type:"button",onClick:n,className:"p-1 rounded-full text-white hover:bg-red-700",children:"X"})]}),(0,qv.jsxs)("div",{className:"p-6 text-gray-800",children:[(0,qv.jsxs)("p",{className:"mb-4",children:["\xbfEst\xe1s seguro de que quieres eliminar est","este producto"===s?"e":"a",(0,qv.jsxs)("span",{className:"font-semibold",children:[" ",s]}),(0,qv.jsxs)("span",{className:"font-bold text-red-700",children:[" ",i&&`"${i}"`]}),"?"]}),(0,qv.jsx)("p",{className:"text-sm text-gray-600",children:"Esta acci\xf3n es irreversible."})]}),(0,qv.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[(0,qv.jsx)("button",{type:"button",onClick:n,className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-lg font-semibold hover:bg-gray-300",children:"Cancelar"}),(0,qv.jsx)("button",{type:"button",onClick:()=>{r(),n()},className:"bg-red-600 text-white px-4 py-2 rounded-lg font-semibold hover:bg-red-700",children:"Eliminar"})]})]})})},Tw=e=>{let{onSellerDashboard:t}=e;const n=re(),{currentUser:r,loadingAuth:s}=Wv(),[o,a]=(0,i.useState)([]),[l,c]=(0,i.useState)(!0),[u,d]=(0,i.useState)(null),[h,f]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),[g,y]=(0,i.useState)("");(0,i.useEffect)(()=>{t&&t()},[t]);const v=(0,i.useCallback)(async()=>{if(!s){if(!r||!r.firestoreProfile||"Vendedor"!==r.firestoreProfile.userType)return c(!1),void d("Acceso denegado. Debes iniciar sesi\xf3n como vendedor para ver este panel.");c(!0),d(null),console.log(`Intentando cargar productos para el vendedor: ${r.uid}`);try{const e=await mw.get(`${gw}/products?sellerId=${r.uid}`);console.log("Productos del vendedor obtenidos:",e.data),a(Array.isArray(e.data.products)?e.data.products:[]),c(!1)}catch(e){console.error("Error al obtener productos del vendedor:",e),d("No se pudieron cargar tus productos. Intenta de nuevo m\xe1s tarde."),c(!1)}}},[r,s]);(0,i.useEffect)(()=>{v()},[v]);return s||l?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:s?"Verificando acceso al panel...":"Cargando tus productos..."}):u?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:u}):r&&r.firestoreProfile&&"Vendedor"===r.firestoreProfile.userType?(0,qv.jsxs)("div",{className:"container mx-auto p-8",children:[(0,qv.jsx)("div",{className:"flex justify-end mb-6",children:(0,qv.jsxs)("button",{onClick:()=>n("/seller/add-product"),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full flex items-center shadow-lg transition-colors",children:[(0,qv.jsx)("svg",{className:"w-5 h-5 mr-2",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"A\xf1adir Refacci\xf3n"]})}),(0,qv.jsx)("h2",{className:"text-4xl font-bold text-blue-800 mb-8",children:"Portal del Vendedor"}),(0,qv.jsxs)("p",{className:"text-gray-600 mb-8",children:["Bienvenido de nuevo, ",r.firestoreProfile.name||r.email,"."]}),(0,qv.jsxs)("div",{class:"flex justify-center space-x-4 mb-8",children:[(0,qv.jsx)("button",{onClick:()=>n("/seller-dashboard"),className:"px-6 py-2 rounded-full font-semibold text-lg transition-colors\r bg-blue-600 text-white shadow-md hover:bg-blue-700",children:"Mi Dashboard"}),(0,qv.jsx)("button",{onClick:()=>n("/seller/orders"),className:"px-6 py-2 rounded-full font-semibold text-lg transition-colors\r bg-gray-200 text-gray-800 hover:bg-gray-300",children:"Mis Ventas"})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-10",children:[(0,qv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center justify-between",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("p",{className:"text-gray-500 text-sm",children:"Productos Totales"}),(0,qv.jsx)("p",{className:"text-3xl font-bold text-blue-700",children:Array.isArray(o)?o.length:0})]}),(0,qv.jsx)("div",{className:"rounded-full p-3 bg-blue-100 flex items-center justify-center",children:(0,qv.jsx)("svg",{className:"w-10 h-10 text-blue-700",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M18 6h-2c0-2.21-1.79-4-4-4s-4 1.79-4 4H6c-1.11 0-2 .89-2 2v10c0 1.11.89 2 2 2h12c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zM10 4h4v2h-4V4zm6 14H6V8h12v10z"})})})]}),(0,qv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center justify-between",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("p",{className:"text-gray-500 text-sm",children:"Valor del Inventario"}),(0,qv.jsxs)("p",{className:"text-3xl font-bold text-green-700",children:["$",Array.isArray(o)?o.reduce((e,t)=>e+t.price,0).toLocaleString("es-MX"):"0"]})]}),(0,qv.jsx)("div",{className:"rounded-full p-3 bg-green-100 flex items-center justify-center",children:(0,qv.jsx)("svg",{className:"w-10 h-10 text-green-700",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M10 18H8V6h2c.83 0 1.5-.67 1.5-1.5S10.83 3 10 3H8V2H10c1.83 0 3.5 1.67 3.5 3.5s-1.67 3.5-3.5 3.5H8v2h2c1.83 0 3.5 1.67 3.5 3.5S11.83 18 10 18H8v2h2c1.83 0 3.5-1.67 3.5-3.5s-1.67-3.5-3.5-3.5H8v2z"})})})]}),(0,qv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center justify-between",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("p",{className:"text-gray-500 text-sm",children:"Ventas (30 d\xedas)"}),(0,qv.jsx)("p",{className:"text-3xl font-bold text-orange-700",children:"12"})]}),(0,qv.jsx)("div",{className:"rounded-full p-3 bg-orange-100 flex items-center justify-center",children:(0,qv.jsx)("svg",{className:"w-10 h-10 text-orange-700",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M16 6L12 10L8 6L2 12V16H22V8L16 6zM2 18H22V20H2V18z"})})})]}),(0,qv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex items-center justify-between",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("p",{className:"text-gray-500 text-sm",children:"Calificaci\xf3n"}),(0,qv.jsx)("p",{className:"text-3xl font-bold text-yellow-700",children:"4.8 / 5"})]}),(0,qv.jsx)("div",{className:"rounded-full p-3 bg-yellow-100 flex items-center justify-center",children:(0,qv.jsx)("svg",{className:"w-10 h-10 text-yellow-700",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M12 17.27L18.18 21.02L16.54 13.88L22 9.27L14.81 8.64L12 2L9.19 8.64L2 9.27L7.46 13.88L5.82 21.02L12 17.27Z"})})})]})]}),(0,qv.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md mb-8",children:[(0,qv.jsx)("h3",{className:"text-2xl font-semibold text-gray-800 mb-4",children:"Mi Inventario"}),Array.isArray(o)&&0===o.length?(0,qv.jsx)("p",{className:"text-gray-600 text-center",children:"No has publicado ning\xfan producto a\xfan."}):(0,qv.jsx)("div",{className:"overflow-x-auto",children:(0,qv.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,qv.jsx)("thead",{className:"bg-gray-50",children:(0,qv.jsxs)("tr",{children:[(0,qv.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PRODUCTO"}),(0,qv.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ESTADO"}),(0,qv.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"STOCK"}),(0,qv.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"PRECIO"}),(0,qv.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"ACCIONES"})]})}),(0,qv.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:Array.isArray(o)&&o.map(e=>(0,qv.jsxs)("tr",{children:[(0,qv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("div",{className:"flex-shrink-0 h-10 w-10",children:(0,qv.jsx)("img",{className:"h-10 w-10 rounded-full object-cover",src:e.imageUrl||`https://placehold.it/40x40?text=${e.name.substring(0,Math.min(e.name.length,3))}`,alt:e.name})}),(0,qv.jsxs)("div",{className:"ml-4",children:[(0,qv.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),(0,qv.jsx)("div",{className:"text-sm text-gray-500",children:e.category})]})]})}),(0,qv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,qv.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full "+("Nuevo"===e.condition?"bg-green-100 text-green-800":"Usado"===e.condition?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.condition})}),(0,qv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.stock}),(0,qv.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.price.toLocaleString("es-MX")]}),(0,qv.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,qv.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,qv.jsx)("button",{onClick:()=>{return t=e._id,void console.log("Alternar favorito para producto:",t);var t},className:"text-gray-400 hover:text-yellow-500",children:(0,qv.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M12 17.27L18.18 21.02L16.54 13.88L22 9.27L14.81 8.64L12 2L9.19 8.64L2 9.27L7.46 13.88L5.82 21.02L12 17.27Z"})})}),(0,qv.jsx)("button",{onClick:()=>{return t=e._id,console.log("Editar producto:",t),void n(`/seller/edit-product/${t}`);var t},className:"text-blue-600 hover:text-blue-900",children:(0,qv.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.39-.39-1.02-.39-1.41 0l-1.83 1.83 2.34 2.34 1.83-1.83zM3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25z"})})}),(0,qv.jsx)("button",{onClick:()=>{return t=e._id,n=e.name,console.log("DEBUG-FRONTEND: Inici\xf3 handleDeleteProduct para ID:",t,"Nombre:",n),m(t),y(n),void f(!0);var t,n},className:"text-red-600 hover:text-red-900",children:(0,qv.jsx)("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]})})]},e._id))})]})})]}),(0,qv.jsx)(_w,{isOpen:h,onClose:()=>f(!1),onConfirm:async()=>{if(console.log("DEBUG-FRONTEND: \xa1handleConfirmDelete iniciado!"),p){c(!0),d(null);try{if(console.log("DEBUG-FRONTEND: Verificando currentUser y token antes de DELETE."),!r||!r.getIdToken)return d("Error de autenticaci\xf3n. Por favor, inicia sesi\xf3n de nuevo."),c(!1),void console.log("DEBUG-FRONTEND: Error: No hay currentUser o getIdToken no disponible para DELETE.");const e=await r.getIdToken();console.log("DEBUG-FRONTEND: ID Token obtenido. Iniciando petici\xf3n axios.delete."),console.log("DEBUG-FRONTEND: URL de DELETE:",`${gw}/products/${p}`);const t=await mw.delete(`${gw}/products/${p}`,{headers:{Authorization:`Bearer ${e}`}});console.log("DEBUG-FRONTEND: Petici\xf3n DELETE enviada con \xe9xito. Respuesta recibida:",t.data),a(e=>e.filter(e=>e._id!==p)),c(!1),alert("\xa1Producto eliminado exitosamente!"),console.log("DEBUG-FRONTEND: Producto eliminado de la UI y mensaje de \xe9xito.")}catch(e){console.error("DEBUG-FRONTEND: Error en la petici\xf3n DELETE:",e.response?e.response.data:e.message),d(`Error al eliminar producto: ${e.response&&e.response.data&&e.response.data.message?e.response.data.message:e.message}`),c(!1)}finally{m(null),y(""),f(!1)}}else console.log("DEBUG-FRONTEND: productToDelete es null, cancelando confirmaci\xf3n real.")},itemType:"este producto",itemName:g})]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:[(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"No tienes permiso para acceder a este panel. Debes iniciar sesi\xf3n como vendedor."}),(0,qv.jsx)("button",{onClick:()=>n("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"Inicia Sesi\xf3n"})]})},Cw=()=>{const e=re(),[t,n]=(0,i.useState)(1),[r,s]=(0,i.useState)(!1),[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)({userType:"Vendedor",email:"",password:"",confirmPassword:"",name:"",phone:"",address:"",cp:"",curp_rfc:"",clabe:"",privacyAccepted:!1}),p=e=>{const{name:t,value:n,type:r,checked:s}=e.target;f(e=>({...e,[t]:"checkbox"===r?s:n}))},m=()=>{switch(c(null),a(null),t){case 1:if(!h.email||!h.password||!h.confirmPassword)return void c("Por favor, completa todos los campos.");if(h.password.length<6)return void c("La contrase\xf1a debe tener al menos 6 caracteres.");if(h.password!==h.confirmPassword)return void c("Las contrase\xf1as no coinciden.");break;case 2:if(!h.name||!h.phone)return void c("Por favor, ingresa tu nombre y tel\xe9fono.");break;case 3:if(!h.address||!h.cp)return void c("Por favor, ingresa tu direcci\xf3n y c\xf3digo postal.")}n(e=>e+1)},g=()=>{n(e=>e-1)};return(0,qv.jsxs)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100 p-4",children:[(0,qv.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Crea tu cuenta en AUTO HOST"}),(0,qv.jsxs)("div",{className:"flex justify-around text-center mb-8 text-sm font-medium text-gray-500",children:[(0,qv.jsx)("span",{className:t>=1?"text-blue-600":"",children:"\u2460 Cuenta"}),(0,qv.jsx)("span",{children:"\xbb"}),(0,qv.jsx)("span",{className:t>=2?"text-blue-600":"",children:"\u2461 Tus Datos"}),(0,qv.jsx)("span",{children:"\xbb"}),(0,qv.jsx)("span",{className:t>=3?"text-blue-600":"",children:"\u2462 Direcci\xf3n"}),(0,qv.jsx)("span",{children:"\xbb"}),(0,qv.jsx)("span",{className:t>=4?"text-blue-600":"",children:"\u2463 Confirmar"})]}),l&&(0,qv.jsx)("p",{className:"text-red-500 text-center mb-4",children:l}),o&&(0,qv.jsx)("p",{className:"text-red-500 text-center mb-4",children:o}),1===t&&(0,qv.jsxs)("div",{className:"space-y-4",children:[(0,qv.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Paso 1: Datos de tu cuenta"}),(0,qv.jsxs)("div",{className:"flex rounded-lg overflow-hidden border border-gray-300",children:[(0,qv.jsx)("button",{className:"w-1/2 py-3 text-lg font-semibold transition-colors duration-200 "+("Comprador"===h.userType?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>f(e=>({...e,userType:"Comprador"})),disabled:r,children:"Comprador"}),(0,qv.jsx)("button",{className:"w-1/2 py-3 text-lg font-semibold transition-colors duration-200 "+("Vendedor"===h.userType?"bg-orange-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),onClick:()=>f(e=>({...e,userType:"Vendedor"})),disabled:r,children:"Vendedor"})]}),(0,qv.jsx)("input",{type:"email",name:"email",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Email",value:h.email,onChange:p,required:!0,disabled:r}),(0,qv.jsx)("input",{type:"password",name:"password",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Contrase\xf1a",value:h.password,onChange:p,required:!0,disabled:r}),(0,qv.jsx)("input",{type:"password",name:"confirmPassword",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Confirmar Contrase\xf1a",value:h.confirmPassword,onChange:p,required:!0,disabled:r}),(0,qv.jsx)("button",{onClick:m,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:"Siguiente"})]}),2===t&&(0,qv.jsxs)("div",{className:"space-y-4",children:[(0,qv.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Paso 2: Tus Datos Personales"}),(0,qv.jsx)("input",{type:"text",name:"name",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Nombre Completo",value:h.name,onChange:p,required:!0,disabled:r}),(0,qv.jsx)("input",{type:"tel",name:"phone",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Tel\xe9fono (ej. 5512345678)",value:h.phone,onChange:p,required:!0,disabled:r}),"Vendedor"===h.userType&&(0,qv.jsxs)(qv.Fragment,{children:[(0,qv.jsx)("input",{type:"text",name:"curp_rfc",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"CURP o RFC (solo vendedores)",value:h.curp_rfc,onChange:p,disabled:r}),(0,qv.jsx)("input",{type:"text",name:"clabe",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"CLABE Interbancaria (solo vendedores)",value:h.clabe,onChange:p,disabled:r})]}),(0,qv.jsxs)("div",{className:"flex justify-between gap-4 mt-6",children:[(0,qv.jsx)("button",{onClick:g,className:"w-1/2 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:"Anterior"}),(0,qv.jsx)("button",{onClick:m,className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:"Siguiente"})]})]}),3===t&&(0,qv.jsxs)("div",{className:"space-y-4",children:[(0,qv.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Paso 3: Direcci\xf3n"}),(0,qv.jsx)("input",{type:"text",name:"address",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Direcci\xf3n completa",value:h.address,onChange:p,required:!0,disabled:r}),(0,qv.jsx)("input",{type:"text",name:"cp",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"C\xf3digo Postal (C.P.)",value:h.cp,onChange:p,required:!0,disabled:r}),(0,qv.jsxs)("div",{className:"flex justify-between gap-4 mt-6",children:[(0,qv.jsx)("button",{onClick:g,className:"w-1/2 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:"Anterior"}),(0,qv.jsx)("button",{onClick:m,className:"w-1/2 bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:"Siguiente"})]})]}),4===t&&(0,qv.jsxs)("div",{className:"space-y-4",children:[(0,qv.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-4",children:"Paso 4: Confirmar Datos"}),(0,qv.jsxs)("div",{className:"bg-gray-50 p-4 rounded-md border border-gray-200 text-gray-800 space-y-2",children:[(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Email:"})," ",h.email]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Tipo de Usuario:"})," ",h.userType]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Nombre:"})," ",h.name]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Tel\xe9fono:"})," ",h.phone]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"Direcci\xf3n:"})," ",h.address]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"C.P.:"})," ",h.cp]}),"Vendedor"===h.userType&&(0,qv.jsxs)(qv.Fragment,{children:[(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"CURP/RFC:"})," ",h.curp_rfc]}),(0,qv.jsxs)("p",{children:[(0,qv.jsx)("strong",{children:"CLABE:"})," ",h.clabe]})]})]}),(0,qv.jsxs)("div",{className:"flex items-center mt-6",children:[(0,qv.jsx)("input",{type:"checkbox",id:"privacyAccepted",name:"privacyAccepted",checked:h.privacyAccepted,onChange:p,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:r}),(0,qv.jsxs)("label",{htmlFor:"privacyAccepted",className:"ml-2 text-gray-700 text-sm",children:["He le\xeddo y acepto las"," ",(0,qv.jsx)("span",{onClick:()=>d(!0),className:"text-blue-600 hover:underline cursor-pointer",children:"Pol\xedticas de Privacidad"}),"."]})]}),(0,qv.jsxs)("div",{className:"flex justify-between gap-4 mt-6",children:[(0,qv.jsx)("button",{onClick:g,className:"w-1/2 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:"Anterior"}),(0,qv.jsx)("button",{onClick:async()=>{if(s(!0),c(null),a(null),!h.privacyAccepted)return c("Debes aceptar las Pol\xedticas de Privacidad para continuar."),void s(!1);try{const t=await async function(e,t,n){var r;const s=Br(e),i={returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(null===(r=s._getRecaptchaConfig())||void 0===r?void 0:r.emailPasswordEnabled){const e=await Fr(s,i,"signUpPassword");o=cs(s,e)}else o=cs(s,i).catch(async e=>{if("auth/missing-recaptcha-token"===e.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const e=await Fr(s,i,"signUpPassword");return cs(s,e)}return Promise.reject(e)});const a=await o.catch(e=>Promise.reject(e)),l=await us._fromIdTokenResponse(s,"signIn",a);return await s._updateCurrentUser(l.user),l}(Bv,h.email,h.password),n=t.user;console.log("Usuario autenticado con \xe9xito en Firebase Auth:",n);const r=iy($v,"users",n.uid),s={uid:n.uid,email:h.email,userType:h.userType,name:h.name,phone:h.phone,address:h.address,cp:h.cp,privacyAccepted:h.privacyAccepted,createdAt:new Date};"Vendedor"===h.userType&&(s.curp_rfc=h.curp_rfc,s.clabe=h.clabe),await cv(r,s),console.log("Datos de perfil guardados en Firestore con \xe9xito."),e("/register-success")}catch(t){console.error("Error al registrar usuario o guardar datos:",t);let e="Ocurri\xf3 un error inesperado. Por favor, int\xe9ntalo de nuevo.";if(t.code)switch(t.code){case"auth/email-already-in-use":e="El email ya est\xe1 registrado. Por favor, usa otro o inicia sesi\xf3n.";break;case"auth/invalid-email":e="El formato del email no es v\xe1lido.";break;case"auth/weak-password":e="La contrase\xf1a es demasiado d\xe9bil (debe tener al menos 6 caracteres).";break;case"auth/operation-not-allowed":e="La operaci\xf3n de registro no est\xe1 permitida. Habil\xedtala en Firebase Console.";break;default:e=t.message}else e=t.message||"Error al guardar los datos adicionales del usuario.";a(e)}finally{s(!1)}},className:"w-1/2 bg-orange-600 hover:bg-orange-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:r,children:r?"Completando...":"Completar Registro"})]})]}),(0,qv.jsxs)("p",{className:"text-center text-gray-600 mt-6",children:["\xbfYa tienes cuenta?"," ",(0,qv.jsx)(je,{to:"/login",className:"text-blue-600 hover:underline",children:"Inicia Sesi\xf3n"})]})]}),(0,qv.jsx)(Sw,{isOpen:u,onClose:()=>d(!1)})]})},Iw=()=>{const e=re(),{currentUser:t}=Wv(),[n,r]=(0,i.useState)(!1),[s,o]=(0,i.useState)(null),[a,l]=(0,i.useState)(null),[c,u]=(0,i.useState)({name:"",description:"",price:"",category:"Motor",condition:"Nuevo",stock:"1",marca_refaccion:"",lado:"",numero_parte:"",sellerEmail:t?t.email:"",isOnOffer:!1,originalPrice:"",discountPercentage:""}),[d,h]=(0,i.useState)(null),f=e=>{const{name:t,value:n,type:r,checked:s}=e.target;u(e=>({...e,[t]:"checkbox"===r?s:n}))};return t?(0,qv.jsxs)("div",{className:"container mx-auto p-8 max-w-2xl bg-white rounded-lg shadow-lg my-8",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Publicar Nuevo Producto"}),(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Llena los detalles de tu refacci\xf3n para publicarla en AUTO HOST."}),s&&(0,qv.jsx)("p",{className:"text-red-500 text-center mb-4",children:s}),a&&(0,qv.jsx)("p",{className:"text-green-600 text-center mb-4",children:a}),(0,qv.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),r(!0),o(null),l(null),!t||!t.uid)return o("No est\xe1s logueado como vendedor. Por favor, inicia sesi\xf3n."),void r(!1);if(!c.name||!c.description||!c.price||!c.category||!c.condition||!c.stock)return o("Por favor, completa todos los campos obligatorios."),void r(!1);if(!d)return o("Por favor, sube una imagen del producto."),void r(!1);try{const n=await t.getIdToken(),r=new FormData;for(const e in c)r.append(e,c[e]);r.append("user",t.uid),r.append("image",d);const s=await mw.post(`${gw}/products`,r,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${n}`}});console.log("Producto a\xf1adido con \xe9xito:",s.data),l("\xa1Producto publicado exitosamente!"),u({name:"",description:"",price:"",category:"Motor",condition:"Nuevo",stock:"1",marca_refaccion:"",lado:"",numero_parte:"",sellerEmail:t.email,isOnOffer:!1,originalPrice:"",discountPercentage:""}),h(null),setTimeout(()=>e("/seller-dashboard"),2e3)}catch(s){console.error("Error al a\xf1adir producto:",s),s.response&&s.response.data&&s.response.data.message?o(`Error: ${s.response.data.message}`):o("Error al publicar el producto. Intenta de nuevo.")}finally{r(!1)}},className:"space-y-6",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"name",className:"block text-gray-700 text-lg font-medium mb-2",children:"Nombre del Producto *"}),(0,qv.jsx)("input",{type:"text",id:"name",name:"name",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Faro delantero derecho, Bomba de gasolina",value:c.name,onChange:f,required:!0,disabled:n})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"description",className:"block text-gray-700 text-lg font-medium mb-2",children:"Descripci\xf3n *"}),(0,qv.jsx)("textarea",{id:"description",name:"description",rows:"4",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu refacci\xf3n detalladamente (compatibilidad, estado, etc.)",value:c.description,onChange:f,required:!0,disabled:n})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"price",className:"block text-gray-700 text-lg font-medium mb-2",children:"Precio *"}),(0,qv.jsx)("input",{type:"number",id:"price",name:"price",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"$ Ej: 500.00",value:c.price,onChange:f,required:!0,min:"0",step:"0.01",disabled:n})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"stock",className:"block text-gray-700 text-lg font-medium mb-2",children:"Stock *"}),(0,qv.jsx)("input",{type:"number",id:"stock",name:"stock",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 1, 5",value:c.stock,onChange:f,required:!0,min:"1",disabled:n})]})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"category",className:"block text-gray-700 text-lg font-medium mb-2",children:"Categor\xeda *"}),(0,qv.jsx)("select",{id:"category",name:"category",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:c.category,onChange:f,required:!0,disabled:n,children:["Motor","Frenos","Suspensi\xf3n","El\xe9ctrico","Carrocer\xeda","Transmisi\xf3n","Accesorios"].map(e=>(0,qv.jsx)("option",{value:e,children:e},e))})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"condition",className:"block text-gray-700 text-lg font-medium mb-2",children:"Condici\xf3n *"}),(0,qv.jsx)("select",{id:"condition",name:"condition",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:c.condition,onChange:f,required:!0,disabled:n,children:["Nuevo","Usado","Reacondicionado"].map(e=>(0,qv.jsx)("option",{value:e,children:e},e))})]})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"marca_refaccion",className:"block text-gray-700 text-lg font-medium mb-2",children:"Marca de Refacci\xf3n"}),(0,qv.jsx)("input",{type:"text",id:"marca_refaccion",name:"marca_refaccion",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Bosch, NGK",value:c.marca_refaccion,onChange:f,disabled:n})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"lado",className:"block text-gray-700 text-lg font-medium mb-2",children:"Lado (si aplica)"}),(0,qv.jsx)("input",{type:"text",id:"lado",name:"lado",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Izquierdo, Derecho",value:c.lado,onChange:f,disabled:n})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"numero_parte",className:"block text-gray-700 text-lg font-medium mb-2",children:"N\xfamero de Parte"}),(0,qv.jsx)("input",{type:"text",id:"numero_parte",name:"numero_parte",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: ABC12345, #555",value:c.numero_parte,onChange:f,disabled:n})]})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"image",className:"block text-gray-700 text-lg font-medium mb-2",children:"Imagen del Producto *"}),(0,qv.jsx)("input",{type:"file",id:"image",name:"image",className:"w-full p-3 border border-gray-300 rounded-md file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]?h(e.target.files[0]):h(null)},required:!0,disabled:n})]}),(0,qv.jsxs)("div",{className:"border border-gray-300 p-4 rounded-md space-y-4",children:[(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"checkbox",id:"isOnOffer",name:"isOnOffer",checked:c.isOnOffer,onChange:f,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:n}),(0,qv.jsx)("label",{htmlFor:"isOnOffer",className:"ml-2 text-gray-700 font-medium",children:"\xbfEst\xe1 en oferta?"})]}),c.isOnOffer&&(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"originalPrice",className:"block text-gray-700 text-lg font-medium mb-2",children:"Precio Original"}),(0,qv.jsx)("input",{type:"number",id:"originalPrice",name:"originalPrice",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"$ Ej: 700.00",value:c.originalPrice,onChange:f,required:c.isOnOffer,min:"0",step:"0.01",disabled:n})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"discountPercentage",className:"block text-gray-700 text-lg font-medium mb-2",children:"Porcentaje de Descuento"}),(0,qv.jsx)("input",{type:"number",id:"discountPercentage",name:"discountPercentage",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 10, 25",value:c.discountPercentage,onChange:f,required:c.isOnOffer,min:"0",max:"100",disabled:n})]})]})]}),(0,qv.jsx)("button",{type:"submit",className:"w-full bg-green-600 hover:bg-green-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:n,children:n?"Publicando...":"Publicar Producto"}),(0,qv.jsx)(je,{to:"/seller-dashboard",className:"block text-center text-blue-600 hover:underline mt-4",children:"Volver al Panel del Vendedor"})]})]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:[(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"Debes iniciar sesi\xf3n para publicar productos."}),(0,qv.jsx)("button",{onClick:()=>e("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"Inicia Sesi\xf3n"})]})},jw=e=>{let{isOpen:t,onClose:n,productId:r,otherUserId:s,productName:o,otherUserEmail:a}=e;const{currentUser:l,loadingAuth:c}=Wv(),[u,d]=(0,i.useState)([]),[h,f]=(0,i.useState)(""),[p,m]=(0,i.useState)(!0),[g,y]=(0,i.useState)(!1),[v,b]=(0,i.useState)(null),x=(0,i.useRef)(null),w=(0,i.useCallback)(async()=>{if(!c&&l&&r&&s){m(!0),b(null);try{const e=await l.getIdToken(),t=(await mw.get(`https://us-central1-blissful-land-465502-f0.cloudfunctions.net/api/api/messages/${r}/${s}`,{headers:{Authorization:`Bearer ${e}`}})).data.map(e=>({...e,timestamp:e.timestamp?new Date(1e3*e.timestamp._seconds):null})).sort((e,t)=>e.timestamp.getTime()-t.timestamp.getTime());d(t),m(!1),console.log("Mensajes de conversaci\xf3n obtenidos:",t)}catch(e){console.error("Error al obtener mensajes de la conversaci\xf3n:",e.response?e.response.data:e.message),b("No se pudo cargar la conversaci\xf3n.")}finally{m(!1)}}else m(!1)},[l,c,r,s]);return(0,i.useEffect)(()=>{t&&w()},[t,w]),(0,i.useEffect)(()=>{var e;null===(e=x.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},[u]),t?(0,qv.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex justify-center items-center p-4 animate-fade-in",onClick:n,children:(0,qv.jsxs)("div",{className:"bg-white rounded-lg shadow-2xl w-full max-w-2xl h-5/6 flex flex-col",onClick:e=>e.stopPropagation(),children:[(0,qv.jsxs)("div",{className:"p-4 border-b flex justify-between items-center bg-blue-600 text-white rounded-t-lg",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsxs)("h2",{className:"text-xl font-bold",children:["Conversaci\xf3n con ",a]}),(0,qv.jsxs)("p",{className:"text-sm",children:["Sobre: ",o]})]}),(0,qv.jsx)("button",{type:"button",onClick:n,className:"p-1 rounded-full text-white hover:bg-blue-700",children:"X"})]}),(0,qv.jsxs)("div",{className:"flex-grow p-4 overflow-y-auto space-y-4",children:[p?(0,qv.jsx)("div",{className:"text-center text-blue-600",children:"Cargando mensajes..."}):v?(0,qv.jsx)("div",{className:"text-center text-red-600",children:v}):0===u.length?(0,qv.jsx)("div",{className:"text-center text-gray-600",children:"No hay mensajes en esta conversaci\xf3n."}):u.map((e,t)=>(0,qv.jsx)("div",{className:"flex "+(e.senderId===l.uid?"justify-end":"justify-start"),children:(0,qv.jsxs)("div",{className:"max-w-[70%] p-3 rounded-lg shadow-md "+(e.senderId===l.uid?"bg-blue-500 text-white":"bg-gray-200 text-gray-800"),children:[(0,qv.jsx)("p",{className:"text-xs font-semibold mb-1",children:e.senderId===l.uid?"T\xfa":e.senderEmail||"Usuario"}),(0,qv.jsx)("p",{children:e.content}),(0,qv.jsx)("p",{className:"text-right text-xs mt-1 opacity-75",children:e.timestamp?e.timestamp.toLocaleString():""})]})},e.id||t)),(0,qv.jsx)("div",{ref:x})]}),(0,qv.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),h.trim()){y(!0),b(null);try{const e=await l.getIdToken(),t=await mw.post("https://us-central1-blissful-land-465502-f0.cloudfunctions.net/api/api/messages/reply",{receiverId:s,productId:r,productName:o,content:h.trim(),receiverEmail:a},{headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`}});console.log("Respuesta enviada:",t.data),f(""),await w()}catch(t){console.error("Error al enviar respuesta:",t.response?t.response.data:t.message),b("No se pudo enviar la respuesta.")}finally{y(!1)}}},className:"p-4 border-t bg-gray-50 flex items-center gap-2",children:[(0,qv.jsx)("textarea",{value:h,onChange:e=>f(e.target.value),placeholder:"Escribe tu mensaje...",className:"flex-grow p-2 border rounded-lg focus:ring-2 focus:ring-blue-500",rows:"1",disabled:g||!l,style:{resize:"none"}}),(0,qv.jsxs)("button",{type:"submit",disabled:g||!l||!h.trim(),className:"bg-blue-600 text-white p-2 rounded-full hover:bg-blue-700 disabled:bg-gray-400",children:[(0,qv.jsx)("span",{children:"\u27a4"})," "]})]})]})}):null},Aw=()=>{const e=re(),{currentUser:t,loadingAuth:n}=Wv(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),[u,d]=(0,i.useState)(!1),[h,f]=(0,i.useState)(null),p=(0,i.useCallback)(async()=>{if(!n){if(!t)return a(!1),void c("Debes iniciar sesi\xf3n para ver tus mensajes.");a(!0),c(null);try{const e=await t.getIdToken(),n=await mw.get(`${gw}/messages/conversations`,{headers:{Authorization:`Bearer ${e}`}});console.log("Conversaciones obtenidas:",n.data);const r=n.data.map(e=>({...e,lastMessageTimestamp:e.lastMessageTimestamp?new Date(1e3*e.lastMessageTimestamp._seconds):null}));s(r),a(!1)}catch(e){console.error("Error al obtener conversaciones:",e.response?e.response.data:e.message),c("No se pudieron cargar tus conversaciones. Intenta de nuevo."),a(!1)}}},[t,n]);(0,i.useEffect)(()=>{p()},[p]);return n||o?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando tus mensajes..."}):l?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:l}):t?(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:["\xa0 \xa0 \xa0 ",(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Mis Mensajes"}),"\xa0 \xa0 \xa0 ",(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Aqu\xed puedes ver todas tus conversaciones con otros usuarios."}),"\xa0 \xa0 \xa0 ",0===r.length?(0,qv.jsx)("p",{className:"text-center text-gray-600 mt-10",children:"No tienes conversaciones a\xfan. Contacta a un vendedor desde un producto."}):(0,qv.jsxs)("div",{className:"space-y-4",children:["\xa0 \xa0 \xa0 \xa0 \xa0 ",r.map(e=>(0,qv.jsxs)("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm hover:bg-gray-100 cursor-pointer",onClick:()=>(e=>{f(e),d(!0)})(e),children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("div",{children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-lg font-semibold text-gray-800",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",e.otherParticipantEmail?`Con: ${e.otherParticipantEmail}`:`Producto: ${e.productName}`,"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-sm text-gray-700",children:["Sobre: ",e.productName]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-sm text-gray-500",children:['\xdaltimo mensaje: "',e.lastMessage,'"']}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",(0,qv.jsxs)("p",{className:"text-xs text-gray-400",children:["\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",e.lastMessageTimestamp?e.lastMessageTimestamp.toLocaleString():"Fecha desconocida","\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 \xa0 ",e.unreadCount>0&&(0,qv.jsx)("span",{className:"bg-blue-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:e.unreadCount}),"\xa0 \xa0 \xa0 \xa0 \xa0 \xa0 "]},`${e.productId}-${e.otherParticipantId}`)),"\xa0 \xa0 \xa0 \xa0 "]}),"\xa0 \xa0 \xa0 ","\xa0 \xa0 \xa0 ",u&&h&&(0,qv.jsx)(jw,{isOpen:u,onClose:()=>{d(!1),f(null),p()},productId:h.productId,otherUserId:h.otherParticipantId,productName:h.productName,otherUserEmail:h.otherParticipantEmail}),"\xa0 \xa0 "]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:["\xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"Debes iniciar sesi\xf3n para ver tus mensajes."}),"\xa0 \xa0 \xa0 \xa0 ",(0,qv.jsx)("button",{onClick:()=>e("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"\xa0 \xa0 \xa0 \xa0 \xa0 Inicia Sesi\xf3n \xa0 \xa0 \xa0 \xa0 "}),"\xa0 \xa0 \xa0 "]})},Rw=()=>{const{id:e}=se(),t=re(),{currentUser:n}=Wv(),[r,s]=(0,i.useState)({name:"",description:"",price:"",category:"Motor",condition:"Nuevo",stock:"1",marca_refaccion:"",lado:"",numero_parte:"",sellerEmail:"",isOnOffer:!1,originalPrice:"",discountPercentage:""}),[o,a]=(0,i.useState)(null),[l,c]=(0,i.useState)(""),[u,d]=(0,i.useState)(!0),[h,f]=(0,i.useState)(null),[p,m]=(0,i.useState)(null),g=(0,i.useCallback)(async()=>{d(!0),f(null);try{const t=(await mw.get(`${gw}/products/${e}`)).data;if(!n||t.user!==n.uid)return f("Acceso denegado. No tienes permiso para editar este producto."),void d(!1);s({name:t.name||"",description:t.description||"",price:t.price||"",category:t.category||"Motor",condition:t.condition||"Nuevo",stock:t.stock||"1",marca_refaccion:t.marca_refaccion||"",lado:t.lado||"",numero_parte:t.numero_parte||"",sellerEmail:t.sellerEmail||n.email,isOnOffer:t.isOnOffer||!1,originalPrice:t.originalPrice||"",discountPercentage:t.discountPercentage||""}),c(t.imageUrl||""),d(!1)}catch(t){console.error("Error al obtener detalles del producto para edici\xf3n:",t),d(!1),t.response&&404===t.response.status?f("Producto no encontrado para edici\xf3n."):t.response&&403===t.response.status?f("No tienes permiso para editar este producto."):f("Error al cargar los detalles del producto. Intenta de nuevo.")}},[e,n]);(0,i.useEffect)(()=>{g()},[g]);const y=e=>{const{name:t,value:n,type:r,checked:i}=e.target;s(e=>({...e,[t]:"checkbox"===r?i:n}))};return u?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando producto para edici\xf3n..."}):h?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:h}):r.name||u?(0,qv.jsxs)("div",{className:"container mx-auto p-8 max-w-2xl bg-white rounded-lg shadow-lg my-8",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Editar Producto"}),(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Modifica los detalles de tu refacci\xf3n."}),h&&(0,qv.jsx)("p",{className:"text-red-500 text-center mb-4",children:h}),p&&(0,qv.jsx)("p",{className:"text-green-600 text-center mb-4",children:p}),(0,qv.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),console.log("DEBUG-FRONTEND: handleSubmit iniciado."),d(!0),f(null),m(null),console.log("DEBUG-FRONTEND: Validando usuario logueado."),!n||!n.uid)return f("No est\xe1s logueado. Por favor, inicia sesi\xf3n."),d(!1),void console.log("DEBUG-FRONTEND: Error: Usuario no logueado.");if(console.log("DEBUG-FRONTEND: Validando campos obligatorios."),!r.name||!r.description||!r.price||!r.category||!r.condition||!r.stock)return f("Por favor, completa todos los campos obligatorios."),d(!1),void console.log("DEBUG-FRONTEND: Error: Campos obligatorios incompletos.");try{console.log("DEBUG-FRONTEND: Obteniendo ID Token.");const s=await n.getIdToken();console.log("DEBUG-FRONTEND: ID Token obtenido. Preparando FormData.");const i=new FormData;for(const e in r)i.append(e,r[e]);o?(i.append("image",o),console.log("DEBUG-FRONTEND: Nueva imagen seleccionada y a\xf1adida a FormData.")):console.log("DEBUG-FRONTEND: No se seleccion\xf3 nueva imagen."),console.log("DEBUG-FRONTEND: Enviando petici\xf3n PUT a backend.");const a=await mw.put(`${gw}/products/${e}`,i,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});console.log("DEBUG-FRONTEND: Petici\xf3n PUT enviada con \xe9xito. Respuesta recibida:",a.data),m("\xa1Producto actualizado exitosamente!"),d(!1),setTimeout(()=>t("/seller-dashboard"),2e3)}catch(i){console.error("DEBUG-FRONTEND: Error en la petici\xf3n PUT (catch):",i.response?i.response.data:i.message),f(`Error al actualizar producto: ${i.response&&i.response.data&&i.response.data.message?i.response.data.message:i.message}`),d(!1)}},className:"space-y-6",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"name",className:"block text-gray-700 text-lg font-medium mb-2",children:"Nombre del Producto *"}),(0,qv.jsx)("input",{type:"text",id:"name",name:"name",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Faro delantero derecho, Bomba de gasolina",value:r.name,onChange:y,required:!0,disabled:u})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"description",className:"block text-gray-700 text-lg font-medium mb-2",children:"Descripci\xf3n *"}),(0,qv.jsx)("textarea",{id:"description",name:"description",rows:"4",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Describe tu refacci\xf3n detalladamente (compatibilidad, estado, etc.)",value:r.description,onChange:y,required:!0,disabled:u})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"price",className:"block text-gray-700 text-lg font-medium mb-2",children:"Precio *"}),(0,qv.jsx)("input",{type:"number",id:"price",name:"price",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"$ Ej: 500.00",value:r.price,onChange:y,required:!0,min:"0",step:"0.01",disabled:u})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"stock",className:"block text-gray-700 text-lg font-medium mb-2",children:"Stock *"}),(0,qv.jsx)("input",{type:"number",id:"stock",name:"stock",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 1, 5",value:r.stock,onChange:y,required:!0,min:"1",disabled:u})]})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"category",className:"block text-gray-700 text-lg font-medium mb-2",children:"Categor\xeda *"}),(0,qv.jsx)("select",{id:"category",name:"category",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:r.category,onChange:y,required:!0,disabled:u,children:["Motor","Frenos","Suspensi\xf3n","El\xe9ctrico","Carrocer\xeda","Transmisi\xf3n","Accesorios"].map(e=>(0,qv.jsx)("option",{value:e,children:e},e))})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"condition",className:"block text-gray-700 text-lg font-medium mb-2",children:"Condici\xf3n *"}),(0,qv.jsx)("select",{id:"condition",name:"condition",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",value:r.condition,onChange:y,required:!0,disabled:u,children:["Nuevo","Usado","Reacondicionado"].map(e=>(0,qv.jsx)("option",{value:e,children:e},e))})]})]}),(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"marca_refaccion",className:"block text-gray-700 text-lg font-medium mb-2",children:"Marca de Refacci\xf3n"}),(0,qv.jsx)("input",{type:"text",id:"marca_refaccion",name:"marca_refaccion",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Bosch, NGK",value:r.marca_refaccion,onChange:y,disabled:u})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"lado",className:"block text-gray-700 text-lg font-medium mb-2",children:"Lado (si aplica)"}),(0,qv.jsx)("input",{type:"text",id:"lado",name:"lado",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: Izquierdo, Derecho",value:r.lado,onChange:y,disabled:u})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"numero_parte",className:"block text-gray-700 text-lg font-medium mb-2",children:"N\xfamero de Parte"}),(0,qv.jsx)("input",{type:"text",id:"numero_parte",name:"numero_parte",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: ABC12345, #555",value:r.numero_parte,onChange:y,disabled:u})]})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"image",className:"block text-gray-700 text-lg font-medium mb-2",children:"Imagen del Producto"}),l&&(0,qv.jsxs)("div",{className:"mb-2",children:[(0,qv.jsx)("p",{className:"text-sm text-gray-600",children:"Imagen actual:"}),(0,qv.jsx)("img",{src:l,alt:"Current Product",className:"w-32 h-32 object-cover rounded-md border border-gray-200"})]}),(0,qv.jsx)("input",{type:"file",id:"image",name:"image",className:"w-full p-3 border border-gray-300 rounded-md file:mr-4 file:py-2 file:px-4 file:rounded-md file:border-0 file:text-sm file:font-semibold file:bg-blue-50 file:text-blue-700 hover:file:bg-blue-100",accept:"image/*",onChange:e=>{e.target.files&&e.target.files[0]?a(e.target.files[0]):a(null)},disabled:u}),(0,qv.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Sube una nueva imagen para reemplazar la actual."})]}),(0,qv.jsxs)("div",{className:"border border-gray-300 p-4 rounded-md space-y-4",children:[(0,qv.jsxs)("div",{className:"flex items-center",children:[(0,qv.jsx)("input",{type:"checkbox",id:"isOnOffer",name:"isOnOffer",checked:r.isOnOffer,onChange:y,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500",disabled:u}),(0,qv.jsx)("label",{htmlFor:"isOnOffer",className:"ml-2 text-gray-700 font-medium",children:"\xbfEst\xe1 en oferta?"})]}),r.isOnOffer&&(0,qv.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"originalPrice",className:"block text-gray-700 text-lg font-medium mb-2",children:"Precio Original"}),(0,qv.jsx)("input",{type:"number",id:"originalPrice",name:"originalPrice",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"$ Ej: 700.00",value:r.originalPrice,onChange:y,required:r.isOnOffer,min:"0",step:"0.01",disabled:u})]}),(0,qv.jsxs)("div",{children:[(0,qv.jsx)("label",{htmlFor:"discountPercentage",className:"block text-gray-700 text-lg font-medium mb-2",children:"Porcentaje de Descuento"}),(0,qv.jsx)("input",{type:"number",id:"discountPercentage",name:"discountPercentage",className:"w-full p-3 border border-gray-300 rounded-md focus:ring-blue-500 focus:border-blue-500",placeholder:"Ej: 10, 25",value:r.discountPercentage,onChange:y,required:r.isOnOffer,min:"0",max:"100",disabled:u})]})]})]}),(0,qv.jsx)("button",{type:"submit",className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-3 rounded-md font-semibold text-lg transition-colors duration-200",disabled:u,children:u?"Actualizando...":"Actualizar Producto"}),(0,qv.jsx)(je,{to:"/seller-dashboard",className:"block text-center text-blue-600 hover:underline mt-4",children:"Volver al Panel del Vendedor"})]})]}):(0,qv.jsx)("div",{className:"text-center mt-20 text-gray-600 text-xl",children:"Producto no encontrado o acceso denegado."})},Pw=()=>{const e=re(),{currentUser:t,loadingAuth:n}=Wv(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),u=(0,i.useCallback)(async()=>{if(!n&&t){a(!0),c(null);try{const e=t.uid,n=sy($v,"carts",e,"items"),r=await lv(n),i=[];r.forEach(e=>{i.push({id:e.id,...e.data()})}),s(i),a(!1),console.log("\xcdtems del carrito obtenidos:",i)}catch(e){console.error("Error al obtener \xedtems del carrito:",e),c("No se pudieron cargar los \xedtems de tu carrito. Intenta de nuevo."),a(!1)}}else a(!1)},[t,n]);(0,i.useEffect)(()=>{u()},[u]);const d=async(e,n)=>{if(n<1)return;if(!t)return;const i=t.uid,o=iy($v,"carts",i,"items",e),a=r.find(t=>t.id===e);if(!a)return;const l=a.pricePerUnit;try{await uv(o,{quantity:n,totalPrice:n*l,updatedAt:new Date}),console.log(`Cantidad de ${a.name} actualizada a ${n}.`),s(t=>t.map(t=>t.id===e?{...t,quantity:n,totalPrice:n*l}:t))}catch(c){console.error("Error al actualizar cantidad:",c),alert("Error al actualizar la cantidad. Intenta de nuevo.")}},h=r.reduce((e,t)=>e+t.totalPrice,0);return n||o?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando tu carrito..."}):l?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:l}):t?(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Mi Carrito de Compras"}),(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Revisa los productos que has a\xf1adido."}),0===r.length?(0,qv.jsxs)("div",{className:"text-center mt-10 p-8 border rounded-lg bg-gray-50",children:[(0,qv.jsx)("p",{className:"text-gray-600 text-xl mb-4",children:"Tu carrito est\xe1 vac\xedo."}),(0,qv.jsx)(je,{to:"/catalogo",className:"text-blue-600 hover:underline text-lg",children:"Explora nuestro cat\xe1logo para a\xf1adir productos."})]}):(0,qv.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,qv.jsx)("div",{className:"lg:col-span-2 space-y-4",children:r.map(e=>(0,qv.jsxs)("div",{className:"flex items-center bg-gray-50 p-4 rounded-lg shadow-sm border border-gray-200",children:[(0,qv.jsx)("img",{src:e.imageUrl||`https://placehold.it/80x80?text=${e.name.substring(0,Math.min(e.name.length,5))}`,alt:e.name,className:"w-20 h-20 object-cover rounded-md mr-4"}),(0,qv.jsxs)("div",{className:"flex-grow",children:[(0,qv.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,qv.jsxs)("p",{className:"text-sm text-gray-600",children:["Precio por unidad: $",e.pricePerUnit.toLocaleString("es-MX")]}),(0,qv.jsxs)("div",{className:"flex items-center mt-2",children:[(0,qv.jsx)("button",{onClick:()=>d(e.id,e.quantity-1),className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-l-md hover:bg-gray-300",children:"-"}),(0,qv.jsx)("span",{className:"px-3 py-1 border-t border-b text-gray-800",children:e.quantity}),(0,qv.jsx)("button",{onClick:()=>d(e.id,e.quantity+1),className:"bg-gray-200 text-gray-700 px-2 py-1 rounded-r-md hover:bg-gray-300",children:"+"}),(0,qv.jsxs)("p",{className:"ml-4 font-bold text-blue-600",children:["$",e.totalPrice.toLocaleString("es-MX")]})]})]}),(0,qv.jsx)("button",{onClick:()=>(async(e,n)=>{if(!window.confirm(`\xbfEst\xe1s seguro de que quieres eliminar "${n}" de tu carrito?`))return;if(!t)return;const r=t.uid,i=iy($v,"carts",r,"items",e);try{await dv(i),console.log(`"${n}" eliminado del carrito.`),s(t=>t.filter(t=>t.id!==e))}catch(o){console.error("Error al eliminar \xedtem:",o),alert("Error al eliminar el producto del carrito. Intenta de nuevo.")}})(e.id,e.name),className:"text-red-600 hover:text-red-800 ml-4 p-2 rounded-full hover:bg-red-100",children:(0,qv.jsx)("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:(0,qv.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"})})})]},e.id))}),(0,qv.jsxs)("div",{className:"lg:col-span-1 bg-white p-6 rounded-lg shadow-md border border-gray-200 h-fit sticky top-4",children:[(0,qv.jsx)("h3",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Resumen del Pedido"}),(0,qv.jsxs)("div",{className:"flex justify-between text-lg font-semibold text-gray-700 mb-2",children:[(0,qv.jsx)("span",{children:"Subtotal:"}),(0,qv.jsxs)("span",{children:["$",h.toLocaleString("es-MX")]})]}),(0,qv.jsx)("p",{className:"text-sm text-gray-500 mb-6",children:"Los costos de env\xedo y los impuestos se calcular\xe1n en el checkout."}),(0,qv.jsxs)("button",{onClick:()=>e("/checkout"),className:"w-full bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-md transition-colors text-lg",children:["Proceder al Checkout ($",h.toLocaleString("es-MX"),")"]})]})]})]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:[(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"Debes iniciar sesi\xf3n para ver tu carrito."}),(0,qv.jsx)("button",{onClick:()=>e("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"Inicia Sesi\xf3n"})]})},Ow=()=>{const e=re(),{currentUser:t,loadingAuth:n}=Wv(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),u=(0,i.useCallback)(async()=>{if(!n&&t){a(!0),c(null);try{const e=t.uid,n=$y(sy($v,"orders"),Hy("buyerId","==",e),Gy("createdAt","desc")),r=await lv(n),i=[];r.forEach(e=>{i.push({id:e.id,...e.data()})}),s(i),a(!1),console.log("Pedidos del usuario obtenidos:",i)}catch(e){console.error("Error al obtener pedidos:",e),c("No se pudieron cargar tus pedidos. Intenta de nuevo."),a(!1)}}else a(!1)},[t,n]);return(0,i.useEffect)(()=>{u()},[u]),n||o?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando tus pedidos..."}):l?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:l}):t?(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Mis Pedidos"}),(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Aqu\xed puedes ver el historial de tus compras."}),0===r.length?(0,qv.jsxs)("div",{className:"text-center mt-10 p-8 border rounded-lg bg-gray-50",children:[(0,qv.jsx)("p",{className:"text-gray-600 text-xl mb-4",children:"No has realizado ning\xfan pedido a\xfan."}),(0,qv.jsx)(je,{to:"/catalogo",className:"text-blue-600 hover:underline text-lg",children:"Explora nuestro cat\xe1logo para empezar a comprar."})]}):(0,qv.jsx)("div",{className:"space-y-6",children:r.map(e=>(0,qv.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,qv.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qv.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["Pedido ID: ",e.id.substring(0,8),"..."]}),(0,qv.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold "+("Pendiente"===e.status?"bg-yellow-100 text-yellow-800":"Completado"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,qv.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Fecha: ",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleString():"N/A"]}),(0,qv.jsxs)("p",{className:"text-lg font-semibold text-blue-600 mb-4",children:["Total: $",e.orderTotal.toLocaleString("es-MX")]}),(0,qv.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-2",children:"Productos:"}),(0,qv.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:e.items.map((e,t)=>(0,qv.jsxs)("li",{className:"flex justify-between items-center",children:[(0,qv.jsxs)("span",{children:[e.name," (x",e.quantity,")"]}),(0,qv.jsxs)("span",{children:["$",e.totalPrice.toLocaleString("es-MX")]})]},t))}),(0,qv.jsx)("div",{className:"text-right mt-4",children:(0,qv.jsx)("button",{onClick:()=>console.log("Ver detalles del pedido:",e.id),className:"text-blue-600 hover:underline text-sm",children:"Ver Detalles del Pedido"})})]},e.id))})]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:[(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"Debes iniciar sesi\xf3n para ver tus pedidos."}),(0,qv.jsx)("button",{onClick:()=>e("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"Inicia Sesi\xf3n"})]})},Dw=()=>{const e=re(),{currentUser:t,loadingAuth:n}=Wv(),[r,s]=(0,i.useState)([]),[o,a]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),u=(0,i.useCallback)(async()=>{if(n||!t||!t.firestoreProfile||"Vendedor"!==t.firestoreProfile.userType)return a(!1),void c("Acceso denegado. Debes iniciar sesi\xf3n como vendedor para ver tus ventas.");a(!0),c(null);try{const e=t.uid,n=$y(sy($v,"orders"),Hy("items","array-contains",{sellerId:e}),Gy("createdAt","desc")),r=await lv(n),i=[];r.forEach(t=>{const n=t.data(),r=n.items.filter(t=>t.sellerId===e);r.length>0&&i.push({id:t.id,...n,items:r})}),s(i),a(!1),console.log("Pedidos de venta del vendedor obtenidos:",i)}catch(e){console.error("Error al obtener pedidos de venta:",e),"failed-precondition"===e.code&&e.message.includes("The query requires an index")?(c(`Error: La consulta requiere un \xedndice. Por favor, crea el \xedndice en la consola de Firebase: ${e.message.split("You can create it here: ")[1]}`),console.error("URL del \xedndice:",e.message.split("You can create it here: ")[1])):c("No se pudieron cargar tus ventas. Intenta de nuevo."),a(!1)}},[t,n]);return(0,i.useEffect)(()=>{u()},[u]),n||o?(0,qv.jsx)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:"Cargando tus ventas..."}):l?(0,qv.jsx)("div",{className:"text-center mt-20 text-red-600 text-xl",children:l}):t&&"Vendedor"===t.firestoreProfile.userType?(0,qv.jsxs)("div",{className:"container mx-auto p-8 my-8 bg-white rounded-lg shadow-lg",children:[(0,qv.jsx)("h2",{className:"text-3xl font-bold text-blue-800 text-center mb-6",children:"Mis Ventas"}),(0,qv.jsx)("p",{className:"text-gray-600 text-center mb-8",children:"Aqu\xed puedes ver el historial de tus ventas y pedidos."}),0===r.length?(0,qv.jsxs)("div",{className:"text-center mt-10 p-8 border rounded-lg bg-gray-50",children:[(0,qv.jsx)("p",{className:"text-gray-600 text-xl mb-4",children:"No has realizado ninguna venta a\xfan."}),(0,qv.jsx)(je,{to:"/seller/add-product",className:"text-blue-600 hover:underline text-lg",children:"Publica tu primer producto para empezar a vender."})]}):(0,qv.jsx)("div",{className:"space-y-6",children:r.map(e=>(0,qv.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,qv.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,qv.jsxs)("h3",{className:"text-xl font-bold text-gray-800",children:["Pedido ID: ",e.id.substring(0,8),"..."]}),(0,qv.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-semibold "+("Pendiente"===e.status?"bg-yellow-100 text-yellow-800":"Completado"===e.status?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"),children:e.status})]}),(0,qv.jsxs)("p",{className:"text-sm text-gray-600 mb-2",children:["Fecha de compra: ",e.createdAt?new Date(1e3*e.createdAt.seconds).toLocaleString():"N/A"]}),(0,qv.jsxs)("p",{className:"text-lg font-semibold text-blue-600 mb-4",children:["Total de tu venta: $",e.orderTotal.toLocaleString("es-MX")]})," ",(0,qv.jsx)("h4",{className:"text-md font-semibold text-gray-700 mb-2",children:"Tus productos en este pedido:"}),(0,qv.jsx)("ul",{className:"list-disc list-inside text-sm text-gray-700 space-y-1",children:e.items.map((e,t)=>(0,qv.jsxs)("li",{className:"flex justify-between items-center",children:[(0,qv.jsxs)("span",{children:[e.name," (x",e.quantity,")"]}),(0,qv.jsxs)("span",{children:["$",e.totalPrice.toLocaleString("es-MX")]})]},t))}),(0,qv.jsx)("div",{className:"text-right mt-4",children:(0,qv.jsx)("button",{onClick:()=>console.log("Ver detalles del pedido de venta:",e.id),className:"text-blue-600 hover:underline text-sm",children:"Ver Detalles del Pedido"})})]},e.id))})]}):(0,qv.jsxs)("div",{className:"text-center mt-20",children:[(0,qv.jsx)("p",{className:"text-red-600 text-xl mb-4",children:"No tienes permiso para acceder a esta secci\xf3n. Debes iniciar sesi\xf3n como vendedor."}),(0,qv.jsx)("button",{onClick:()=>e("/login"),className:"bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-md",children:"Inicia Sesi\xf3n"})]})};function Lw(){const{loadingAuth:e}=Wv();if(e)return(0,qv.jsxs)("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 font-sans text-blue-600 text-2xl",children:[(0,qv.jsx)("p",{children:"Cargando aplicaci\xf3n..."}),(0,qv.jsx)("svg",{className:"animate-spin h-10 w-10 text-blue-600 mt-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,qv.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 0012 4.001 8.001 0 004.001 12c-.135.812-.227 1.631-.278 2.454m0 0A7.966 7.966 0 0112 20c1.231 0 2.41-.301 3.454-.877M4 14h.01M16 14h.01M20 14h.01M20 10h.01M4 10h.01M12 18h.01M12 6h.01M18 10h.01M6 18h.01M18 6h.01"})})]});return(0,qv.jsxs)(Te,{children:[" ",(0,qv.jsxs)("div",{className:"flex flex-col min-h-screen bg-gray-100 font-sans",children:[(0,qv.jsx)(Qv,{}),(0,qv.jsx)("main",{className:"flex-grow",children:(0,qv.jsxs)(we,{children:[(0,qv.jsx)(be,{path:"/",element:(0,qv.jsx)(Jv,{})}),(0,qv.jsx)(be,{path:"/catalogo",element:(0,qv.jsx)(yw,{})}),(0,qv.jsx)(be,{path:"/ofertas",element:(0,qv.jsx)(vw,{})}),(0,qv.jsx)(be,{path:"/acerca-de",element:(0,qv.jsx)(bw,{})}),(0,qv.jsx)(be,{path:"/login",element:(0,qv.jsx)(xw,{})}),(0,qv.jsx)(be,{path:"/register",element:(0,qv.jsx)(Cw,{})}),(0,qv.jsx)(be,{path:"/register-success",element:(0,qv.jsxs)("div",{className:"text-center mt-20 text-blue-600 text-xl",children:["\xa1Registro exitoso! \xa1Bienvenido a AUTO HOST!",(0,qv.jsx)("p",{className:"mt-4",children:(0,qv.jsx)(je,{to:"/login",className:"text-blue-500 hover:underline",children:"Inicia sesi\xf3n aqu\xed"})})]})}),(0,qv.jsx)(be,{path:"/products/:id",element:(0,qv.jsx)(Ew,{})}),(0,qv.jsx)(be,{path:"/checkout",element:(0,qv.jsx)(Nw,{})}),(0,qv.jsx)(be,{path:"/purchase-success",element:(0,qv.jsx)(kw,{})}),(0,qv.jsx)(be,{path:"/politica-privacidad",element:(0,qv.jsx)(Sw,{})}),(0,qv.jsx)(be,{path:"/seller-dashboard",element:(0,qv.jsx)(Tw,{onSellerDashboard:()=>{console.log("Manejador global del panel de vendedor activado (simulado).")}})}),(0,qv.jsx)(be,{path:"/seller/add-product",element:(0,qv.jsx)(Iw,{})}),(0,qv.jsx)(be,{path:"/seller/edit-product/:id",element:(0,qv.jsx)(Rw,{})}),(0,qv.jsx)(be,{path:"/messages",element:(0,qv.jsx)(Aw,{})}),(0,qv.jsx)(be,{path:"/messages/:productId/:otherUserId",element:(0,qv.jsx)("h1",{className:"text-center mt-20 text-gray-700",children:"Detalle de Conversaci\xf3n"})}),(0,qv.jsx)(be,{path:"/cart",element:(0,qv.jsx)(Pw,{})}),(0,qv.jsx)(be,{path:"/my-orders",element:(0,qv.jsx)(Ow,{})}),(0,qv.jsx)(be,{path:"/seller/orders",element:(0,qv.jsx)(Dw,{})}),(0,qv.jsx)(be,{path:"*",element:(0,qv.jsx)("h1",{className:"text-center text-3xl mt-20 text-gray-700",children:"404: P\xe1gina no encontrada"})})]})}),(0,qv.jsx)(Xv,{})]})]})}const Mw=function(){return(0,qv.jsx)(Kv,{children:(0,qv.jsx)(Lw,{})})};a.createRoot(document.getElementById("root")).render((0,qv.jsx)(i.StrictMode,{children:(0,qv.jsx)(Mw,{})}))})();
//# sourceMappingURL=main.e8606c06.js.map